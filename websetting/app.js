        // ============================================
        // –°–ò–°–¢–ï–ú–ê –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
        // ============================================

        // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        let currentUILanguage = localStorage.getItem('uiLanguage') || 'ru';

        // –û–±—ä–µ–∫—Ç —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
        const translations = {
            ru: {
                // –û–±—â–∏–µ
                'app.subtitle': '–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',

                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                'nav.global_settings': '–ì–õ–û–ë–ê–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò',
                'nav.main_params': '–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
                'nav.configurations': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'nav.all_configs': '–í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'nav.additional': '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ',
                'nav.base_settings': '–ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'nav.branding': '–ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'nav.export_import': '–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç',

                // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'global.title': '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'global.subtitle': '–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã –≤–µ–±-—á–∞—Ç–∞',
                'global.save_changes': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',

                // API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'api.title': 'API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'api.key_label': 'API –∫–ª—é—á',
                'api.key_placeholder': '–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á –¥–ª—è –∑–∞—â–∏—Ç—ã –≤–µ–±—Ö—É–∫–æ–≤',
                'api.key_hint': '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –≤—Å–µ—Ö –≤–µ–±—Ö—É–∫–æ–≤ —Å–∏—Å—Ç–µ–º—ã',

                // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
                'config_switcher.title': '–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π',
                'config_switcher.show': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å',
                'config_switcher.show_desc': '–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏',
                'config_switcher.default_config': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã
                'theme.title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã',
                'theme.global': '–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–µ–º–∞',
                'theme.auto': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è',
                'theme.light': '–°–≤–µ—Ç–ª–∞—è',
                'theme.dark': '–¢—ë–º–Ω–∞—è',
                'theme.hint': '–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',
                'theme.individual': '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã',
                'theme.allow_override': '–†–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',

                // –Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'lang.title': '–Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'lang.show_switcher': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤',
                'lang.show_switcher_desc': '–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –º–µ–Ω—è—Ç—å —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                'lang.auto_detect': '–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞',
                'lang.enabled': '–í–∫–ª—é—á–µ–Ω–æ',
                'lang.default': '–Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',

                // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
                'priority.title': '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π',
                'priority.info': '–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞, –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.',
                'priority.info_title': '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:',
                'priority.allow': '–†–∞–∑—Ä–µ—à–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'priority.allow_desc': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'priority.partial': '–ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
                'priority.partial_desc': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫',

                // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
                'animation.title': '–ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –ò–ò –∞–≥–µ–Ω—Ç–∞',
                'animation.info': '–û—Ç–≤–µ—Ç—ã –æ—Ç –ò–ò –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –∏–º–∏—Ç–∏—Ä—É—è –ø—Ä–æ—Ü–µ—Å—Å "–ø–µ—á–∞—Ç–∞–Ω–∏—è". –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ - –≤–µ—Å—å –æ—Ç–≤–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É.',
                'animation.info_title': '–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ:',
                'animation.enable': '–í–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é',
                'animation.enable_desc': '–û—Ç–≤–µ—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, —Å–æ–∑–¥–∞–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∞–Ω–∏—è',
                'animation.speed': '–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (–º—Å)',
                'animation.speed_hint': '–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏ —Ç–µ–∫—Å—Ç–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 40-60 –º—Å',
                'animation.chunk_type': '–¢–∏–ø —Ä–∞–∑–±–∏–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞',
                'animation.chunk_word': '–ü–æ —Å–ª–æ–≤–∞–º',
                'animation.chunk_sentence': '–ü–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º',
                'animation.chunk_line': '–ü–æ —Å—Ç—Ä–æ–∫–∞–º',
                'animation.chunk_hint': '–ö–∞–∫ —Ä–∞–∑–±–∏–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏–∏',

                // –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                'config.edit_title': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'config.edit_subtitle': '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'config.back': '–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É',
                'config.save': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',

                // –í–∫–ª–∞–¥–∫–∏
                'tabs.basic': '–û—Å–Ω–æ–≤–Ω–æ–µ',
                'tabs.texts': '–¢–µ–∫—Å—Ç—ã',
                'tabs.contacts': '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
                'tabs.appearance': '–í–Ω–µ—à–Ω–∏–π –≤–∏–¥',
                'tabs.behavior': '–ü–æ–≤–µ–¥–µ–Ω–∏–µ',
                'tabs.technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ',
                'tabs.preview': '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä',

                // –û—Å–Ω–æ–≤–Ω–æ–µ - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                'config_priority.title': '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'config_priority.info': '–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏", —Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ appearance, behavior –∏ technical —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ - –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.',
                'config_priority.use_individual': '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'config_priority.use_individual_desc': '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –±–∞–∑–æ–≤—ã–º–∏',
                'config_priority.order': '–ü–æ—Ä—è–¥–æ–∫ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ',
                'config_priority.order_hint': '–ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è (1 = –ø–µ—Ä–≤–∞—è)',
                'config_priority.switcher_label': '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ (label)',
                'config_priority.switcher_label_hint': '–ù–∞–∑–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–º–æ–∂–Ω–æ —Å —ç–º–æ–¥–∑–∏)',
                'config_priority.switcher_desc': '–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (description)',
                'config_priority.switcher_desc_hint': '–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è',

                // –Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                'config_lang.title': '–Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'config_lang.default': '–Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'config_lang.supported': '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏',
                'config_lang.supported_hint': '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',

                // –¢–µ–∫—Å—Ç—ã
                'texts.lang_select': '–Ø–∑—ã–∫ —Ç–µ–∫—Å—Ç–æ–≤',
                'texts.main_title': '–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã',
                'texts.header_title': '–ù–∞–∑–≤–∞–Ω–∏–µ –≤ —à–∞–ø–∫–µ',
                'texts.header_subtitle': '–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫',
                'texts.welcome': '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                'texts.quick_buttons': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏',
                'texts.add_button': '–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É',

                // –†–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞ - —Ç—É–ª–±–∞—Ä
                'editor.bold': '–ñ–∏—Ä–Ω—ã–π',
                'editor.italic': '–ö—É—Ä—Å–∏–≤',
                'editor.underline': '–ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π',
                'editor.strikethrough': '–ó–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π',
                'editor.font_size': '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞',
                'editor.font_size_option': '–†–∞–∑–º–µ—Ä',
                'editor.font_small': '–ú–µ–ª–∫–∏–π',
                'editor.font_medium': '–°—Ä–µ–¥–Ω–∏–π',
                'editor.font_large': '–ö—Ä—É–ø–Ω—ã–π',
                'editor.font_xlarge': '–û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–π',
                'editor.text_color': '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞',
                'editor.bg_color': '–¶–≤–µ—Ç —Ñ–æ–Ω–∞',
                'editor.align_left': '–ü–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é',
                'editor.align_center': '–ü–æ —Ü–µ–Ω—Ç—Ä—É',
                'editor.align_right': '–ü–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é',
                'editor.list_bullet': '–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫',
                'editor.list_numbered': '–ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫',
                'editor.insert_link': '–í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É',
                'editor.remove_format': '–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'editor.insert_emoji': '–í—Å—Ç–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏',
                'editor.remove_color': '–û—á–∏—Å—Ç–∏—Ç—å —Ü–≤–µ—Ç',
                'editor.visual_tab': '–í–∏–∑—É–∞–ª—å–Ω—ã–π',
                'editor.html_tab': 'HTML',

                // –ö–æ–Ω—Ç–∞–∫—Ç—ã
                'contacts.title': '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
                'contacts.add': '–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç',
                'contacts.show': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã',
                'contacts.show_desc': '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞',
                'contacts.title_field': '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤',

                // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ - –†–∞–∑–º–µ—Ä—ã
                'appearance.sizes_title': '–†–∞–∑–º–µ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'appearance.position': '–ü–æ–∑–∏—Ü–∏—è —á–∞—Ç–∞',
                'appearance.pos_bottom_right': '–°–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É',
                'appearance.pos_bottom_left': '–°–ª–µ–≤–∞ –≤–Ω–∏–∑—É',
                'appearance.pos_top_right': '–°–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É',
                'appearance.pos_top_left': '–°–ª–µ–≤–∞ –≤–≤–µ—Ä—Ö—É',
                'appearance.width': '–®–∏—Ä–∏–Ω–∞ (px)',
                'appearance.height': '–í—ã—Å–æ—Ç–∞ (px)',
                'appearance.margins': '–û—Ç—Å—Ç—É–ø—ã –æ—Ç –∫—Ä–∞—ë–≤ —ç–∫—Ä–∞–Ω–∞',
                'appearance.margin_top': '–°–≤–µ—Ä—Ö—É',
                'appearance.margin_right': '–°–ø—Ä–∞–≤–∞',
                'appearance.margin_bottom': '–°–Ω–∏–∑—É',
                'appearance.margin_left': '–°–ª–µ–≤–∞',

                // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ - –¶–≤–µ—Ç–∞
                'appearance.colors_title': '–¶–≤–µ—Ç–∞ –∏ —Å—Ç–∏–ª–∏',
                'appearance.header_gradient': '–¶–≤–µ—Ç —à–∞–ø–∫–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç)',
                'appearance.change_gradient': '–ò–∑–º–µ–Ω–∏—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç',
                'appearance.header_text_color': '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ —à–∞–ø–∫–µ',
                'appearance.button_color': '–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫',
                'appearance.button_hover_color': '–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏',
                'appearance.user_message_color': '–¶–≤–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
                'appearance.user_message_text_color': '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö',

                // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ - –®—Ä–∏—Ñ—Ç—ã
                'appearance.fonts_title': '–®—Ä–∏—Ñ—Ç—ã',
                'appearance.font_family': '–°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–æ–≤',
                'appearance.font_system': '–°–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç',
                'appearance.platform': '–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞',
                'appearance.platform_desktop': '–î–µ—Å–∫—Ç–æ–ø',
                'appearance.platform_mobile': '–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
                'appearance.message_size': '–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'appearance.header_size': '–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞',
                'appearance.quick_button_size': '–†–∞–∑–º–µ—Ä –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫',
                'appearance.message_size_mobile': '–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–º–æ–±–∏–ª—å–Ω—ã–π)',
                'appearance.header_size_mobile': '–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–º–æ–±–∏–ª—å–Ω—ã–π)',
                'appearance.quick_button_size_mobile': '–†–∞–∑–º–µ—Ä –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫ (–º–æ–±–∏–ª—å–Ω—ã–π)',

                // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ - –¢–µ–º–∞
                'appearance.theme_title': '–¢–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'appearance.theme_mode': '–†–µ–∂–∏–º —Ç–µ–º—ã',
                'appearance.theme_auto': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è (—Å–ª–µ–¥—É–µ—Ç —Å–∏—Å—Ç–µ–º–µ)',
                'appearance.theme_light': '–í—Å–µ–≥–¥–∞ —Å–≤–µ—Ç–ª–∞—è',
                'appearance.theme_dark': '–í—Å–µ–≥–¥–∞ —Ç—ë–º–Ω–∞—è',
                'appearance.theme_preferred': '–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ö–µ–º–∞',
                'appearance.theme_info': '–≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.',

                // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ - –í–∏–¥–∂–µ—Ç
                'widget.title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞ —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —á–∞—Ç–∞',
                'widget.type': '–¢–∏–ø –≤–∏–¥–∂–µ—Ç–∞',
                'widget.animation_speed': '–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (—Å–µ–∫—É–Ω–¥—ã)',
                'widget.size': '–†–∞–∑–º–µ—Ä –≤–∏–¥–∂–µ—Ç–∞ (px)',
                'widget.primary_color': '–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç',
                'widget.icon': '–ò–∫–æ–Ω–∫–∞ –≤–∏–¥–∂–µ—Ç–∞',
                'widget.positioning': '–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞',
                'widget.position': '–ü–æ–∑–∏—Ü–∏—è',
                'widget.pos_bottom_right': '–í–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞',
                'widget.pos_bottom_left': '–í–Ω–∏–∑—É —Å–ª–µ–≤–∞',
                'widget.pos_top_right': '–í–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞',
                'widget.pos_top_left': '–í–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞',
                'widget.margins': '–û—Ç—Å—Ç—É–ø—ã –≤–∏–¥–∂–µ—Ç–∞ (px)',
                'widget.info': '–í–∏–¥–∂–µ—Ç —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —á–∞—Ç–∞ - —ç—Ç–æ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —á–∞—Ç –∑–∞–∫—Ä—ã—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ 20 —Å—Ç–∏–ª–µ–π –≤–∏–¥–∂–µ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.',

                // –ü–æ–≤–µ–¥–µ–Ω–∏–µ
                'behavior.main_title': '–û—Å–Ω–æ–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ',
                'behavior.auto_open': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ',
                'behavior.auto_open_desc': '–û—Ç–∫—Ä—ã–≤–∞—Ç—å —á–∞—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
                'behavior.auto_open_delay': '–ó–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏—è (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)',
                'behavior.auto_open_delay_hint': '1000 –º—Å = 1 —Å–µ–∫—É–Ω–¥–∞. –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫—Ä—ã—Ç–∏–µ–º —á–∞—Ç–∞',
                'behavior.auto_focus': '–ê–≤—Ç–æ—Ñ–æ–∫—É—Å',
                'behavior.auto_focus_desc': '–°—Ç–∞–≤–∏—Ç—å –∫—É—Ä—Å–æ—Ä –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞',
                'behavior.show_welcome': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ',
                'behavior.show_welcome_desc': '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                'behavior.show_quick_buttons': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏',
                'behavior.show_quick_buttons_desc': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫',

                // –ü–æ–≤–µ–¥–µ–Ω–∏–µ - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                'voice.title': '–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'voice.enable': '–í–∫–ª—é—á–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'voice.enable_desc': '–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'voice.max_duration': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫)',
                'voice.format': '–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤',

                // –ü–æ–≤–µ–¥–µ–Ω–∏–µ - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
                'files.title': '–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤',
                'files.enable': '–†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤',
                'files.enable_desc': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤',
                'files.max_size': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (MB)',
                'files.allowed_types': '–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤',
                'files.type_images': '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG, GIF, WebP)',
                'files.type_pdf': 'PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã',
                'files.type_text': '–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (TXT, CSV)',
                'files.type_office': 'Microsoft Office (DOC, XLS)',

                // –ü–æ–≤–µ–¥–µ–Ω–∏–µ - –ò—Å—Ç–æ—Ä–∏—è
                'history.title': '–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞',
                'history.save': '–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é',
                'history.save_desc': '–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏',
                'history.quick_collapsed': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ —Å–≤–µ—Ä–Ω—É—Ç—ã',
                'history.quick_collapsed_desc': '–°–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',
                'history.paste_images': '–í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π',
                'history.paste_images_desc': '–†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å—Ç–∞–≤–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Ctrl+V',
                'history.show_input': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞',
                'history.show_input_desc': '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'history.popout_mode': '–†–µ–∂–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞',
                'history.popout_mode_desc': '–í–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ',
                'history.lifetime': '–í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (—á–∞—Å–æ–≤)',
                'history.max_messages': '–ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π',

                // –ü–æ–≤–µ–¥–µ–Ω–∏–µ - –†–∞–∑–º–µ—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                'popout.title': '–†–∞–∑–º–µ—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞',
                'popout.width': '–®–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞',
                'popout.height': '–í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞',
                'popout.width_hint': '–®–∏—Ä–∏–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —á–∞—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö',
                'popout.height_hint': '–í—ã—Å–æ—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —á–∞—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö',

                // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'technical.title': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'technical.request_timeout': '–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (–º—Å)',
                'technical.request_timeout_hint': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞',
                'technical.max_message_length': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'technical.max_message_length_hint': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏',
                'technical.api_url': 'URL API –≤–µ–±—Ö—É–∫–∞',
                'technical.api_url_hint': '–ê–¥—Ä–µ—Å –≤–µ–±—Ö—É–∫–∞ n8n –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'technical.voice_endpoint': 'Endpoint –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π',
                'technical.voice_endpoint_hint': 'URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä',
                'technical.voice_download': '–ü—É—Ç—å –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö',
                'technical.voice_download_hint': '–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤',
                'technical.debug_mode': '–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏',

                // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                'preview.title': '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —á–∞—Ç–∞',
                'preview.refresh': 'üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä',

                // –ö–Ω–æ–ø–∫–∏
                'btn.save': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
                'btn.cancel': '–û—Ç–º–µ–Ω–∞',
                'btn.add': '–î–æ–±–∞–≤–∏—Ç—å',
                'btn.delete': '–£–¥–∞–ª–∏—Ç—å',
                'btn.edit': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
                'btn.close': '–ó–∞–∫—Ä—ã—Ç—å',
                'btn.apply': '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',

                // –°–æ–æ–±—â–µ–Ω–∏—è
                'msg.saving': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...',
                'msg.saved': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ',
                'msg.error': '–û—à–∏–±–∫–∞',
                'msg.error_server': '–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º',
                'msg.confirm_delete': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å?',
                'msg.unsaved_changes': '–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö?',

                // –≠–º–æ–¥–∑–∏ –ø–∏–∫–µ—Ä
                'emoji.title': '–í—ã–±—Ä–∞—Ç—å —ç–º–æ–¥–∑–∏',
                'emoji.click_to_insert': '–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —ç–º–æ–¥–∑–∏, —á—Ç–æ–±—ã –≤—Å—Ç–∞–≤–∏—Ç—å',

                // Console messages
                'console.form_changed': 'üìù –§–æ—Ä–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞',
                'console.icon_updated': '‚úÖ –ò–∫–æ–Ω–∫–∞ –≤ switcherLabel –æ–±–Ω–æ–≤–ª–µ–Ω–∞:',
                'console.unsaved_saved': 'üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è:',
                'console.save_failed': '‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:',
                'console.editing_config': '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:',
                'console.editor_not_found': '‚ùå –≠–ª–µ–º–µ–Ω—Ç config-editor –Ω–µ –Ω–∞–π–¥–µ–Ω',
                'console.editor_opened': '‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç:',
                'console.switching_tab': 'üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:',
                'console.selecting_config': 'üéØ –í—ã–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:',
                'console.loading_config': 'üìù –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:',
                'console.loaded_unsaved': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è:',
                'console.checking_chatconfigs': '–ü—Ä–æ–≤–µ—Ä–∫–∞ window.ChatConfigs:',
                'console.keys_in_chatconfigs': '–ö–ª—é—á–∏ –≤ ChatConfigs:',
                'console.trying_variants': '–ü—Ä–æ–±—É–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã:',
                'console.found_via': '‚úÖ –ù–∞–π–¥–µ–Ω–æ —á–µ—Ä–µ–∑ ChatConfigs.',
                'console.chatconfigs_not_exist': '‚ö†Ô∏è window.ChatConfigs –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç',
                'console.trying_window': '–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ window.',
                'console.config_not_found': '‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:',
                'console.available_in_chatconfigs': '–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤ window.ChatConfigs:',
                'console.not_found': '–Ω–µ –Ω–∞–π–¥–µ–Ω',
                'console.available_in_window': '–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤ window:',
                'console.config_data_received': '‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω—ã',
                'console.from_unsaved': ' (–∏–∑ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)',
                'console.config_structure': '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:',
                'console.all_sections_loaded': '‚úÖ –í—Å–µ —Å–µ–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.loading_error': '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:',
                'console.loading_texts': 'üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤',
                'console.language': '–Ø–∑—ã–∫:',
                'console.texts': '–¢–µ–∫—Å—Ç—ã:',
                'console.loaded_header_title': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω headerTitle:',
                'console.loaded_header_subtitle': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω headerSubtitle:',
                'console.loaded_welcome': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ',
                'console.texts_loaded': '‚úÖ –¢–µ–∫—Å—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.loading_quick_buttons': '‚ö° –ó–∞–≥—Ä—É–∑–∫–∞ –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫',
                'console.received_config': '–ü–æ–ª—É—á–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:',
                'console.current_lang': '–¢–µ–∫—É—â–∏–π —è–∑—ã–∫:',
                'console.quickbuttons_not_array': '‚ö†Ô∏è quickButtons –Ω–µ –º–∞—Å—Å–∏–≤:',
                'console.found_buttons': '–ù–∞–π–¥–µ–Ω–æ –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫:',
                'console.quick_buttons': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏:',
                'console.buttons_not_found': '‚ö†Ô∏è –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è —è–∑—ã–∫–∞:',
                'console.try_russian': '–ü–æ–ø—Ä–æ–±—É–µ–º —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫...',
                'console.buttons_russian': '–ö–Ω–æ–ø–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º:',
                'console.loaded_buttons_texts': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–Ω–æ–ø–æ–∫ –≤ –≤–∫–ª–∞–¥–∫—É –¢–µ–∫—Å—Ç—ã:',
                'console.loaded_buttons_main': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–Ω–æ–ø–æ–∫ –≤ –≤–∫–ª–∞–¥–∫—É –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏:',
                'console.loading_contacts': 'üìû –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤',
                'console.found_contacts': '–ù–∞–π–¥–µ–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:',
                'console.contacts': '–ö–æ–Ω—Ç–∞–∫—Ç—ã:',
                'console.contacts_container_not_found': '‚ö†Ô∏è –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω',
                'console.contacts_enabled': '–ö–æ–Ω—Ç–∞–∫—Ç—ã –≤–∫–ª—é—á–µ–Ω—ã:',
                'console.contacts_title': '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:',
                'console.contacts_loaded': '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:',
                'console.loading_appearance': 'üé® –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞',
                'console.position': '‚úÖ –ü–æ–∑–∏—Ü–∏—è:',
                'console.dimensions': '‚úÖ –†–∞–∑–º–µ—Ä—ã:',
                'console.margins': '‚úÖ –û—Ç—Å—Ç—É–ø—ã:',
                'console.compact_mode': '‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º:',
                'console.loading_colors': 'üé® –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–≤–µ—Ç–æ–≤:',
                'console.loading_fonts': 'üî§ –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤:',
                'console.theme_loaded': '‚úÖ –¢–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:',
                'console.loading_widget': 'üéØ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∏–¥–∂–µ—Ç–∞:',
                'console.widget_loaded': '‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.loading_widget_pos': 'üìç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞:',
                'console.widget_pos_loaded': '‚úÖ –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–æ',
                'console.appearance_loaded': '‚úÖ –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∑–∞–≥—Ä—É–∂–µ–Ω',
                'console.loading_behavior': '‚öôÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–≤–µ–¥–µ–Ω–∏—è',
                'console.behavior_settings': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è:',
                'console.file_types_loaded': '‚úÖ –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.behavior_loaded': '‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.loading_technical': 'üîß –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫',
                'console.timeout': '‚úÖ –¢–∞–π–º–∞—É—Ç:',
                'console.max_length': '‚úÖ –ú–∞–∫—Å. –¥–ª–∏–Ω–∞:',
                'console.technical_loaded': '‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.loading_additional': 'üîß –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫',
                'console.loading_supported_langs': 'üåç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤...',
                'console.found_lang_buttons': '–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–æ–≤:',
                'console.supported_langs_config': '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:',
                'console.lang_enabled': '‚úÖ –Ø–∑—ã–∫ {lang} –≤–∫–ª—é—á–µ–Ω',
                'console.lang_button_not_found': '‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ –¥–ª—è —è–∑—ã–∫–∞ {lang} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
                'console.supported_langs_loaded': '‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:',
                'console.supported_langs_not_found': '‚ö†Ô∏è supportedLanguages –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º',
                'console.all_langs_disabled': '‚úÖ –í—Å–µ —è–∑—ã–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã (supportedLanguages –Ω–µ –∑–∞–¥–∞–Ω)',
                'console.additional_loaded': '‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                'console.color_selected': '‚úÖ –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Ü–≤–µ—Ç–∞:',
                'console.color_applied': 'üé® –¶–≤–µ—Ç –ø—Ä–∏–º–µ–Ω—ë–Ω:',
                'console.to_element': '–∫ —ç–ª–µ–º–µ–Ω—Ç—É:',
                'console.color_applied_first': 'üé® –¶–≤–µ—Ç –ø—Ä–∏–º–µ–Ω—ë–Ω –∫ –ø–µ—Ä–≤–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É:',

                // Save indicator messages
                'save.unsaved_changes': '–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                'save.config_not_found': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è {id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
                'save.global_saved': '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!',
                'save.save_error': '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è',
                'save.server_error': '–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º',
                'save.saving': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...',
                'save.config_saved': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!',
                'save.critical_error': '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞!',
                'save.saving_base': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫...',
                'save.base_saved': '–ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!',
                'save.saving_config': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...',
                'save.config_created': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è "{name}" —Å–æ–∑–¥–∞–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!',
                'save.server_save_error': '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ',
                'save.saving_status': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞...',
                'save.config_enabled': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞',
                'save.config_disabled': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∞',
                'save.status_error': '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞',
                'save.deleting_config': '–£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...',
                'save.config_deleted': '‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞!',
                'save.delete_error': '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è',
                'save.preparing_export': '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞...',
                'save.config_downloaded': '–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∫–∞—á–∞–Ω–∞! ‚úÖ',
                'save.preparing_export_current': '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏...',
                'save.select_config_first': '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
                'save.config_exported': '–ü–æ–ª–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω! ‚úÖ',
                'save.export_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: {error}',
                'save.export_settings_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫',
                'save.importing_config': '–ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...',
                'save.config_imported': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞...',
                'save.creating_backup': '–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏...',
                'save.backup_created': '–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞!',
                'save.backup_create_error': '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏',
                'save.restoring': '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...',
                'save.config_restored_reloading': '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞...',
                'save.restore_error': '–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è',
                'save.backup_downloading': '–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è...',
                'save.deleting': '–£–¥–∞–ª–µ–Ω–∏–µ...',
                'save.backup_deleted': '–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —É–¥–∞–ª–µ–Ω–∞',
                'save.backup_delete_error': '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è',
                'save.loading_config_error': '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'save.chatconfigs_not_loaded': 'ChatConfigs –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω',
                'save.load_file_error': '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'save.saving_global': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫...',
                'save.global_settings_saved': '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!',

                // Alert/confirm messages
                'alert.enter_config_id': '‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ ID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!',
                'alert.enter_config_name': '‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!',
                'alert.id_invalid': '‚ö†Ô∏è ID –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è!',
                'alert.id_exists': '‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ç–∞–∫–∏–º ID —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!',
                'alert.creation_error': '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: {error}',
                'confirm.delete_config': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é "{id}"?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!',
                'confirm.import_file': '–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞?\n\n–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é, –∞ –∑–∞—Ç–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.',
                'confirm.restore_backup': '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —ç—Ç–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏?\n\n–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é.',
                'confirm.delete_backup': '–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é?\n\n{name}',
                'confirm.restore_from_backup': '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –±—ç–∫–∞–ø–∞?\n\n{file}',
                'alert.config_restored': '‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!\n\n–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.',
                'alert.restore_error': '‚ùå –û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: {error}',
                'alert.no_backups': '–ë—ç–∫–∞–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',

                // Placeholder texts
                'placeholder.config_description': '–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'placeholder.enter_message': '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
                'placeholder.emoji_search': '–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏...',
                'placeholder.button_text': '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                'placeholder.button_message': '–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏',
                'placeholder.contact_name': '–ù–∞–∑–≤–∞–Ω–∏–µ',
                'placeholder.my_config': '–ú–æ—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è',
                'placeholder.top': '–°–≤–µ—Ä—Ö—É',
                'placeholder.right': '–°–ø—Ä–∞–≤–∞',
                'placeholder.bottom': '–°–Ω–∏–∑—É',
                'placeholder.left': '–°–ª–µ–≤–∞',

                // Dynamic content
                'content.quick_buttons_not_configured': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã',
                'content.contacts_not_configured': '–ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è.',
                'content.select_color': '–í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞',
                'content.choose_color': '–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç',
                'content.quick_select': '–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä',
                'content.move': '–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å',
                'content.phone': '–¢–µ–ª–µ—Ñ–æ–Ω',
                'content.editing': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:',

                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
                'configs.title': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏',
                'configs.subtitle': '–í–∫–ª—é—á–∞–π—Ç–µ, –æ—Ç–∫–ª—é—á–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–∞—Ç–∞',
                'configs.create_new': '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é',
                'configs.import': '–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',

                // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'base.title': '–ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'base.subtitle': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π',
                'base.save_changes': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                'base.tab_behavior': '–ü–æ–≤–µ–¥–µ–Ω–∏–µ',
                'base.tab_appearance': '–í–Ω–µ—à–Ω–∏–π –≤–∏–¥',
                'base.tab_technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ',
                'base.tab_monitoring': '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥',

                // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –ü–æ–≤–µ–¥–µ–Ω–∏–µ
                'base.behavior.main_title': '–û—Å–Ω–æ–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ',
                'base.behavior.auto_open': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ',
                'base.behavior.auto_open_desc': '–û—Ç–∫—Ä—ã–≤–∞—Ç—å —á–∞—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
                'base.behavior.auto_open_delay': '–ó–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏—è (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)',
                'base.behavior.auto_open_delay_hint': '1000 –º—Å = 1 —Å–µ–∫—É–Ω–¥–∞',
                'base.behavior.auto_focus': '–ê–≤—Ç–æ—Ñ–æ–∫—É—Å',
                'base.behavior.auto_focus_desc': '–°—Ç–∞–≤–∏—Ç—å –∫—É—Ä—Å–æ—Ä –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞',
                'base.behavior.show_welcome': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ',
                'base.behavior.show_welcome_desc': '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                'base.behavior.show_quick_buttons': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏',
                'base.behavior.show_quick_buttons_desc': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫',
                'base.behavior.quick_buttons_collapsed': '–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ —Å–≤–µ—Ä–Ω—É—Ç—ã',
                'base.behavior.quick_buttons_collapsed_desc': '–°–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é',
                'base.behavior.voice_files_title': '–ì–æ–ª–æ—Å–æ–≤—ã–µ –∏ —Ñ–∞–π–ª—ã',
                'base.behavior.enable_voice': '–í–∫–ª—é—á–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'base.behavior.enable_voice_desc': '–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'base.behavior.enable_file_upload': '–†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤',
                'base.behavior.enable_file_upload_desc': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤',
                'base.behavior.paste_images': '–í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Ctrl+V)',
                'base.behavior.paste_images_desc': '–†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å—Ç–∞–≤–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞',
                'base.behavior.show_input_area': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞',
                'base.behavior.show_input_area_desc': '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'base.behavior.history_popout_title': '–ò—Å—Ç–æ—Ä–∏—è –∏ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ',
                'base.behavior.save_history': '–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é',
                'base.behavior.save_history_desc': '–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏',
                'base.behavior.history_lifetime': '–í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ (—á–∞—Å–æ–≤)',
                'base.behavior.max_history_messages': '–ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏',
                'base.behavior.enable_popout_mode': '–†–µ–∂–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞',
                'base.behavior.enable_popout_mode_desc': '–í–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ',
                'base.behavior.popout_width': '–®–∏—Ä–∏–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (px)',
                'base.behavior.popout_height': '–í—ã—Å–æ—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (px)',

                // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –í–Ω–µ—à–Ω–∏–π –≤–∏–¥
                'base.appearance.sizes_title': '–†–∞–∑–º–µ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'base.appearance.position': '–ü–æ–∑–∏—Ü–∏—è —á–∞—Ç–∞',
                'base.appearance.pos_bottom_right': '–°–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É',
                'base.appearance.pos_bottom_left': '–°–ª–µ–≤–∞ –≤–Ω–∏–∑—É',
                'base.appearance.pos_top_right': '–°–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É',
                'base.appearance.pos_top_left': '–°–ª–µ–≤–∞ –≤–≤–µ—Ä—Ö—É',
                'base.appearance.width': '–®–∏—Ä–∏–Ω–∞ —á–∞—Ç–∞ (px)',
                'base.appearance.height': '–í—ã—Å–æ—Ç–∞ —á–∞—Ç–∞ (px)',
                'base.appearance.margins': '–û—Ç—Å—Ç—É–ø—ã –æ—Ç –∫—Ä–∞—ë–≤ —ç–∫—Ä–∞–Ω–∞ (px)',
                'base.appearance.margin_top': '–°–≤–µ—Ä—Ö—É',
                'base.appearance.margin_right': '–°–ø—Ä–∞–≤–∞',
                'base.appearance.margin_bottom': '–°–Ω–∏–∑—É',
                'base.appearance.margin_left': '–°–ª–µ–≤–∞',
                'base.appearance.theme_title': '–¢–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'base.appearance.theme_mode': '–†–µ–∂–∏–º —Ç–µ–º—ã',
                'base.appearance.theme_auto': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è (—Å–ª–µ–¥—É–µ—Ç —Å–∏—Å—Ç–µ–º–µ)',
                'base.appearance.theme_light': '–í—Å–µ–≥–¥–∞ —Å–≤–µ—Ç–ª–∞—è',
                'base.appearance.theme_dark': '–í—Å–µ–≥–¥–∞ —Ç—ë–º–Ω–∞—è',
                'base.appearance.theme_preferred': '–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ö–µ–º–∞',
                'base.appearance.theme_preferred_auto': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏',
                'base.appearance.theme_preferred_light': '–°–≤–µ—Ç–ª–∞—è',
                'base.appearance.theme_preferred_dark': '–¢—ë–º–Ω–∞—è',
                'base.appearance.theme_info': '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.',
                'base.appearance.widget_title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞ —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —á–∞—Ç–∞',
                'base.appearance.widget_type': '–¢–∏–ø –≤–∏–¥–∂–µ—Ç–∞',
                'base.appearance.widget_animation_speed': '–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (—Å–µ–∫—É–Ω–¥—ã)',
                'base.appearance.widget_size': '–†–∞–∑–º–µ—Ä –≤–∏–¥–∂–µ—Ç–∞ (px)',
                'base.appearance.widget_primary_color': '–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç',
                'base.appearance.widget_icon': '–ò–∫–æ–Ω–∫–∞ –≤–∏–¥–∂–µ—Ç–∞',
                'base.appearance.widget_positioning': '–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞',
                'base.appearance.widget_position': '–ü–æ–∑–∏—Ü–∏—è',
                'base.appearance.widget_pos_bottom_right': '–í–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞',
                'base.appearance.widget_pos_bottom_left': '–í–Ω–∏–∑—É —Å–ª–µ–≤–∞',
                'base.appearance.widget_pos_top_right': '–í–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞',
                'base.appearance.widget_pos_top_left': '–í–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞',
                'base.appearance.widget_margins': '–û—Ç—Å—Ç—É–ø—ã –≤–∏–¥–∂–µ—Ç–∞ (px)',
                'base.appearance.widget_margin_top': '–°–≤–µ—Ä—Ö—É',
                'base.appearance.widget_margin_right': '–°–ø—Ä–∞–≤–∞',
                'base.appearance.widget_margin_bottom': '–°–Ω–∏–∑—É',
                'base.appearance.widget_margin_left': '–°–ª–µ–≤–∞',
                'base.appearance.widget_info': '–í–∏–¥–∂–µ—Ç —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —á–∞—Ç–∞ - —ç—Ç–æ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —á–∞—Ç –∑–∞–∫—Ä—ã—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ 20 —Å—Ç–∏–ª–µ–π –≤–∏–¥–∂–µ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.',
                'base.appearance.colors_title': '–¶–≤–µ—Ç–∞',
                'base.appearance.header_gradient': '–¶–≤–µ—Ç —à–∞–ø–∫–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç)',
                'base.appearance.change_gradient': '–ò–∑–º–µ–Ω–∏—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç',
                'base.appearance.header_text_color': '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ —à–∞–ø–∫–µ',
                'base.appearance.button_color': '–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫',
                'base.appearance.button_hover_color': '–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏',
                'base.appearance.user_message_color': '–¶–≤–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
                'base.appearance.user_message_text_color': '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö',
                'base.appearance.fonts_title': '–®—Ä–∏—Ñ—Ç—ã',
                'base.appearance.font_family': '–°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–æ–≤',
                'base.appearance.font_system': '–°–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç',
                'base.appearance.font_platform': '–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞',
                'base.appearance.font_platform_desktop': '–î–µ—Å–∫—Ç–æ–ø',
                'base.appearance.font_platform_mobile': '–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
                'base.appearance.font_message_size': '–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'base.appearance.font_header_size': '–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞',
                'base.appearance.font_quick_button_size': '–†–∞–∑–º–µ—Ä –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫',
                'base.appearance.font_message_size_mobile': '–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–º–æ–±–∏–ª—å–Ω—ã–π)',
                'base.appearance.font_header_size_mobile': '–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–º–æ–±–∏–ª—å–Ω—ã–π)',
                'base.appearance.font_quick_button_size_mobile': '–†–∞–∑–º–µ—Ä –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫ (–º–æ–±–∏–ª—å–Ω—ã–π)',

                // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
                'base.technical.params_title': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
                'base.technical.request_timeout': '–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (–º—Å)',
                'base.technical.request_timeout_hint': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞',
                'base.technical.max_message_length': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'base.technical.max_message_length_hint': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤',
                'base.technical.debug_mode': '–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏',
                'base.technical.debug_mode_desc': '–í—ã–≤–æ–¥–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å',
                'base.technical.voice_title': '–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'base.technical.voice_max_duration': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫)',
                'base.technical.voice_format': '–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤',
                'base.technical.voice_server_storage': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä',
                'base.technical.voice_server_storage_desc': '–ó–∞–≥—Ä—É–∂–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä',
                'base.technical.voice_upload_url': 'URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö',
                'base.technical.voice_download_path': '–ü—É—Ç—å –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö',
                'base.technical.voice_file_prefix': '–ü—Ä–µ—Ñ–∏–∫—Å –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞',
                'base.technical.voice_max_size': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (MB)',
                'base.technical.voice_local_fallback': '–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ',
                'base.technical.voice_local_fallback_desc': '–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω',
                'base.technical.files_title': '–§–∞–π–ª—ã',
                'base.technical.files_max_size': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (MB)',
                'base.technical.files_allowed_types': '–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤',
                'base.technical.files_type_images': '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG, GIF, WebP, BMP)',
                'base.technical.files_type_pdf': 'PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã',
                'base.technical.files_type_text': '–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (TXT, CSV)',
                'base.technical.files_type_office': 'Microsoft Office (DOC, XLS)',

                // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
                'base.monitoring.title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞',
                'base.monitoring.info': '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —á–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ –≤–∞—à n8n webhook –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.',
                'base.monitoring.enabled': '–í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥',
                'base.monitoring.enabled_desc': '–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Å–µ—Å—Å–∏—è—Ö —á–∞—Ç–∞',
                'base.monitoring.url': 'URL –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (n8n webhook)',
                'base.monitoring.url_hint': 'Webhook –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Å–æ–±—ã—Ç–∏–π —á–∞—Ç–∞',
                'base.monitoring.warning_title': '–í–∞–∂–Ω–æ:',
                'base.monitoring.warning_text': '–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à n8n webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏—ë–º POST-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.',

                // –ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
                'branding.title': '–ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±-—á–∞—Ç–∞',
                'branding.subtitle': '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–æ—Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –≤–µ–±-—á–∞—Ç–µ',
                'branding.save': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'branding.main_settings': '–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'branding.enabled': '–í–∫–ª—é—á–∏—Ç—å –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ',
                'branding.enabled_desc': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —á–∞—Ç–µ',
                'branding.logo_type': '–¢–∏–ø –ª–æ–≥–æ—Ç–∏–ø–∞',
                'branding.logo_type_svg': 'SVG –∫–æ–¥',
                'branding.logo_type_icon': '–ò–∫–æ–Ω–∫–∞ (emoji)',
                'branding.logo_type_image': 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                'branding.logo_type_hint': '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø',
                'branding.logo_svg': 'SVG –∫–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–∞',
                'branding.logo_svg_hint': '–í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω—ã–π SVG –∫–æ–¥ (–≤–∫–ª—é—á–∞—è —Ç–µ–≥–∏ &lt;svg&gt;...&lt;/svg&gt;). –ü—Ä–∏–º–µ—Ä: SVG –ª–æ–≥–æ—Ç–∏–ø "–ù–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å" –∏–∑ logo.html',
                'branding.logo_icon': '–ò–∫–æ–Ω–∫–∞ (emoji)',
                'branding.logo_icon_hint': '–í–≤–µ–¥–∏—Ç–µ emoji –∏–∫–æ–Ω–∫—É',
                'branding.logo_image': 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                'branding.logo_image_hint': '–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–∞',
                'branding.company_name': '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏',
                'branding.company_name_hint': '–ë—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä—è–¥–æ–º —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º',
                'branding.company_url': '–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç –∫–æ–º–ø–∞–Ω–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
                'branding.company_url_hint': '–ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ —Å—Ç–∞–Ω–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π',
                'branding.powered_by': '–¢–µ–∫—Å—Ç "Powered by" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
                'branding.powered_by_hint': '–¢–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å',
                'branding.sizes': '–†–∞–∑–º–µ—Ä—ã',
                'branding.logo_width': '–®–∏—Ä–∏–Ω–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ (px)',
                'branding.logo_height': '–í—ã—Å–æ—Ç–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ (px)',
                'branding.font_size': '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px)',
                'branding.preview': '–ü—Ä–µ–≤—å—é',
                'branding.preview_light': '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞',
                'branding.preview_dark': '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞',
                'branding.disabled_preview': '–ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ',

                // –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç
                'export.title': '–≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'export.subtitle': '–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏',
                'export.export_title': '–≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'export.export_desc': '–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ JavaScript —Ñ–∞–π–ª –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ',
                'export.what_to_export': '–ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',
                'export.global_settings': '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'export.all_configs': '–í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'export.interface_texts': '–ë–∞–∑–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                'export.minify_code': '–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥',
                'export.btn_download': 'üì• –°–∫–∞—á–∞—Ç—å webchat-config.js',
                'export.btn_export_full': 'üì§ –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏',
                'export.btn_copy': 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä',
                'export.export_info': '<strong>–°–∫–∞—á–∞—Ç—å webchat-config.js</strong> - —Å–∫–∞—á–∏–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∫ –µ—Å—Ç—å.<br><strong>–≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</strong> - —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ñ–∞–π–ª webchat-config.js —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏ –∫–æ–¥–æ–º, –Ω–æ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ —Ñ–æ—Ä–º—ã (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ). –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.',
                'export.import_title': '–ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'export.import_desc': '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
                'export.import_warning': '–ò–º–ø–æ—Ä—Ç –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é.',
                'export.btn_import': 'üì§ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',
                'export.backups_title': '–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏',
                'export.backups_desc': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
                'export.btn_create_backup': 'üíæ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é',
                'export.copied': '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!',
                'export.copy_error': '–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞',

                // –°–æ–æ–±—â–µ–Ω–∏—è
                'msg.saving': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...',

                // Emoji Picker
                'emoji.title': '–í—ã–±—Ä–∞—Ç—å —ç–º–æ–¥–∑–∏',
                'emoji.click_to_insert': '–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —ç–º–æ–¥–∑–∏, —á—Ç–æ–±—ã –≤—Å—Ç–∞–≤–∏—Ç—å',

                // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
                'placeholder.emoji_search': '–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏...',

                // –ö–Ω–æ–ø–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
                'btn.on': '–í–∫–ª',
                'btn.off': '–í—ã–∫–ª',

                // –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                'tooltip.delete_config': '–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é',

                // –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
                'configs.add_custom': '–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é',

                // –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
                'backup.from': '–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –æ—Ç',
                'backup.no_backups': '–ù–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π',
                'backup.load_error': '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π',
                'backup.restore': '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å',
                'backup.download': '–°–∫–∞—á–∞—Ç—å',
                'backup.delete': '–£–¥–∞–ª–∏—Ç—å',

                // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                'modal.create_config_title': '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é',
                'modal.config_id_label': 'ID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ª–∞—Ç–∏–Ω–∏—Ü–µ–π, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)',
                'modal.config_id_placeholder': 'myCustomConfig',
                'modal.config_id_hint': '–ù–∞–ø—Ä–∏–º–µ—Ä: customerSupportConfig, salesConfig',
                'modal.config_name_label': '–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)',
                'modal.config_name_placeholder': '–ú–æ—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è',
                'modal.config_icon_label': '–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏)',
                'modal.config_icon_hint': '–û–¥–∏–Ω —ç–º–æ–¥–∑–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                'modal.config_description_label': '–û–ø–∏—Å–∞–Ω–∏–µ',
                'modal.config_order_label': '–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                'modal.config_order_hint': '–ß–µ–º –º–µ–Ω—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –≤—ã—à–µ –≤ —Å–ø–∏—Å–∫–µ',

                // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ - –†–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
                'modal.gradient_editor_title': '–†–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞',
                'modal.gradient_editor_base_title': '–†–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ (–±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)',
                'modal.gradient_start_color': '–ù–∞—á–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç',
                'modal.gradient_end_color': '–ö–æ–Ω–µ—á–Ω—ã–π —Ü–≤–µ—Ç',
                'modal.gradient_direction': '–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ',
                'modal.gradient_direction_diagonal': '–î–∏–∞–≥–æ–Ω–∞–ª—å (‚Üò)',
                'modal.gradient_direction_left_right': '–°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (‚Üí)',
                'modal.gradient_direction_top_bottom': '–°–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ (‚Üì)',
                'modal.gradient_direction_bottom_top': '–°–Ω–∏–∑—É –≤–≤–µ—Ä—Ö (‚Üë)',
                'modal.gradient_preview': '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä',

                // GDPR - –ù–∞–≤–∏–≥–∞—Ü–∏—è
                'nav.gdpr': 'GDPR / –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å',

                // GDPR - –ó–∞–≥–æ–ª–æ–≤–∫–∏
                'gdpr.title': 'üîí GDPR –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏',
                'gdpr.subtitle': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º GDPR –∏ –∑–∞—â–∏—Ç–æ–π –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',

                // GDPR - –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                'gdpr.main_settings': '–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                'gdpr.enable_gdpr': '–í–∫–ª—é—á–∏—Ç—å GDPR —Ä–µ–∂–∏–º',
                'gdpr.enable_gdpr_hint': '–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.mode': '–†–µ–∂–∏–º GDPR',
                'gdpr.mode_strict': '–°—Ç—Ä–æ–≥–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ï–°)',
                'gdpr.mode_standard': '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
                'gdpr.mode_minimal': '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π',
                'gdpr.privacy_url': 'URL –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
                'gdpr.terms_url': 'URL –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è',
                'gdpr.cookie_url': 'URL –ø–æ–ª–∏—Ç–∏–∫–∏ cookies',

                // GDPR - –ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è
                'gdpr.consent_banner': '–ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.banner_enabled': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.banner_block': '–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.banner_position': '–ü–æ–∑–∏—Ü–∏—è –±–∞–Ω–Ω–µ—Ä–∞',
                'gdpr.position_bottom': '–°–Ω–∏–∑—É',
                'gdpr.position_top': '–°–≤–µ—Ä—Ö—É',
                'gdpr.position_center': '–ü–æ —Ü–µ–Ω—Ç—Ä—É',
                'gdpr.expire_days': '–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ–≥–ª–∞—Å–∏—è (–¥–Ω–µ–π)',
                'gdpr.show_decline': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"',
                'gdpr.show_privacy_link': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
                'gdpr.show_cookie_link': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É Cookies',
                'gdpr.show_cookie_link_hint': '–°—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω URL –ø–æ–ª–∏—Ç–∏–∫–∏ cookies –≤—ã—à–µ',
                'gdpr.show_terms_link': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ',
                'gdpr.show_terms_link_hint': '–°—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω URL —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –≤—ã—à–µ',
                'gdpr.show_monitoring_consent': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –¥–∏–∞–ª–æ–≥–æ–≤',
                'gdpr.show_monitoring_consent_hint': '–¢–µ–∫—Å—Ç –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á—ë–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö',

                // GDPR - –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
                'gdpr.chat_history': '–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞',
                'gdpr.chat_history_info': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç—ã –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
                'gdpr.encrypt_local': '–®–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ',
                'gdpr.encrypt_local_hint': '–í–∫–ª—é—á–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –≤ localStorage. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.',

                // GDPR - Pre-Chat —Ñ–æ—Ä–º–∞
                'gdpr.prechat_form': 'Pre-Chat —Ñ–æ—Ä–º–∞',
                'gdpr.prechat_info': 'Pre-Chat —Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω) –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —á–∞—Ç–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–∞.',
                'gdpr.prechat_enabled': '–í–∫–ª—é—á–∏—Ç—å Pre-Chat —Ñ–æ—Ä–º—É',
                'gdpr.prechat_enabled_hint': '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–∞. –í–∫–ª—é—á–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
                'gdpr.prechat_after_consent': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.prechat_gdpr_checkbox': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á–µ–∫–±–æ–∫—Å —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.prechat_display_mode': '–†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã',
                'gdpr.prechat_mode_modal': '–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (popup)',
                'gdpr.prechat_mode_inline': '–í–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞ (inline)',
                'gdpr.prechat_display_mode_hint': 'Modal - –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –ø–æ–≤–µ—Ä—Ö —á–∞—Ç–∞, Inline - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π',
                'gdpr.prechat_fields_title': '–ü–æ–ª—è —Ñ–æ—Ä–º—ã',
                'gdpr.prechat_fields_hint': '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–∞–∫–∏–µ –ø–æ–ª—è –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
                'gdpr.field_name': '–ò–º—è',
                'gdpr.field_email': 'Email',
                'gdpr.field_phone': '–¢–µ–ª–µ—Ñ–æ–Ω',
                'gdpr.field_company': '–ö–æ–º–ø–∞–Ω–∏—è',
                'gdpr.field_enabled': '–í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ',
                'gdpr.field_required': '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ',

                // GDPR - AI Disclosure
                'gdpr.ai_disclosure': 'AI Disclosure',
                'gdpr.ai_disclosure_info': '–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ç–æ–º, —á—Ç–æ –æ–Ω –æ–±—â–∞–µ—Ç—Å—è —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ EU AI Act –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏.',
                'gdpr.ai_enabled': '–í–∫–ª—é—á–∏—Ç—å AI Disclosure',
                'gdpr.ai_show_in_welcome': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏',
                'gdpr.ai_show_in_welcome_hint': '–¢–µ–∫—Å—Ç –æ–± AI –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω–µ—Ü –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è',
                'gdpr.ai_show_in_consent': '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º–µ —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.ai_show_in_consent_hint': '–¢–µ–∫—Å—Ç –æ–± AI –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ –±–∞–Ω–Ω–µ—Ä–µ —Å–æ–≥–ª–∞—Å–∏—è GDPR',

                // GDPR - –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
                'gdpr.privacy_controls': '–ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏',
                'gdpr.privacy_enabled': '–í–∫–ª—é—á–∏—Ç—å –º–µ–Ω—é –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏',
                'gdpr.privacy_enabled_hint': '–ö–Ω–æ–ø–∫–∞ üîí –ø–æ—è–≤–∏—Ç—Å—è –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞',
                'gdpr.available_options': '–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
                'gdpr.opt_view_data': '–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.opt_edit_data': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.opt_export_data': '–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (Data Portability)',
                'gdpr.opt_delete_history': '–£–¥–∞–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞',
                'gdpr.opt_revoke_consent': '–û—Ç–∑—ã–≤ —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.opt_delete_all': '–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (Right to Erasure)',

                // GDPR - Webhooks
                'gdpr.webhooks': 'Webhooks –¥–ª—è n8n',
                'gdpr.webhooks_info': 'Webhooks –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å GDPR —Ñ—É–Ω–∫—Ü–∏–∏ —Å n8n –∏ PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–≥–ª–∞—Å–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö.',
                'gdpr.webhook_consent': 'Webhook —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.webhook_consent_hint': '–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.webhook_prechat': 'Webhook Pre-Chat —Ñ–æ—Ä–º—ã',
                'gdpr.webhook_prechat_hint': '–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ Pre-Chat —Ñ–æ—Ä–º—ã',
                'gdpr.webhook_data_access': 'Webhook –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.webhook_data_access_hint': '–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ',
                'gdpr.webhook_data_export': 'Webhook —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.webhook_data_delete': 'Webhook —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö',
                'gdpr.webhook_consent_revoke': 'Webhook –æ—Ç–∑—ã–≤–∞ —Å–æ–≥–ª–∞—Å–∏—è',
                'gdpr.webhook_consent_revoke_hint': '–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∑—ã–≤–∞–µ—Ç —Å–≤–æ—ë —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö',

                // GDPR - –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
                'gdpr.geolocation': '–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
                'gdpr.geolocation_info': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–µ–∂–∏–º GDPR. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ï–° –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—ë–Ω —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º.',
                'gdpr.geo_enabled': '–í–∫–ª—é—á–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏',
                'gdpr.geo_enabled_hint': '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å ipapi.co –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è',
                'gdpr.detection_mode': '–†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è GDPR',
                'gdpr.mode_manual': '–†—É—á–Ω–æ–π (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–∂–∏–º–∞ –≤—ã—à–µ)',
                'gdpr.mode_auto': '–ê–≤—Ç–æ (–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ —Å—Ç—Ä–∞–Ω–µ)',
                'gdpr.mode_hybrid': '–ì–∏–±—Ä–∏–¥ (–∞–≤—Ç–æ –¥–ª—è –ï–°, —Ä—É—á–Ω–æ–π –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö)',
                'gdpr.detection_mode_hint': 'Manual - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º, Auto - –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ —Å—Ç—Ä–∞–Ω–µ, Hybrid - strict –¥–ª—è –ï–°, —Ä—É—á–Ω–æ–π –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö',
                'gdpr.strict_for_eu': '–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º –¥–ª—è —Å—Ç—Ä–∞–Ω –ï–°',
                'gdpr.strict_for_eu_hint': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å strict —Ä–µ–∂–∏–º –¥–ª—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –∏–∑ –ï–≤—Ä–æ–ø–µ–π—Å–∫–æ–≥–æ –°–æ—é–∑–∞',

                // GDPR - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
                'gdpr.compliance_info': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏',
                'gdpr.compliance_text': '–≠—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ GDPR, CCPA –∏ –¥—Ä—É–≥–∏–º –∑–∞–∫–æ–Ω–∞–º –æ –∑–∞—â–∏—Ç–µ –¥–∞–Ω–Ω—ã—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.',

                // GDPR - –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                'gdpr.save_changes': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                'gdpr.saving': '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ GDPR...',
                'gdpr.saved': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GDPR —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!',
                'gdpr.save_error': '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ GDPR',

                // GDPR - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                'gdpr.notification.setting_updated': '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GDPR –æ–±–Ω–æ–≤–ª–µ–Ω–∞',
                'gdpr.notification.settings_saved': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GDPR —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!',
                'gdpr.notification.enabled': 'GDPR —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω',
                'gdpr.notification.disabled': 'GDPR —Ä–µ–∂–∏–º –æ—Ç–∫–ª—é—á–µ–Ω',
                'gdpr.notification.prechat_enabled': 'Pre-Chat —Ñ–æ—Ä–º–∞ –≤–∫–ª—é—á–µ–Ω–∞',
                'gdpr.notification.prechat_disabled': 'Pre-Chat —Ñ–æ—Ä–º–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞',
                'gdpr.notification.webhook_updated': 'Webhook URL –æ–±–Ω–æ–≤–ª–µ–Ω',
                'gdpr.notification.invalid_url': '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL –∞–¥—Ä–µ—Å'
            },
            en: {
                // General
                'app.subtitle': 'Visual Configuration Editor',

                // Navigation
                'nav.global_settings': 'GLOBAL SETTINGS',
                'nav.main_params': 'Main Parameters',
                'nav.configurations': 'Configurations',
                'nav.all_configs': 'All Configurations',
                'nav.additional': 'Additional',
                'nav.base_settings': 'Base Settings',
                'nav.branding': 'Branding',
                'nav.export_import': 'Export/Import',

                // Global Settings
                'global.title': 'Global Settings',
                'global.subtitle': 'Main web-chat system parameters',
                'global.save_changes': 'Save Changes',

                // API Settings
                'api.title': 'API Settings',
                'api.key_label': 'API Key',
                'api.key_placeholder': 'Enter API key for webhook protection',
                'api.key_hint': 'Used to protect all system webhooks',

                // Config Switcher
                'config_switcher.title': 'Configuration Switcher',
                'config_switcher.show': 'Show Switcher',
                'config_switcher.show_desc': 'Allows users to choose between different configurations',
                'config_switcher.position': 'Switcher Position',
                'config_switcher.pos_header': 'In Chat Header',
                'config_switcher.pos_hidden': 'Hidden',
                'config_switcher.pos_bottom': 'At Chat Bottom',
                'config_switcher.default_config': 'Default Configuration',

                // Theme Settings
                'theme.title': 'Theme Settings',
                'theme.global': 'Global Theme',
                'theme.auto': 'Automatic',
                'theme.light': 'Light',
                'theme.dark': 'Dark',
                'theme.hint': 'Applied to all configurations by default',
                'theme.individual': 'Individual Themes',
                'theme.allow_override': 'Allow Override',

                // Language Settings
                'lang.title': 'Language Settings',
                'lang.show_switcher': 'Show Language Switcher',
                'lang.show_switcher_desc': 'Allows users to change interface language',
                'lang.auto_detect': 'Auto-detect Language',
                'lang.enabled': 'Enabled',
                'lang.default': 'Default Language',

                // Settings Priority
                'priority.title': 'Configuration Settings Priority',
                'priority.info': 'If enabled, configurations can have their own appearance, behavior, and technical settings. If disabled - only base settings are used.',
                'priority.info_title': 'Individual Settings:',
                'priority.allow': 'Allow Individual Settings',
                'priority.allow_desc': 'Configurations can override base settings',
                'priority.partial': 'Partial Override',
                'priority.partial_desc': 'Configurations can change only some settings',

                // Animation
                'animation.title': 'AI Agent Response Animation',
                'animation.info': 'AI responses appear gradually, imitating the "typing" process. If disabled - the entire response appears at once.',
                'animation.info_title': 'Animated Appearance:',
                'animation.enable': 'Enable Animation',
                'animation.enable_desc': 'Responses appear gradually, creating a typing effect',
                'animation.speed': 'Animation Speed (ms)',
                'animation.speed_hint': 'Interval between text parts. Recommended: 40-60 ms',
                'animation.chunk_type': 'Text Splitting Type',
                'animation.chunk_word': 'By Words',
                'animation.chunk_sentence': 'By Sentences',
                'animation.chunk_line': 'By Lines',
                'animation.chunk_hint': 'How to split text during animation',

                // Config Editor
                'config.edit_title': 'Editing',
                'config.edit_subtitle': 'Configuration Setup',
                'config.back': 'Back to List',
                'config.save': 'Save',

                // Tabs
                'tabs.basic': 'Basic',
                'tabs.texts': 'Texts',
                'tabs.contacts': 'Contacts',
                'tabs.appearance': 'Appearance',
                'tabs.behavior': 'Behavior',
                'tabs.technical': 'Technical',
                'tabs.preview': 'Preview',

                // Basic - Config Priority
                'config_priority.title': 'Configuration Settings Priority',
                'config_priority.info': 'If "Use Individual Settings" is enabled, this configuration\'s appearance, behavior, and technical settings will take priority over base settings. If disabled - only base settings will be used.',
                'config_priority.use_individual': 'Use Individual Settings',
                'config_priority.use_individual_desc': 'Priority of this configuration\'s settings over base',
                'config_priority.order': 'Order in Switcher',
                'config_priority.order_hint': 'Configuration\'s ordinal number in switcher list (1 = first)',
                'config_priority.switcher_label': 'Configuration Name in Switcher (label)',
                'config_priority.switcher_label_hint': 'Name displayed in configuration switcher (emoji allowed)',
                'config_priority.switcher_desc': 'Configuration Description',
                'config_priority.switcher_desc_hint': 'Brief configuration description for switcher',

                // Config Language Settings
                'config_lang.title': 'Configuration Language Settings',
                'config_lang.default': 'Default Language for this Configuration',
                'config_lang.supported': 'Supported Languages',
                'config_lang.supported_hint': 'Select languages available in this configuration',

                // Texts
                'texts.lang_select': 'Text Language',
                'texts.main_title': 'Main Texts',
                'texts.header_title': 'Header Title',
                'texts.header_subtitle': 'Subtitle',
                'texts.welcome': 'Welcome Message',
                'texts.quick_buttons': 'Quick Buttons',
                'texts.add_button': 'Add Button',

                // Text Editor - Toolbar
                'editor.bold': 'Bold',
                'editor.italic': 'Italic',
                'editor.underline': 'Underline',
                'editor.strikethrough': 'Strikethrough',
                'editor.font_size': 'Font Size',
                'editor.font_size_option': 'Size',
                'editor.font_small': 'Small',
                'editor.font_medium': 'Medium',
                'editor.font_large': 'Large',
                'editor.font_xlarge': 'Extra Large',
                'editor.text_color': 'Text Color',
                'editor.bg_color': 'Background Color',
                'editor.align_left': 'Align Left',
                'editor.align_center': 'Align Center',
                'editor.align_right': 'Align Right',
                'editor.list_bullet': 'Bullet List',
                'editor.list_numbered': 'Numbered List',
                'editor.insert_link': 'Insert Link',
                'editor.remove_format': 'Remove Formatting',
                'editor.insert_emoji': 'Insert Emoji',
                'editor.remove_color': 'Remove Color',
                'editor.visual_tab': 'Visual',
                'editor.html_tab': 'HTML',

                // Contacts
                'contacts.title': 'Contact Information',
                'contacts.add': 'Add Contact',
                'contacts.show': 'Show Contacts',
                'contacts.show_desc': 'Display contacts button in chat header',
                'contacts.title_field': 'Contacts Window Title',

                // Appearance - Sizes
                'appearance.sizes_title': 'Sizes and Positioning',
                'appearance.position': 'Chat Position',
                'appearance.pos_bottom_right': 'Bottom Right',
                'appearance.pos_bottom_left': 'Bottom Left',
                'appearance.pos_top_right': 'Top Right',
                'appearance.pos_top_left': 'Top Left',
                'appearance.width': 'Width (px)',
                'appearance.height': 'Height (px)',
                'appearance.margins': 'Margins from Screen Edges',
                'appearance.margin_top': 'Top',
                'appearance.margin_right': 'Right',
                'appearance.margin_bottom': 'Bottom',
                'appearance.margin_left': 'Left',

                // Appearance - Colors
                'appearance.colors_title': 'Colors and Styles',
                'appearance.header_gradient': 'Header Color (gradient)',
                'appearance.change_gradient': 'Change Gradient',
                'appearance.header_text_color': 'Header Text Color',
                'appearance.button_color': 'Button Color',
                'appearance.button_hover_color': 'Button Hover Color',
                'appearance.user_message_color': 'User Message Color',
                'appearance.user_message_text_color': 'Message Text Color',

                // Appearance - Fonts
                'appearance.fonts_title': 'Fonts',
                'appearance.font_family': 'Font Family',
                'appearance.font_system': 'System Font',
                'appearance.platform': 'Platform',
                'appearance.platform_desktop': 'Desktop',
                'appearance.platform_mobile': 'Mobile Devices',
                'appearance.message_size': 'Message Text Size',
                'appearance.header_size': 'Header Size',
                'appearance.quick_button_size': 'Quick Button Size',
                'appearance.message_size_mobile': 'Message Text Size (mobile)',
                'appearance.header_size_mobile': 'Header Size (mobile)',
                'appearance.quick_button_size_mobile': 'Quick Button Size (mobile)',

                // Appearance - Theme
                'appearance.theme_title': 'Configuration Theme',
                'appearance.theme_mode': 'Theme Mode',
                'appearance.theme_auto': 'Automatic (follows system)',
                'appearance.theme_light': 'Always Light',
                'appearance.theme_dark': 'Always Dark',
                'appearance.theme_preferred': 'Preferred Scheme',
                'appearance.theme_info': 'This theme setting will only be used if individual themes for configurations are allowed in global settings.',

                // Appearance - Widget
                'widget.title': 'Collapsed Chat Widget Settings',
                'widget.type': 'Widget Type',
                'widget.animation_speed': 'Animation Speed (seconds)',
                'widget.size': 'Widget Size (px)',
                'widget.primary_color': 'Primary Color',
                'widget.icon': 'Widget Icon',
                'widget.positioning': 'Widget Positioning',
                'widget.position': 'Position',
                'widget.pos_bottom_right': 'Bottom Right',
                'widget.pos_bottom_left': 'Bottom Left',
                'widget.pos_top_right': 'Top Right',
                'widget.pos_top_left': 'Top Left',
                'widget.margins': 'Widget Margins (px)',
                'widget.info': 'The collapsed chat widget is an animated button displayed when the chat is closed. Choose one of 20 widget styles and configure its parameters.',

                // Behavior
                'behavior.main_title': 'Main Behavior',
                'behavior.auto_open': 'Auto Open',
                'behavior.auto_open_desc': 'Open chat on page load',
                'behavior.auto_open_delay': 'Auto-open Delay (milliseconds)',
                'behavior.auto_open_delay_hint': '1000 ms = 1 second. Delay before automatically opening chat',
                'behavior.auto_focus': 'Auto Focus',
                'behavior.auto_focus_desc': 'Put cursor in input field',
                'behavior.show_welcome': 'Show Welcome',
                'behavior.show_welcome_desc': 'Display welcome message',
                'behavior.show_quick_buttons': 'Quick Buttons',
                'behavior.show_quick_buttons_desc': 'Show quick buttons panel',

                // Behavior - Voice Messages
                'voice.title': 'Voice Messages',
                'voice.enable': 'Enable Voice Messages',
                'voice.enable_desc': 'Allows users to send voice messages',
                'voice.max_duration': 'Maximum Duration (sec)',
                'voice.format': 'File Format',

                // Behavior - File Upload
                'files.title': 'File Upload',
                'files.enable': 'Allow File Upload',
                'files.enable_desc': 'Show file attachment button',
                'files.max_size': 'Maximum File Size (MB)',
                'files.allowed_types': 'Allowed File Types',
                'files.type_images': 'Images (JPEG, PNG, GIF, WebP)',
                'files.type_pdf': 'PDF Documents',
                'files.type_text': 'Text Files (TXT, CSV)',
                'files.type_office': 'Microsoft Office (DOC, XLS)',

                // Behavior - History
                'history.title': 'Chat History',
                'history.save': 'Save History',
                'history.save_desc': 'Save conversation between sessions',
                'history.quick_collapsed': 'Quick Buttons Collapsed',
                'history.quick_collapsed_desc': 'Collapse quick buttons panel by default',
                'history.paste_images': 'Paste Images',
                'history.paste_images_desc': 'Allow pasting images via Ctrl+V',
                'history.show_input': 'Show Input Area',
                'history.show_input_desc': 'Display message input area',
                'history.popout_mode': 'Popout Mode',
                'history.popout_mode_desc': 'Enable button to open chat in separate window',
                'history.lifetime': 'Storage Time (hours)',
                'history.max_messages': 'Maximum Messages',

                // Behavior - Popout Window Sizes
                'popout.title': 'Popout Window Sizes',
                'popout.width': 'Window Width',
                'popout.height': 'Window Height',
                'popout.width_hint': 'Width of separate chat window in pixels',
                'popout.height_hint': 'Height of separate chat window in pixels',

                // Technical Settings
                'technical.title': 'Technical Settings',
                'technical.request_timeout': 'Request Timeout (ms)',
                'technical.request_timeout_hint': 'Maximum server response wait time',
                'technical.max_message_length': 'Maximum Message Length',
                'technical.max_message_length_hint': 'Maximum number of characters in one message',
                'technical.api_url': 'Webhook API URL',
                'technical.api_url_hint': 'n8n webhook address for message processing',
                'technical.voice_endpoint': 'Voice Messages Endpoint',
                'technical.voice_endpoint_hint': 'URL for uploading voice messages to server',
                'technical.voice_download': 'Voice Download Path',
                'technical.voice_download_hint': 'Base path for downloading voice files',
                'technical.debug_mode': 'Debug Mode',

                // Preview
                'preview.title': 'Chat Preview',
                'preview.refresh': 'üîÑ Refresh Preview',

                // Buttons
                'btn.save': 'Save',
                'btn.cancel': 'Cancel',
                'btn.add': 'Add',
                'btn.delete': 'Delete',
                'btn.edit': 'Edit',
                'btn.close': 'Close',
                'btn.apply': 'Apply',

                // Messages
                'msg.saving': 'Saving...',
                'msg.saved': 'Saved Successfully',
                'msg.error': 'Error',
                'msg.error_server': 'Server Communication Error',
                'msg.confirm_delete': 'Are you sure you want to delete?',
                'msg.unsaved_changes': 'You have unsaved changes. Save them?',

                // Emoji Picker
                'emoji.title': 'Select Emoji',
                'emoji.click_to_insert': 'Click on emoji to insert',

                // Console messages
                'console.form_changed': 'üìù Form changed',
                'console.icon_updated': '‚úÖ Icon in switcherLabel updated:',
                'console.unsaved_saved': 'üíæ Unsaved changes saved for:',
                'console.save_failed': '‚ö†Ô∏è Failed to save changes:',
                'console.editing_config': '‚úèÔ∏è Editing configuration:',
                'console.editor_not_found': '‚ùå config-editor element not found',
                'console.editor_opened': '‚úÖ Editor opened:',
                'console.switching_tab': 'üîÑ Switching to tab:',
                'console.selecting_config': 'üéØ Selecting configuration:',
                'console.loading_config': 'üìù Loading configuration data:',
                'console.loaded_unsaved': '‚úÖ Loaded unsaved changes for:',
                'console.checking_chatconfigs': 'Checking window.ChatConfigs:',
                'console.keys_in_chatconfigs': 'Keys in ChatConfigs:',
                'console.trying_variants': 'Trying variants:',
                'console.found_via': '‚úÖ Found via ChatConfigs.',
                'console.chatconfigs_not_exist': '‚ö†Ô∏è window.ChatConfigs does not exist',
                'console.trying_window': 'Attempting to load via window.',
                'console.config_not_found': '‚ùå Configuration not found:',
                'console.available_in_chatconfigs': 'Available in window.ChatConfigs:',
                'console.not_found': 'not found',
                'console.available_in_window': 'Available in window:',
                'console.config_data_received': '‚úÖ Configuration data received',
                'console.from_unsaved': ' (from unsaved changes)',
                'console.config_structure': 'Configuration structure:',
                'console.all_sections_loaded': '‚úÖ All sections loaded',
                'console.loading_error': '‚ùå Configuration loading error:',
                'console.loading_texts': 'üìÑ Loading texts',
                'console.language': 'Language:',
                'console.texts': 'Texts:',
                'console.loaded_header_title': '‚úÖ Loaded headerTitle:',
                'console.loaded_header_subtitle': '‚úÖ Loaded headerSubtitle:',
                'console.loaded_welcome': '‚úÖ Welcome message loaded',
                'console.texts_loaded': '‚úÖ Texts loaded',
                'console.loading_quick_buttons': '‚ö° Loading quick buttons',
                'console.received_config': 'Received configuration:',
                'console.current_lang': 'Current language:',
                'console.quickbuttons_not_array': '‚ö†Ô∏è quickButtons is not an array:',
                'console.found_buttons': 'Found quick buttons:',
                'console.quick_buttons': 'Quick buttons:',
                'console.buttons_not_found': '‚ö†Ô∏è Quick buttons not found for language:',
                'console.try_russian': 'Trying Russian language...',
                'console.buttons_russian': 'Buttons in Russian:',
                'console.loaded_buttons_texts': '‚úÖ Loaded buttons in Texts tab:',
                'console.loaded_buttons_main': '‚úÖ Loaded buttons in Quick Buttons tab:',
                'console.loading_contacts': 'üìû Loading contacts',
                'console.found_contacts': 'Found contacts:',
                'console.contacts': 'Contacts:',
                'console.contacts_container_not_found': '‚ö†Ô∏è Contacts container not found',
                'console.contacts_enabled': 'Contacts enabled:',
                'console.contacts_title': 'Contacts title:',
                'console.contacts_loaded': '‚úÖ Loaded contacts:',
                'console.loading_appearance': 'üé® Loading appearance settings',
                'console.position': '‚úÖ Position:',
                'console.dimensions': '‚úÖ Dimensions:',
                'console.margins': '‚úÖ Margins:',
                'console.compact_mode': '‚úÖ Compact mode:',
                'console.loading_colors': 'üé® Loading colors:',
                'console.loading_fonts': 'üî§ Loading fonts:',
                'console.theme_loaded': '‚úÖ Theme loaded:',
                'console.loading_widget': 'üéØ Loading widget settings:',
                'console.widget_loaded': '‚úÖ Widget settings loaded',
                'console.loading_widget_pos': 'üìç Loading widget positioning:',
                'console.widget_pos_loaded': '‚úÖ Widget positioning loaded',
                'console.appearance_loaded': '‚úÖ Appearance loaded',
                'console.loading_behavior': '‚öôÔ∏è Loading behavior settings',
                'console.behavior_settings': 'Behavior settings:',
                'console.file_types_loaded': '‚úÖ Allowed file types loaded',
                'console.behavior_loaded': '‚úÖ Behavior settings loaded',
                'console.loading_technical': 'üîß Loading technical settings',
                'console.timeout': '‚úÖ Timeout:',
                'console.max_length': '‚úÖ Max length:',
                'console.technical_loaded': '‚úÖ Technical settings loaded',
                'console.loading_additional': 'üîß Loading additional settings',
                'console.loading_supported_langs': 'üåç Loading supported languages...',
                'console.found_lang_buttons': 'Found language buttons:',
                'console.supported_langs_config': 'Supported languages from config:',
                'console.lang_enabled': '‚úÖ Language {lang} enabled',
                'console.lang_button_not_found': '‚ö†Ô∏è Button for language {lang} not found',
                'console.supported_langs_loaded': '‚úÖ Supported languages loaded:',
                'console.supported_langs_not_found': '‚ö†Ô∏è supportedLanguages not found or is not an array',
                'console.all_langs_disabled': '‚úÖ All languages disabled (supportedLanguages not set)',
                'console.additional_loaded': '‚úÖ Additional settings loaded',
                'console.color_selected': '‚úÖ Quick color selection:',
                'console.color_applied': 'üé® Color applied:',
                'console.to_element': 'to element:',
                'console.color_applied_first': 'üé® Color applied to first element:',

                // Save indicator messages
                'save.unsaved_changes': 'You have unsaved changes',
                'save.config_not_found': 'Configuration {id} not found',
                'save.global_saved': 'Global settings saved!',
                'save.save_error': 'Save error',
                'save.server_error': 'Server communication error',
                'save.saving': 'Saving...',
                'save.config_saved': 'Configuration saved!',
                'save.critical_error': 'Critical error!',
                'save.saving_base': 'Saving base settings...',
                'save.base_saved': 'Base settings saved!',
                'save.saving_config': 'Saving configuration...',
                'save.config_created': 'Configuration "{name}" created and saved!',
                'save.server_save_error': 'Server save error',
                'save.saving_status': 'Saving status...',
                'save.config_enabled': 'Configuration enabled',
                'save.config_disabled': 'Configuration disabled',
                'save.status_error': 'Status save error',
                'save.deleting_config': 'Deleting configuration...',
                'save.config_deleted': '‚úÖ Configuration deleted!',
                'save.delete_error': 'Delete error',
                'save.preparing_export': 'Preparing full export...',
                'save.config_downloaded': 'Full configuration downloaded! ‚úÖ',
                'save.preparing_export_current': 'Preparing full export with current settings...',
                'save.select_config_first': 'Select configuration for editing first',
                'save.config_exported': 'Full configuration file exported! ‚úÖ',
                'save.export_error': 'Export error: {error}',
                'save.export_settings_error': 'Settings export error',
                'save.importing_config': 'Importing configuration...',
                'save.config_imported': 'Configuration imported! Reloading...',
                'save.creating_backup': 'Creating backup...',
                'save.backup_created': 'Backup created!',
                'save.backup_create_error': 'Backup creation error',
                'save.restoring': 'Restoring...',
                'save.config_restored_reloading': 'Configuration restored! Reloading...',
                'save.restore_error': 'Restore error',
                'save.backup_downloading': 'Backup downloading...',
                'save.deleting': 'Deleting...',
                'save.backup_deleted': 'Backup deleted',
                'save.backup_delete_error': 'Delete error',
                'save.loading_config_error': 'Configuration loading error',
                'save.chatconfigs_not_loaded': 'ChatConfigs not loaded',
                'save.load_file_error': 'Failed to load configuration file',
                'save.saving_global': 'Saving global settings...',
                'save.global_settings_saved': 'Global settings saved!',

                // Export
                'export.copied': 'Copied to clipboard!',
                'export.copy_error': 'Error copying to clipboard',

                // Alert/confirm messages
                'alert.enter_config_id': '‚ö†Ô∏è Enter configuration ID!',
                'alert.enter_config_name': '‚ö†Ô∏è Enter configuration name!',
                'alert.id_invalid': '‚ö†Ô∏è ID must contain only Latin letters, numbers and underscores!',
                'alert.id_exists': '‚ö†Ô∏è Configuration with this ID already exists!',
                'alert.creation_error': '‚ùå Error creating configuration: {error}',
                'confirm.delete_config': 'Are you sure you want to delete configuration "{id}"?\n\nThis action cannot be undone!',
                'confirm.import_file': 'Import configuration from file?\n\nCurrent configuration will be saved to backup, then page will reload.',
                'confirm.restore_backup': 'Restore configuration from this backup?\n\nCurrent configuration will be automatically saved to a separate backup.',
                'confirm.delete_backup': 'Delete this backup?\n\n{name}',
                'confirm.restore_from_backup': 'Restore configuration from backup?\n\n{file}',
                'alert.config_restored': '‚úÖ Configuration restored!\n\nPlease refresh the page.',
                'alert.restore_error': '‚ùå Restore error: {error}',
                'alert.no_backups': 'No backups found',

                // Placeholder texts
                'placeholder.config_description': 'Configuration description',
                'placeholder.enter_message': 'Enter message...',
                'placeholder.emoji_search': 'Search emoji...',
                'placeholder.button_text': 'Button text',
                'placeholder.button_message': 'Message on click',
                'placeholder.contact_name': 'Name',
                'placeholder.my_config': 'My Configuration',
                'placeholder.top': 'Top',
                'placeholder.right': 'Right',
                'placeholder.bottom': 'Bottom',
                'placeholder.left': 'Left',

                // Dynamic content
                'content.quick_buttons_not_configured': 'Quick buttons not configured',
                'content.contacts_not_configured': 'Contacts not configured. Click "Add Contact" to create.',
                'content.select_color': 'Select Color',
                'content.choose_color': 'Choose color',
                'content.quick_select': 'Quick Select',
                'content.move': 'Move',
                'content.phone': 'Phone',
                'content.editing': 'Editing:',

                // Configurations Management
                'configs.title': 'Configurations Management',
                'configs.subtitle': 'Enable, disable and configure chat configurations',
                'configs.create_new': 'Create New',
                'configs.import': 'Import',

                // Base Settings
                'base.title': 'Base Settings',
                'base.subtitle': 'Default settings for all configurations',
                'base.save_changes': 'Save Changes',
                'base.tab_behavior': 'Behavior',
                'base.tab_appearance': 'Appearance',
                'base.tab_technical': 'Technical',
                'base.tab_monitoring': 'Monitoring',

                // Base Settings - Behavior
                'base.behavior.main_title': 'Main Behavior',
                'base.behavior.auto_open': 'Auto Open',
                'base.behavior.auto_open_desc': 'Open chat on page load',
                'base.behavior.auto_open_delay': 'Auto-open Delay (milliseconds)',
                'base.behavior.auto_open_delay_hint': '1000 ms = 1 second',
                'base.behavior.auto_focus': 'Auto Focus',
                'base.behavior.auto_focus_desc': 'Put cursor in input field',
                'base.behavior.show_welcome': 'Show Welcome',
                'base.behavior.show_welcome_desc': 'Display welcome message',
                'base.behavior.show_quick_buttons': 'Quick Buttons',
                'base.behavior.show_quick_buttons_desc': 'Show quick buttons panel',
                'base.behavior.quick_buttons_collapsed': 'Quick Buttons Collapsed',
                'base.behavior.quick_buttons_collapsed_desc': 'Collapse quick buttons panel by default',
                'base.behavior.voice_files_title': 'Voice and Files',
                'base.behavior.enable_voice': 'Enable Voice Messages',
                'base.behavior.enable_voice_desc': 'Allows users to send voice messages',
                'base.behavior.enable_file_upload': 'Allow File Upload',
                'base.behavior.enable_file_upload_desc': 'Show file attachment button',
                'base.behavior.paste_images': 'Paste Images (Ctrl+V)',
                'base.behavior.paste_images_desc': 'Allow pasting images from clipboard',
                'base.behavior.show_input_area': 'Show Input Area',
                'base.behavior.show_input_area_desc': 'Display message input area',
                'base.behavior.history_popout_title': 'History and Popout Window',
                'base.behavior.save_history': 'Save History',
                'base.behavior.save_history_desc': 'Save conversation between sessions',
                'base.behavior.history_lifetime': 'History Storage Time (hours)',
                'base.behavior.max_history_messages': 'Maximum Messages in History',
                'base.behavior.enable_popout_mode': 'Popout Mode',
                'base.behavior.enable_popout_mode_desc': 'Enable button to open chat in separate window',
                'base.behavior.popout_width': 'Popout Window Width (px)',
                'base.behavior.popout_height': 'Popout Window Height (px)',

                // Base Settings - Appearance
                'base.appearance.sizes_title': 'Sizes and Positioning',
                'base.appearance.position': 'Chat Position',
                'base.appearance.pos_bottom_right': 'Bottom Right',
                'base.appearance.pos_bottom_left': 'Bottom Left',
                'base.appearance.pos_top_right': 'Top Right',
                'base.appearance.pos_top_left': 'Top Left',
                'base.appearance.width': 'Chat Width (px)',
                'base.appearance.height': 'Chat Height (px)',
                'base.appearance.margins': 'Margins from Screen Edges (px)',
                'base.appearance.margin_top': 'Top',
                'base.appearance.margin_right': 'Right',
                'base.appearance.margin_bottom': 'Bottom',
                'base.appearance.margin_left': 'Left',
                'base.appearance.theme_title': 'Configuration Theme',
                'base.appearance.theme_mode': 'Theme Mode',
                'base.appearance.theme_auto': 'Automatic (follows system)',
                'base.appearance.theme_light': 'Always Light',
                'base.appearance.theme_dark': 'Always Dark',
                'base.appearance.theme_preferred': 'Preferred Scheme',
                'base.appearance.theme_preferred_auto': 'Automatic',
                'base.appearance.theme_preferred_light': 'Light',
                'base.appearance.theme_preferred_dark': 'Dark',
                'base.appearance.theme_info': 'Default theme setting for all configurations. Can be overridden in individual configuration settings.',
                'base.appearance.widget_title': 'Collapsed Chat Widget Settings',
                'base.appearance.widget_type': 'Widget Type',
                'base.appearance.widget_animation_speed': 'Animation Speed (seconds)',
                'base.appearance.widget_size': 'Widget Size (px)',
                'base.appearance.widget_primary_color': 'Primary Color',
                'base.appearance.widget_icon': 'Widget Icon',
                'base.appearance.widget_positioning': 'Widget Positioning',
                'base.appearance.widget_position': 'Position',
                'base.appearance.widget_pos_bottom_right': 'Bottom Right',
                'base.appearance.widget_pos_bottom_left': 'Bottom Left',
                'base.appearance.widget_pos_top_right': 'Top Right',
                'base.appearance.widget_pos_top_left': 'Top Left',
                'base.appearance.widget_margins': 'Widget Margins (px)',
                'base.appearance.widget_margin_top': 'Top',
                'base.appearance.widget_margin_right': 'Right',
                'base.appearance.widget_margin_bottom': 'Bottom',
                'base.appearance.widget_margin_left': 'Left',
                'base.appearance.widget_info': 'The collapsed chat widget is an animated button displayed when the chat is closed. Choose one of 20 widget styles and configure its parameters.',
                'base.appearance.colors_title': 'Colors',
                'base.appearance.header_gradient': 'Header Color (gradient)',
                'base.appearance.change_gradient': 'Change Gradient',
                'base.appearance.header_text_color': 'Header Text Color',
                'base.appearance.button_color': 'Button Color',
                'base.appearance.button_hover_color': 'Button Hover Color',
                'base.appearance.user_message_color': 'User Message Color',
                'base.appearance.user_message_text_color': 'Message Text Color',
                'base.appearance.fonts_title': 'Fonts',
                'base.appearance.font_family': 'Font Family',
                'base.appearance.font_system': 'System Font',
                'base.appearance.font_platform': 'Platform',
                'base.appearance.font_platform_desktop': 'Desktop',
                'base.appearance.font_platform_mobile': 'Mobile Devices',
                'base.appearance.font_message_size': 'Message Text Size',
                'base.appearance.font_header_size': 'Header Size',
                'base.appearance.font_quick_button_size': 'Quick Button Size',
                'base.appearance.font_message_size_mobile': 'Message Text Size (mobile)',
                'base.appearance.font_header_size_mobile': 'Header Size (mobile)',
                'base.appearance.font_quick_button_size_mobile': 'Quick Button Size (mobile)',

                // Base Settings - Technical
                'base.technical.params_title': 'Technical Parameters',
                'base.technical.request_timeout': 'Request Timeout (ms)',
                'base.technical.request_timeout_hint': 'Maximum wait time for server response',
                'base.technical.max_message_length': 'Maximum Message Length',
                'base.technical.max_message_length_hint': 'Maximum number of characters',
                'base.technical.debug_mode': 'Debug Mode',
                'base.technical.debug_mode_desc': 'Output technical information to console',
                'base.technical.voice_title': 'Voice Messages',
                'base.technical.voice_max_duration': 'Maximum Duration (sec)',
                'base.technical.voice_format': 'File Format',
                'base.technical.voice_server_storage': 'Save to Server',
                'base.technical.voice_server_storage_desc': 'Upload voice messages to server',
                'base.technical.voice_upload_url': 'URL for Voice Upload',
                'base.technical.voice_download_path': 'Path for Voice Download',
                'base.technical.voice_file_prefix': 'File Name Prefix',
                'base.technical.voice_max_size': 'Maximum Size (MB)',
                'base.technical.voice_local_fallback': 'Local Save on Error',
                'base.technical.voice_local_fallback_desc': 'Save locally if server is unavailable',
                'base.technical.files_title': 'Files',
                'base.technical.files_max_size': 'Maximum File Size (MB)',
                'base.technical.files_allowed_types': 'Allowed File Types',
                'base.technical.files_type_images': 'Images (JPEG, PNG, GIF, WebP, BMP)',
                'base.technical.files_type_pdf': 'PDF Documents',
                'base.technical.files_type_text': 'Text Files (TXT, CSV)',
                'base.technical.files_type_office': 'Microsoft Office (DOC, XLS)',

                // Base Settings - Monitoring
                'base.monitoring.title': 'Monitoring Settings',
                'base.monitoring.info': 'Monitoring allows you to track chat events and send statistics to your n8n webhook for analytics and automation.',
                'base.monitoring.enabled': 'Enable Monitoring',
                'base.monitoring.enabled_desc': 'Send data about chat sessions',
                'base.monitoring.url': 'Monitoring URL (n8n webhook)',
                'base.monitoring.url_hint': 'Webhook for sending statistics and chat events',
                'base.monitoring.warning_title': 'Important:',
                'base.monitoring.warning_text': 'Make sure your n8n webhook is configured to receive POST requests with monitoring data.',

                // Branding
                'branding.title': 'Web Chat Branding',
                'branding.subtitle': 'Configure your company logo and name in the web chat',
                'branding.save': 'Save Settings',
                'branding.main_settings': 'Main Settings',
                'branding.enabled': 'Enable Branding',
                'branding.enabled_desc': 'Show company logo and name in chat',
                'branding.logo_type': 'Logo Type',
                'branding.logo_type_svg': 'SVG Code',
                'branding.logo_type_icon': 'Icon (emoji)',
                'branding.logo_type_image': 'Image URL',
                'branding.logo_type_hint': 'Choose how to display the logo',
                'branding.logo_svg': 'SVG Logo Code',
                'branding.logo_svg_hint': 'Paste full SVG code (including &lt;svg&gt;...&lt;/svg&gt; tags). Example: "Neural Network" SVG logo from logo.html',
                'branding.logo_icon': 'Icon (emoji)',
                'branding.logo_icon_hint': 'Enter emoji icon',
                'branding.logo_image': 'Image URL',
                'branding.logo_image_hint': 'Link to logo image',
                'branding.company_name': 'Company Name',
                'branding.company_name_hint': 'Will be displayed next to the logo',
                'branding.company_url': 'Company Website URL (optional)',
                'branding.company_url_hint': 'If specified, company name becomes a clickable link',
                'branding.powered_by': '"Powered by" Text (optional)',
                'branding.powered_by_hint': 'Text before company name. Leave empty to hide',
                'branding.sizes': 'Sizes',
                'branding.logo_width': 'Logo Width (px)',
                'branding.logo_height': 'Logo Height (px)',
                'branding.font_size': 'Font Size (px)',
                'branding.preview': 'Preview',
                'branding.preview_light': 'Light Theme',
                'branding.preview_dark': 'Dark Theme',
                'branding.disabled_preview': 'Branding disabled',

                // Export/Import
                'export.title': 'Export and Import Configuration',
                'export.subtitle': 'Save and transfer settings between systems',
                'export.export_title': 'Export Configuration',
                'export.export_desc': 'Export current configuration to JavaScript file for use on website',
                'export.what_to_export': 'What to Export',
                'export.global_settings': 'Global Settings',
                'export.all_configs': 'All Configurations',
                'export.interface_texts': 'Base Interface Texts',
                'export.minify_code': 'Minify Code',
                'export.btn_download': 'üì• Download webchat-config.js',
                'export.btn_export_full': 'üì§ Export Full File with Current Settings',
                'export.btn_copy': 'üìã Copy to Clipboard',
                'export.export_info': '<strong>Download webchat-config.js</strong> - downloads saved configuration from server as is.<br><strong>Export Full File with Current Settings</strong> - creates complete working webchat-config.js file with all functions, translations and code, but with current form settings (without saving to server). Perfect for creating individual configurations.',
                'export.import_title': 'Import Configuration',
                'export.import_desc': 'Load existing configuration file for editing',
                'export.import_warning': 'Import will replace all current settings. It is recommended to create a backup first.',
                'export.btn_import': 'üì§ Import',
                'export.backups_title': 'Backups',
                'export.backups_desc': 'Automatic configuration backups',
                'export.btn_create_backup': 'üíæ Create Backup',

                // Messages
                'msg.saving': 'Saving...',

                // Emoji Picker
                'emoji.title': 'Select Emoji',
                'emoji.click_to_insert': 'Click on emoji to insert',

                // Placeholders
                'placeholder.emoji_search': 'Search emoji...',

                // Config Card Buttons
                'btn.on': 'On',
                'btn.off': 'Off',

                // Tooltips
                'tooltip.delete_config': 'Delete configuration',

                // Config Cards
                'configs.add_custom': 'Add custom configuration',

                // Backups
                'backup.from': 'Backup from',
                'backup.no_backups': 'No backups',
                'backup.load_error': 'Error loading backup list',
                'backup.restore': 'Restore',
                'backup.download': 'Download',
                'backup.delete': 'Delete',

                // Modal Windows - Create Config
                'modal.create_config_title': 'Create New Configuration',
                'modal.config_id_label': 'Configuration ID (Latin letters, no spaces)',
                'modal.config_id_placeholder': 'myCustomConfig',
                'modal.config_id_hint': 'For example: customerSupportConfig, salesConfig',
                'modal.config_name_label': 'Name (in Russian)',
                'modal.config_name_placeholder': 'My Configuration',
                'modal.config_icon_label': 'Icon (emoji)',
                'modal.config_icon_hint': 'One emoji for display',
                'modal.config_description_label': 'Description',
                'modal.config_order_label': 'Display Order',
                'modal.config_order_hint': 'The lower the number, the higher in the list',

                // Modal Windows - Gradient Editor
                'modal.gradient_editor_title': 'Gradient Editor',
                'modal.gradient_editor_base_title': 'Gradient Editor (base settings)',
                'modal.gradient_start_color': 'Start Color',
                'modal.gradient_end_color': 'End Color',
                'modal.gradient_direction': 'Direction',
                'modal.gradient_direction_diagonal': 'Diagonal (‚Üò)',
                'modal.gradient_direction_left_right': 'Left to Right (‚Üí)',
                'modal.gradient_direction_top_bottom': 'Top to Bottom (‚Üì)',
                'modal.gradient_direction_bottom_top': 'Bottom to Top (‚Üë)',
                'modal.gradient_preview': 'Preview',

                // GDPR - Navigation
                'nav.gdpr': 'GDPR / Privacy',

                // GDPR - Headers
                'gdpr.title': 'üîí GDPR and Privacy Settings',
                'gdpr.subtitle': 'Manage GDPR compliance and user data protection',

                // GDPR - Main Settings
                'gdpr.main_settings': 'Main Settings',
                'gdpr.enable_gdpr': 'Enable GDPR Mode',
                'gdpr.enable_gdpr_hint': 'Activates all data protection and consent features',
                'gdpr.mode': 'GDPR Mode',
                'gdpr.mode_strict': 'Strict (recommended for EU)',
                'gdpr.mode_standard': 'Standard',
                'gdpr.mode_minimal': 'Minimal',
                'gdpr.privacy_url': 'Privacy Policy URL',
                'gdpr.terms_url': 'Terms of Service URL',
                'gdpr.cookie_url': 'Cookie Policy URL',

                // GDPR - Consent Banner
                'gdpr.consent_banner': 'Consent Banner',
                'gdpr.banner_enabled': 'Show Consent Banner',
                'gdpr.banner_block': 'Block Chat Until Consent',
                'gdpr.banner_position': 'Banner Position',
                'gdpr.position_bottom': 'Bottom',
                'gdpr.position_top': 'Top',
                'gdpr.position_center': 'Center',
                'gdpr.expire_days': 'Consent Validity (days)',
                'gdpr.show_decline': 'Show "Decline" Button',
                'gdpr.show_privacy_link': 'Show Privacy Policy Link',
                'gdpr.show_cookie_link': 'Show Cookie Policy Link',
                'gdpr.show_cookie_link_hint': 'Link will be shown only if Cookie Policy URL is specified above',
                'gdpr.show_terms_link': 'Show Terms of Service Link',
                'gdpr.show_terms_link_hint': 'Link will be shown only if Terms of Service URL is specified above',
                'gdpr.show_monitoring_consent': 'Show monitoring information in consent',
                'gdpr.show_monitoring_consent_hint': 'Monitoring text will only be shown if monitoring is enabled in settings',

                // GDPR - Chat History
                'gdpr.chat_history': 'Chat History',
                'gdpr.chat_history_info': 'Settings for storing and protecting chat history in the user\'s browser.',
                'gdpr.encrypt_local': 'Encrypt chat history in browser',
                'gdpr.encrypt_local_hint': 'Enables client-side encryption of chat history in localStorage. Recommended for enhanced security.',

                // GDPR - Pre-Chat Form
                'gdpr.prechat_form': 'Pre-Chat Form',
                'gdpr.prechat_info': 'Pre-Chat form allows collecting user data (name, email, phone) before starting the chat. Disabled by default.',
                'gdpr.prechat_enabled': 'Enable Pre-Chat Form',
                'gdpr.prechat_enabled_hint': 'Disabled by default. Enable if you need to collect user data',
                'gdpr.prechat_after_consent': 'Show After Consent',
                'gdpr.prechat_gdpr_checkbox': 'Show Data Processing Consent Checkbox',
                'gdpr.prechat_display_mode': 'Form Display Mode',
                'gdpr.prechat_mode_modal': 'Modal Window (popup)',
                'gdpr.prechat_mode_inline': 'Inside Chat (inline)',
                'gdpr.prechat_display_mode_hint': 'Modal - popup window over chat, Inline - compact form inside messages area',
                'gdpr.prechat_fields_title': 'Form Fields',
                'gdpr.prechat_fields_hint': 'Configure which fields to show and their parameters',
                'gdpr.field_name': 'Name',
                'gdpr.field_email': 'Email',
                'gdpr.field_phone': 'Phone',
                'gdpr.field_company': 'Company',
                'gdpr.field_enabled': 'Enable field',
                'gdpr.field_required': 'Required field',
                'gdpr.field_pattern': 'Validation pattern (regex)',

                // GDPR - AI Disclosure
                'gdpr.ai_disclosure': 'AI Disclosure',
                'gdpr.ai_disclosure_info': 'Inform users they are chatting with an AI assistant. Required by EU AI Act and recommended for transparency.',
                'gdpr.ai_enabled': 'Enable AI Disclosure',
                'gdpr.ai_show_in_welcome': 'Show in Welcome Message',
                'gdpr.ai_show_in_welcome_hint': 'AI text will be added to the end of the welcome message',
                'gdpr.ai_show_in_consent': 'Show in Consent Form',
                'gdpr.ai_show_in_consent_hint': 'AI text will be shown in the GDPR consent banner',

                // GDPR - Privacy Controls
                'gdpr.privacy_controls': 'Privacy Controls',
                'gdpr.privacy_enabled': 'Enable Privacy Menu',
                'gdpr.privacy_enabled_hint': 'The üîí button will appear in the chat header',
                'gdpr.available_options': 'Available Options for User:',
                'gdpr.opt_view_data': 'View Personal Data',
                'gdpr.opt_edit_data': 'Edit Personal Data',
                'gdpr.opt_export_data': 'Export Data (Data Portability)',
                'gdpr.opt_delete_history': 'Delete Chat History',
                'gdpr.opt_revoke_consent': 'Revoke Consent',
                'gdpr.opt_delete_all': 'Delete All Data (Right to Erasure)',

                // GDPR - Webhooks
                'gdpr.webhooks': 'Webhooks for n8n',
                'gdpr.webhooks_info': 'Webhooks allow integrating GDPR features with n8n and PostgreSQL for storing and processing consents and data.',
                'gdpr.webhook_consent': 'Consent Webhook',
                'gdpr.webhook_consent_hint': 'Called on consent accept/decline',
                'gdpr.webhook_prechat': 'Pre-Chat Form Webhook',
                'gdpr.webhook_prechat_hint': 'Called when Pre-Chat form is submitted',
                'gdpr.webhook_data_access': 'Data Access Webhook',
                'gdpr.webhook_data_access_hint': 'Called when user requests their data',
                'gdpr.webhook_data_export': 'Data Export Webhook',
                'gdpr.webhook_data_delete': 'Data Delete Webhook',
                'gdpr.webhook_consent_revoke': 'Consent Revoke Webhook',
                'gdpr.webhook_consent_revoke_hint': 'Called when user revokes their consent for data processing',

                // GDPR - Geolocation
                'gdpr.geolocation': 'Geolocation & Auto-Detection',
                'gdpr.geolocation_info': 'Automatic country detection allows applying the appropriate GDPR mode. For EU users, strict mode will be automatically applied.',
                'gdpr.geo_enabled': 'Enable geolocation detection',
                'gdpr.geo_enabled_hint': 'Use ipapi.co service to detect visitor country',
                'gdpr.detection_mode': 'GDPR Detection Mode',
                'gdpr.mode_manual': 'Manual (use mode setting above)',
                'gdpr.mode_auto': 'Auto (detect by country)',
                'gdpr.mode_hybrid': 'Hybrid (auto for EU, manual for others)',
                'gdpr.detection_mode_hint': 'Manual - always use selected mode, Auto - detect by country, Hybrid - strict for EU, manual for others',
                'gdpr.strict_for_eu': 'Strict mode for EU countries',
                'gdpr.strict_for_eu_hint': 'Automatically apply strict mode for visitors from the European Union',

                // GDPR - Compliance Info
                'gdpr.compliance_info': 'Compliance Information',
                'gdpr.compliance_text': 'This configuration helps ensure compliance with GDPR, CCPA, and other data protection laws. Make sure you have a valid privacy policy and all necessary legal documents.',

                // GDPR - Save button
                'gdpr.save_changes': 'Save Changes',
                'gdpr.saving': 'Saving GDPR settings...',
                'gdpr.saved': 'GDPR settings saved!',
                'gdpr.save_error': 'Error saving GDPR settings',

                // GDPR - Notifications
                'gdpr.notification.setting_updated': 'GDPR setting updated',
                'gdpr.notification.settings_saved': 'GDPR settings saved!',
                'gdpr.notification.enabled': 'GDPR mode enabled',
                'gdpr.notification.disabled': 'GDPR mode disabled',
                'gdpr.notification.prechat_enabled': 'Pre-Chat form enabled',
                'gdpr.notification.prechat_disabled': 'Pre-Chat form disabled',
                'gdpr.notification.webhook_updated': 'Webhook URL updated',
                'gdpr.notification.invalid_url': 'Invalid URL address'
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
        function t(key) {
            return translations[currentUILanguage][key] || translations['ru'][key] || key;
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
        function applyTranslations() {

            // –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å data-i18n –∞—Ç—Ä–∏–±—É—Ç–æ–º
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = t(key);

                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    if (element.hasAttribute('placeholder')) {
                        element.placeholder = translation;
                    } else {
                        element.value = translation;
                    }
                } else {
                    element.innerHTML = translation;
                }
            });

            // –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤—Å–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã —Å data-i18n-placeholder –∞—Ç—Ä–∏–±—É—Ç–æ–º
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                const translation = t(key);
                element.placeholder = translation;
            });

            // –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤—Å–µ title –∞—Ç—Ä–∏–±—É—Ç—ã —Å data-i18n-title –∞—Ç—Ä–∏–±—É—Ç–æ–º
            document.querySelectorAll('[data-i18n-title]').forEach(element => {
                const key = element.getAttribute('data-i18n-title');
                const translation = t(key);
                element.title = translation;
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-switch-btn').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.color = 'rgba(255,255,255,0.7)';
            });
            const activeBtn = document.getElementById(`langBtn${currentUILanguage.charAt(0).toUpperCase() + currentUILanguage.slice(1)}`);
            if (activeBtn) {
                activeBtn.style.background = 'rgba(255,255,255,0.2)';
                activeBtn.style.color = 'white';
            }

            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
            if (typeof loadConfigurationsList === 'function') {
                const configsContainer = document.querySelector('.config-cards');
                if (configsContainer && configsContainer.children.length > 0) {
                    loadConfigurationsList();
                }
            }

            if (typeof loadBackupsList === 'function') {
                const backupsContainer = document.getElementById('backupsList');
                if (backupsContainer && backupsContainer.children.length > 0) {
                    loadBackupsList();
                }
            }

        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function switchUILanguage(lang) {
            currentUILanguage = lang;
            localStorage.setItem('uiLanguage', lang);
            applyTranslations();
        }

        // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            applyTranslations();
        });

        // ============================================
        // –û–°–ù–û–í–ù–û–ô –ö–û–î –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        // ============================================

        // –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        let currentPage = 'global-settings';
        let currentConfig = null;
        let currentTab = 'basic';
        let isDirty = false;

        // ‚úÖ –ù–û–í–û–ï: –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
        window.pendingChanges = window.pendingChanges || {};
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
function setDirty() {
    isDirty = true;

    // ‚úÖ –ù–û–í–û–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º debounce —á—Ç–æ–±—ã –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
    if (window.previewUpdateTimeout) {
        clearTimeout(window.previewUpdateTimeout);
    }
    window.previewUpdateTimeout = setTimeout(() => {
        if (typeof updatePreview === 'function') {
            updatePreview();
        }
    }, 300); // –ó–∞–¥–µ—Ä–∂–∫–∞ 300–º—Å –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
}

// ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –≤ switcherLabel –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ widgetIcon
function updateSwitcherLabelIcon() {
    const widgetIcon = document.getElementById('widgetIcon')?.value || 'üí¨';
    const switcherLabelInput = document.getElementById('switcherLabelInput');

    if (!switcherLabelInput) return;

    const currentLabel = switcherLabelInput.value;

    // –£–¥–∞–ª—è–µ–º –≤—Å–µ —ç–º–æ–¥–∑–∏ –∏–∑ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
    let cleanLabel = currentLabel.trim();

    // –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â—É—é –∏–∫–æ–Ω–∫—É widgetIcon –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å
    while (cleanLabel.startsWith(widgetIcon)) {
        cleanLabel = cleanLabel.slice(widgetIcon.length).trim();
    }

    // –£–¥–∞–ª—è–µ–º –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π regex)
    // –ü–æ–≤—Ç–æ—Ä—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –µ—Å—Ç—å —ç–º–æ–¥–∑–∏
    let prevLength = -1;
    while (cleanLabel.length !== prevLength) {
        prevLength = cleanLabel.length;
        cleanLabel = cleanLabel.replace(/^[\u{1F000}-\u{1FFFF}\u{2000}-\u{3300}\u{FE00}-\u{FFFF}\s]+/u, '').trim();
    }

    // –ï—Å–ª–∏ label –ø—É—Å—Ç–æ–π –∏–ª–∏ –±—ã–ª —Ç–æ–ª—å–∫–æ —ç–º–æ–¥–∑–∏, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–æ–≤—É—é –∏–∫–æ–Ω–∫—É
    if (cleanLabel) {
        switcherLabelInput.value = `${widgetIcon} ${cleanLabel}`;
    } else {
        switcherLabelInput.value = widgetIcon + ' ';
    }

    setDirty();
}

        // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
let isMobileMenuOpen = false;

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
function toggleMobileMenu() {
    const sidebar = document.querySelector('.sidebar');
    const menuBtn = document.querySelector('.mobile-menu-btn');
    isMobileMenuOpen = !isMobileMenuOpen;
    
    if (isMobileMenuOpen) {
        sidebar.classList.add('mobile-open');
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –º–µ–Ω—é
        if (menuBtn) menuBtn.style.display = 'block';
    } else {
        sidebar.classList.remove('mobile-open');
    }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
document.addEventListener('click', function(e) {
    const sidebar = document.querySelector('.sidebar');
    const menuBtn = document.querySelector('.mobile-menu-btn');
    
    if (isMobileMenuOpen && 
        !sidebar.contains(e.target) && 
        !menuBtn?.contains(e.target)) {
        toggleMobileMenu();
    }
});

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
window.addEventListener('resize', function() {
    const menuBtn = document.querySelector('.mobile-menu-btn');
    if (window.innerWidth <= 1024) {
        if (menuBtn) menuBtn.style.display = 'block';
    } else {
        if (menuBtn) menuBtn.style.display = 'none';
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø
        if (isMobileMenuOpen) {
            toggleMobileMenu();
        }
    }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    const menuBtn = document.querySelector('.mobile-menu-btn');
    if (window.innerWidth <= 1024 && menuBtn) {
        menuBtn.style.display = 'block';
    }

    // Initialize widget grid
    initializeWidgetGrid();
});

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
        document.querySelectorAll('.nav-item[data-page]').forEach(item => {
            item.addEventListener('click', function() {
                const page = this.dataset.page;
                navigateToPage(page);
            });
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
        document.querySelectorAll('.nav-item[data-config]').forEach(item => {
            item.addEventListener('click', function() {
                const config = this.dataset.config;
                editConfig(config);
            });
        });

        function navigateToPage(page) {
            // ‚úÖ –ù–û–í–û–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            if (currentConfig && isDirty && typeof collectConfigData === 'function') {
                try {
                    const currentData = collectConfigData();
                    if (currentData) {
                        window.pendingChanges[currentConfig] = currentData;
                    }
                } catch (e) {
                }
            }

            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page-content').forEach(content => {
                content.style.display = 'none';
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const pageContent = document.getElementById(page);
            if (pageContent) {
                pageContent.style.display = 'block';
                pageContent.classList.add('animate-in');
            }

            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`.nav-item[data-page="${page}"]`)?.classList.add('active');

            currentPage = page;

            // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å–ø–æ—Ä—Ç–∞
            if (page === 'export-import' && typeof loadBackupsList === 'function') {
                setTimeout(() => {
                    loadBackupsList();
                }, 100);
            }

            // ‚úÖ –ù–û–í–û–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–ü–æ–≤–µ–¥–µ–Ω–∏–µ" –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ "–ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
            if (page === 'base-settings' && typeof switchBaseTab === 'function') {
                setTimeout(() => {
                    switchBaseTab('behavior');
                }, 50);
            }

            // ‚úÖ –ù–û–í–û–ï: –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è
            if (page === 'branding-settings' && typeof loadBrandingSettings === 'function') {
                setTimeout(() => {
                    loadBrandingSettings();
                }, 100);
            }

            // ‚úÖ –ù–û–í–û–ï: –ó–∞–≥—Ä—É–∂–∞–µ–º GDPR –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É GDPR
            if (page === 'gdpr-settings' && typeof loadGDPRSettings === 'function') {
                setTimeout(() => {
                    loadGDPRSettings();
                }, 100);
            }
        }

        function editConfig(configId) {

    // ‚úÖ –ù–û–í–û–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –¥—Ä—É–≥—É—é
    if (currentConfig && currentConfig !== configId && isDirty && typeof collectConfigData === 'function') {
        try {
            const currentData = collectConfigData();
            if (currentData) {
                window.pendingChanges[currentConfig] = currentData;
            }
        } catch (e) {
        }
    }

    currentConfig = configId;
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ localStorage
    localStorage.setItem('lastEditedConfig', configId);
    
    // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
    document.querySelectorAll('.page-content').forEach(content => {
        content.style.display = 'none';
    });
    
    const editor = document.getElementById('config-editor');
    if (editor) {
        editor.style.display = 'block';
    } else {
        return;
    }
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    let config = null;
    let configName = '';
    let configIcon = '';
    
    // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    if (window.ChatConfigs) {
        const shortName = configId.replace('Config', '');
        config = window.ChatConfigs[shortName];
    }
    
    if (!config && window[configId]) {
        config = window[configId];
    }
    
    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∏–∫–æ–Ω–∫—É
    if (config && config.botInfo) {
        configName = config.botInfo.name || configId;
        configIcon = config.botInfo.avatar || 'üí¨';
    } else if (config && config.switcherSettings && config.switcherSettings.labels) {
        const label = config.switcherSettings.labels.ru || config.switcherSettings.labels.en || '';
        // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∫–æ–Ω–∫—É –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ label
        const match = label.match(/^([\u{1F300}-\u{1F9FF}]+)\s+(.+)$/u);
        if (match) {
            configIcon = match[1];
            configName = match[2];
        } else {
            configName = label;
            configIcon = 'üí¨';
        }
    } else {
        // ‚úÖ –ù–û–í–û–ï: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π fallback –¥–ª—è –ª—é–±–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        configIcon = 'üí¨';
        configName = configId.replace('Config', '');
    }
    
    // –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫
    const titleElement = document.getElementById('configTitle');
    if (titleElement) {
        titleElement.innerHTML = `${configIcon} ${t('content.editing')} ${configName}`;
    }
    
    // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é
    document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
    });
    
    const menuItem = document.querySelector(`.menu-item[data-config="${configId}"]`);
    if (menuItem) {
        menuItem.classList.add('active');
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É –≤—Ä—É—á–Ω—É—é
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–û—Å–Ω–æ–≤–Ω–æ–µ"
    const basicTab = document.getElementById('tab-basic');
    if (basicTab) {
        basicTab.classList.add('active');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tabs .tab').forEach(tabBtn => {
        tabBtn.classList.remove('active');
    });
    
    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É "–û—Å–Ω–æ–≤–Ω–æ–µ"
    const basicBtn = document.querySelector('.tabs .tab[onclick*="basic"]');
    if (basicBtn) {
        basicBtn.classList.add('active');
    }
    
    currentTab = 'basic';
    
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    loadConfigData(configId);

        configId,
        configName,
        configIcon,
        hasConfig: !!config
    });
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
function showTab(tabId) {
    
    // –°–Ω–∏–º–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    const selectedBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
    const selectedContent = document.getElementById(`tab-${tabId}`);
    
    if (selectedBtn) {
        selectedBtn.classList.add('active');
    }
    
    if (selectedContent) {
        selectedContent.classList.add('active');
    }
}

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –º–µ–Ω—é)
function selectConfig(configId) {
    editConfig(configId);
}

        function loadConfigData(configId) {
    try {

        let configData = null;
        let fromPendingChanges = false;

        // ‚úÖ –ù–û–í–û–ï: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
        if (window.pendingChanges && window.pendingChanges[configId]) {
            configData = window.pendingChanges[configId];
            fromPendingChanges = true;
        }

        // –ï—Å–ª–∏ –Ω–µ—Ç pendingChanges, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ ChatConfigs
        if (!configData) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º ChatConfigs

            if (window.ChatConfigs) {

                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–º–µ–Ω–∏
                const variants = [
                    configId,                           // financeConfig
                    configId.replace('Config', ''),     // finance
                    configId.toLowerCase(),             // financeconfig
                    configId.charAt(0).toUpperCase() + configId.slice(1) // FinanceConfig
                ];


                for (let variant of variants) {
                    if (window.ChatConfigs[variant]) {
                        configData = window.ChatConfigs[variant];
                        break;
                    }
                }
            } else {
            }

            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —á–µ—Ä–µ–∑ ChatConfigs, –ø—Ä–æ–±—É–µ–º –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ window
            if (!configData) {
                configData = window[configId];
            }
        }

        // –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ –Ω–∞—à–ª–∏
        if (!configData) {

            showSaveIndicator('error', t('save.config_not_found').replace('{id}', configId));
            return;
        }

            configId: configData.configId,
            botInfo: configData.botInfo,
            hasTexts: !!configData.texts,
            hasContacts: !!configData.contacts,
            hasAppearance: !!configData.appearance,
            hasBehavior: !!configData.behavior
        });

        // ‚úÖ –ù–û–í–û–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥ isDirty –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        if (fromPendingChanges) {
            isDirty = true;
        }
        
        // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã–µ —Å–µ–∫—Ü–∏–∏
        loadTextsData(configData);
        loadQuickButtonsData(configData);
        loadContactsData(configData);
        loadAppearanceData(configData);
        loadBehaviorData(configData);
        loadTechnicalData(configData);
        loadAdditionalConfigData(configData);


        // ‚úÖ –ù–û–í–û–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            if (typeof updatePreview === 'function') {
                updatePreview();
            }
        }, 300);

    } catch (error) {
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤
function loadTextsData(config) {

    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';
    const texts = config.texts?.[currentLang] || config.texts?.ru || {};


    // –ù–∞–∑–≤–∞–Ω–∏–µ –≤ —à–∞–ø–∫–µ
    const headerTitleInput = document.getElementById('headerTitleInput');
    if (headerTitleInput && texts.headerTitle) {
        headerTitleInput.value = texts.headerTitle;
    }

    // –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
    const headerSubtitleInput = document.getElementById('headerSubtitleInput');
    if (headerSubtitleInput && texts.headerSubtitle !== undefined) {
        headerSubtitleInput.value = texts.headerSubtitle;
    }

    // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    const welcomeEditor = document.querySelector('#welcomeMessageEditor');
    if (welcomeEditor && texts.welcomeMessage) {
        welcomeEditor.innerHTML = texts.welcomeMessage;
    }

}

// –ó–∞–≥—Ä—É–∑–∫–∞ –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫
function loadQuickButtonsData(config) {

    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';


    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ quickButtons - —ç—Ç–æ –º–∞—Å—Å–∏–≤
    let quickButtons = config.texts?.[currentLang]?.quickButtons;
    if (!Array.isArray(quickButtons)) {
        quickButtons = [];
    }


    if (quickButtons.length === 0) {
        let ruButtons = config.texts?.ru?.quickButtons;
        if (!Array.isArray(ruButtons)) {
            ruButtons = [];
        }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ (–≤–∫–ª–∞–¥–∫–∞ "–¢–µ–∫—Å—Ç—ã")
    const container1 = document.getElementById('quickButtonsList');
    if (container1) {
        container1.innerHTML = '';

        if (quickButtons.length === 0) {
            container1.innerHTML = '<p style="color: #999; padding: 20px;">' + t('content.quick_buttons_not_configured') + '</p>';
        } else {
            quickButtons.forEach(button => {
                const buttonElement = createQuickButtonElement(button.text, button.message);
                container1.appendChild(buttonElement);
            });
        }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ (–≤–∫–ª–∞–¥–∫–∞ "–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏")
    const container2 = document.getElementById('quickButtonsListMain');
    if (container2) {
        container2.innerHTML = '';

        if (quickButtons.length === 0) {
            container2.innerHTML = '<p style="color: #999; padding: 20px;">' + t('content.quick_buttons_not_configured') + '</p>';
        } else {
            quickButtons.forEach(button => {
                const buttonElement = createQuickButtonElement(button.text, button.message);
                container2.appendChild(buttonElement);
            });
        }
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
let draggedQuickButton = null;

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –±—ã—Å—Ç—Ä–æ–π –∫–Ω–æ–ø–∫–∏
function createQuickButtonElement(text, message) {
    const div = document.createElement('div');
    div.className = 'quick-button-item';
    div.draggable = true;
    div.innerHTML = `
        <input type="text" class="form-control" value="${text || ''}" placeholder="${t('placeholder.button_text')}" onchange="setDirty()">
        <input type="text" class="form-control" value="${message || ''}" placeholder="${t('placeholder.button_message')}" onchange="setDirty()">
        <div class="list-item-controls">
            <button class="icon-btn drag-handle" title="${t('content.move')}">‚ÜïÔ∏è</button>
            <button class="icon-btn danger" title="${t('btn.delete')}" onclick="this.closest('.quick-button-item').remove(); setDirty();">üóëÔ∏è</button>
        </div>
    `;

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag and drop

    div.addEventListener('dragstart', function(e) {
        draggedQuickButton = this;
        this.style.opacity = '0.5';
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
    });

    div.addEventListener('dragend', function(e) {
        this.style.opacity = '1';
        draggedQuickButton = null;
        // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã drag-over –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
        document.querySelectorAll('.quick-button-item').forEach(item => {
            item.classList.remove('drag-over');
        });
    });

    div.addEventListener('dragover', function(e) {
        if (e.preventDefault) {
            e.preventDefault();
        }
        e.dataTransfer.dropEffect = 'move';

        // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é
        if (draggedQuickButton && draggedQuickButton !== this) {
            this.classList.add('drag-over');
        }

        return false;
    });

    div.addEventListener('dragleave', function(e) {
        this.classList.remove('drag-over');
    });

    div.addEventListener('drop', function(e) {
        if (e.stopPropagation) {
            e.stopPropagation();
        }

        this.classList.remove('drag-over');

        if (draggedQuickButton && draggedQuickButton !== this) {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
            const rect = this.getBoundingClientRect();
            const midpoint = rect.top + rect.height / 2;

            if (e.clientY < midpoint) {
                // –í—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–¥ —Ç–µ–∫—É—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
                this.parentNode.insertBefore(draggedQuickButton, this);
            } else {
                // –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
                this.parentNode.insertBefore(draggedQuickButton, this.nextSibling);
            }

            setDirty();
        }

        return false;
    });

    return div;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
function loadContactsData(config) {

    const contacts = config.contacts?.items || [];

    const container = document.querySelector('.contacts-editor');
    if (!container) {
        return;
    }

    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    container.innerHTML = '';

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
    const contactsToggle = document.getElementById('contactsEnabledToggle');
    if (contactsToggle && config.contacts) {
        if (config.contacts.enabled) {
            contactsToggle.classList.add('active');
        } else {
            contactsToggle.classList.remove('active');
        }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    const contactsTitle = document.getElementById('contactsTitle');
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';
    if (contactsTitle && config.contacts?.titles) {
        contactsTitle.value = config.contacts.titles[currentLang] || config.contacts.titles.ru || '';
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã
    if (contacts.length === 0) {
        container.innerHTML = '<p style="color: #999; padding: 20px;">' + t('content.contacts_not_configured') + '</p>';
    } else {
        contacts.forEach(contact => {
            const contactElement = createContactElement(contact);
            container.appendChild(contactElement);
        });
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
function createContactElement(contact) {
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';
    const label = contact.labels?.[currentLang] || contact.labels?.ru || '';
    
    const div = document.createElement('div');
    div.className = 'contact-item';
    div.innerHTML = `
        <div class="contact-icon-picker" onclick="showIconPicker(this)">${contact.icon || 'üìß'}</div>
        <div class="contact-fields">
            <select class="form-control" onchange="setDirty()">
                <option value="telegram" ${contact.type === 'telegram' ? 'selected' : ''}>Telegram</option>
                <option value="whatsapp" ${contact.type === 'whatsapp' ? 'selected' : ''}>WhatsApp</option>
                <option value="email" ${contact.type === 'email' ? 'selected' : ''}>Email</option>
                <option value="phone" ${contact.type === 'phone' ? 'selected' : ''}>${t('content.phone')}</option>
                <option value="messenger" ${contact.type === 'messenger' ? 'selected' : ''}>Messenger</option>
                <option value="twitter" ${contact.type === 'twitter' ? 'selected' : ''}>X (Twitter)</option>
                <option value="instagram" ${contact.type === 'instagram' ? 'selected' : ''}>Instagram</option>
            </select>
            <input type="text" class="form-control" placeholder="URL –∏–ª–∏ –Ω–æ–º–µ—Ä" value="${contact.url || ''}" onchange="setDirty()">
            <input type="text" class="form-control" placeholder="${t('placeholder.contact_name')}" value="${label}" onchange="setDirty()">
        </div>
        <button class="icon-btn danger" title="–£–¥–∞–ª–∏—Ç—å" onclick="this.closest('.contact-item').remove(); setDirty();">üóëÔ∏è</button>
    `;
    return div;
}

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
function createContactElement(contact) {
    const currentLang = document.querySelector('select[onchange*="switchTextLanguage"]')?.value || 'ru';
    const label = contact.labels?.[currentLang] || contact.labels?.ru || '';
    
    const div = document.createElement('div');
    div.className = 'contact-item';
    div.innerHTML = `
        <div class="contact-icon-picker">${contact.icon || 'üìß'}</div>
        <div class="contact-fields">
            <select class="form-control">
                <option value="telegram" ${contact.type === 'telegram' ? 'selected' : ''}>Telegram</option>
                <option value="whatsapp" ${contact.type === 'whatsapp' ? 'selected' : ''}>WhatsApp</option>
                <option value="email" ${contact.type === 'email' ? 'selected' : ''}>Email</option>
                <option value="phone" ${contact.type === 'phone' ? 'selected' : ''}>${t('content.phone')}</option>
                <option value="messenger" ${contact.type === 'messenger' ? 'selected' : ''}>Messenger</option>
                <option value="twitter" ${contact.type === 'twitter' ? 'selected' : ''}>X (Twitter)</option>
                <option value="instagram" ${contact.type === 'instagram' ? 'selected' : ''}>Instagram</option>
            </select>
            <input type="text" class="form-control" placeholder="URL –∏–ª–∏ –Ω–æ–º–µ—Ä" value="${contact.url || ''}">
            <input type="text" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" value="${label}">
        </div>
        <button class="icon-btn danger" title="–£–¥–∞–ª–∏—Ç—å" onclick="this.closest('.contact-item').remove(); setDirty();">üóëÔ∏è</button>
    `;
    return div;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞
function loadAppearanceData(config) {
    const appearance = config.appearance || {};

    // ============================================
    // –ü–û–ó–ò–¶–ò–Ø –ò –†–ê–ó–ú–ï–†–´
    // ============================================

    // –ü–æ–∑–∏—Ü–∏—è —á–∞—Ç–∞
    const appearancePositionSelect = document.getElementById('appearancePositionSelect');
    if (appearancePositionSelect && appearance.position) {
        appearancePositionSelect.value = appearance.position;
    }
    // –†–∞–∑–º–µ—Ä—ã (—à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞)
    const appearanceWidthInput = document.getElementById('appearanceWidthInput');
    const appearanceHeightInput = document.getElementById('appearanceHeightInput');
    if (appearanceWidthInput && appearance.dimensions) {
        appearanceWidthInput.value = appearance.dimensions.width || 400;
    }
    if (appearanceHeightInput && appearance.dimensions) {
        appearanceHeightInput.value = appearance.dimensions.height || 560;
    }

    // –û—Ç—Å—Ç—É–ø—ã –æ—Ç –∫—Ä–∞—ë–≤ —ç–∫—Ä–∞–Ω–∞
    const appearanceMarginTop = document.getElementById('appearanceMarginTop');
    const appearanceMarginRight = document.getElementById('appearanceMarginRight');
    const appearanceMarginBottom = document.getElementById('appearanceMarginBottom');
    const appearanceMarginLeft = document.getElementById('appearanceMarginLeft');

    if (appearance.margins) {
        if (appearanceMarginTop) appearanceMarginTop.value = appearance.margins.top || 20;
        if (appearanceMarginRight) appearanceMarginRight.value = appearance.margins.right || 60;
        if (appearanceMarginBottom) appearanceMarginBottom.value = appearance.margins.bottom || 10;
        if (appearanceMarginLeft) appearanceMarginLeft.value = appearance.margins.left || 20;
    }

    // –†–∞–∑–º–µ—Ä—ã –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    const appearanceCompactWidth = document.getElementById('appearanceCompactWidth');
    const appearanceCompactHeight = document.getElementById('appearanceCompactHeight');
    if (appearance.compactMinimizedSize) {
        if (appearanceCompactWidth) appearanceCompactWidth.value = appearance.compactMinimizedSize.width || 200;
        if (appearanceCompactHeight) appearanceCompactHeight.value = appearance.compactMinimizedSize.height || 65;
    }

    // ============================================
    // –¶–í–ï–¢–ê
    // ============================================

    if (appearance.colors) {
        
        // –ì—Ä–∞–¥–∏–µ–Ω—Ç —à–∞–ø–∫–∏
        if (appearance.colors.header?.background) {
            const headerGradientPreview = document.getElementById('appearanceHeaderGradientPreview');
            if (headerGradientPreview) {
                headerGradientPreview.style.background = appearance.colors.header.background;
            }
        }
        
        // –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ —à–∞–ø–∫–∏
        if (appearance.colors.header?.textColor) {
            const headerTextColorPreview = document.getElementById('appearanceHeaderTextColorPreview');
            const headerTextColorInput = document.getElementById('appearanceHeaderTextColorInput');
            const headerTextColorValue = document.getElementById('appearanceHeaderTextColorValue');
            
            if (headerTextColorPreview) headerTextColorPreview.style.background = appearance.colors.header.textColor;
            if (headerTextColorInput) headerTextColorInput.value = appearance.colors.header.textColor;
            if (headerTextColorValue) headerTextColorValue.textContent = appearance.colors.header.textColor;
        }
        
        // –¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫
        if (appearance.colors.buttons?.background) {
            const buttonColorPreview = document.getElementById('appearanceButtonColorPreview');
            const buttonColorInput = document.getElementById('appearanceButtonColorInput');
            const buttonColorValue = document.getElementById('appearanceButtonColorValue');
            
            if (buttonColorPreview) buttonColorPreview.style.background = appearance.colors.buttons.background;
            if (buttonColorInput) buttonColorInput.value = appearance.colors.buttons.background;
            if (buttonColorValue) buttonColorValue.textContent = appearance.colors.buttons.background;
        }
        
        // –¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        if (appearance.colors.buttons?.hoverBackground) {
            const buttonHoverColorPreview = document.getElementById('appearanceButtonHoverColorPreview');
            const buttonHoverColorInput = document.getElementById('appearanceButtonHoverColorInput');
            const buttonHoverColorValue = document.getElementById('appearanceButtonHoverColorValue');
            
            if (buttonHoverColorPreview) buttonHoverColorPreview.style.background = appearance.colors.buttons.hoverBackground;
            if (buttonHoverColorInput) buttonHoverColorInput.value = appearance.colors.buttons.hoverBackground;
            if (buttonHoverColorValue) buttonHoverColorValue.textContent = appearance.colors.buttons.hoverBackground;
        }
        
        // –¶–≤–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (appearance.colors.userMessage?.background) {
            const userMessageColorPreview = document.getElementById('appearanceUserMessageColorPreview');
            const userMessageColorInput = document.getElementById('appearanceUserMessageColorInput');
            const userMessageColorValue = document.getElementById('appearanceUserMessageColorValue');
            
            if (userMessageColorPreview) userMessageColorPreview.style.background = appearance.colors.userMessage.background;
            if (userMessageColorInput) userMessageColorInput.value = appearance.colors.userMessage.background;
            if (userMessageColorValue) userMessageColorValue.textContent = appearance.colors.userMessage.background;
        }
        
        // –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
        if (appearance.colors.userMessage?.textColor) {
            const userMessageTextColorPreview = document.getElementById('appearanceUserMessageTextColorPreview');
            const userMessageTextColorInput = document.getElementById('appearanceUserMessageTextColorInput');
            const userMessageTextColorValue = document.getElementById('appearanceUserMessageTextColorValue');
            
            if (userMessageTextColorPreview) userMessageTextColorPreview.style.background = appearance.colors.userMessage.textColor;
            if (userMessageTextColorInput) userMessageTextColorInput.value = appearance.colors.userMessage.textColor;
            if (userMessageTextColorValue) userMessageTextColorValue.textContent = appearance.colors.userMessage.textColor;
        }
    }
    
    // ============================================
    // –®–†–ò–§–¢–´
    // ============================================

    if (appearance.fonts) {
        
        // –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–æ–≤
        const appearanceFontFamilySelect = document.getElementById('appearanceFontFamilySelect');
        if (appearanceFontFamilySelect && appearance.fonts.desktop?.family) {
            appearanceFontFamilySelect.value = appearance.fonts.desktop.family;
        }
        
        // –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        const desktopFontMessageSize = document.getElementById('desktopFontMessageSize');
        const desktopFontHeaderSize = document.getElementById('desktopFontHeaderSize');
        const desktopFontQuickButtonSize = document.getElementById('desktopFontQuickButtonSize');
        
        if (appearance.fonts.desktop) {
            if (desktopFontMessageSize && appearance.fonts.desktop.messageSize) {
                desktopFontMessageSize.value = appearance.fonts.desktop.messageSize;
            }
            if (desktopFontHeaderSize && appearance.fonts.desktop.headerSize) {
                desktopFontHeaderSize.value = appearance.fonts.desktop.headerSize;
            }
            if (desktopFontQuickButtonSize && appearance.fonts.desktop.quickButtonSize) {
                desktopFontQuickButtonSize.value = appearance.fonts.desktop.quickButtonSize;
            }
        }
        
        // –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ
        const mobileFontMessageSize = document.getElementById('mobileFontMessageSize');
        const mobileFontHeaderSize = document.getElementById('mobileFontHeaderSize');
        const mobileFontQuickButtonSize = document.getElementById('mobileFontQuickButtonSize');
        
        if (appearance.fonts.mobile) {
            if (mobileFontMessageSize && appearance.fonts.mobile.messageSize) {
                mobileFontMessageSize.value = appearance.fonts.mobile.messageSize;
            }
            if (mobileFontHeaderSize && appearance.fonts.mobile.headerSize) {
                mobileFontHeaderSize.value = appearance.fonts.mobile.headerSize;
            }
            if (mobileFontQuickButtonSize && appearance.fonts.mobile.quickButtonSize) {
                mobileFontQuickButtonSize.value = appearance.fonts.mobile.quickButtonSize;
            }
        }
    }
    
    // ============================================
    // –¢–ï–ú–ê
    // ============================================
    
    if (config.theme) {
        const themeModeSelect = document.getElementById('themeModeSelect');
        const themePreferredSchemeSelect = document.getElementById('themePreferredSchemeSelect');
        
        if (themeModeSelect && config.theme.mode) {
            themeModeSelect.value = config.theme.mode;
        }
        if (themePreferredSchemeSelect && config.theme.preferredScheme) {
            themePreferredSchemeSelect.value = config.theme.preferredScheme;
        }
    }

    // ============================================
    // WIDGET SETTINGS
    // ============================================

    if (appearance.widget) {

        // Load widget type
        if (appearance.widget.type) {
            const allCards = document.querySelectorAll('.widget-type-card');
            allCards.forEach(card => {
                if (card.dataset.widgetName === appearance.widget.type) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
        }

        // Load animation speed
        const animationSpeedInput = document.getElementById('widgetAnimationSpeed');
        const animationSpeedValue = document.getElementById('widgetAnimationSpeedValue');
        if (animationSpeedInput && appearance.widget.animationSpeed) {
            animationSpeedInput.value = appearance.widget.animationSpeed;
            if (animationSpeedValue) {
                animationSpeedValue.textContent = appearance.widget.animationSpeed + 's';
            }
        }

        // Load primary color
        const primaryColorInput = document.getElementById('widgetPrimaryColorInput');
        const primaryColorPreview = document.getElementById('widgetPrimaryColorPreview');
        const primaryColorValue = document.getElementById('widgetPrimaryColorValue');
        if (appearance.widget.primaryColor) {
            if (primaryColorInput) primaryColorInput.value = appearance.widget.primaryColor;
            if (primaryColorPreview) primaryColorPreview.style.background = appearance.widget.primaryColor;
            if (primaryColorValue) primaryColorValue.textContent = appearance.widget.primaryColor;
        }

        // Load icon
        const iconInput = document.getElementById('widgetIcon');
        if (iconInput && appearance.widget.icon) {
            iconInput.value = appearance.widget.icon;
        }

        // Load size
        const sizeInput = document.getElementById('widgetSize');
        const sizeValue = document.getElementById('widgetSizeValue');
        if (sizeInput && appearance.widget.size) {
            sizeInput.value = appearance.widget.size;
            if (sizeValue) {
                sizeValue.textContent = appearance.widget.size + 'px';
            }
        }

    }

    // ============================================
    // WIDGET POSITIONING
    // ============================================

    if (appearance.compactMinimizedPosition) {

        // Load position
        const positionSelect = document.getElementById('widgetPosition');
        if (positionSelect && appearance.compactMinimizedPosition.position) {
            positionSelect.value = appearance.compactMinimizedPosition.position;
        }

        // Load margins
        if (appearance.compactMinimizedPosition.margins) {
            const marginTop = document.getElementById('widgetMarginTop');
            const marginRight = document.getElementById('widgetMarginRight');
            const marginBottom = document.getElementById('widgetMarginBottom');
            const marginLeft = document.getElementById('widgetMarginLeft');

            if (marginTop) marginTop.value = appearance.compactMinimizedPosition.margins.top || 20;
            if (marginRight) marginRight.value = appearance.compactMinimizedPosition.margins.right || 60;
            if (marginBottom) marginBottom.value = appearance.compactMinimizedPosition.margins.bottom || 10;
            if (marginLeft) marginLeft.value = appearance.compactMinimizedPosition.margins.left || 20;
        }

    }

}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–≤–µ–¥–µ–Ω–∏—è
function loadBehaviorData(config) {
    const behavior = config.behavior || {};

    
    // ============================================
    // –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–ò
    // ============================================
    
    // autoOpen
    const autoOpenToggle = document.getElementById('autoOpenToggle');
    if (autoOpenToggle) {
        if (behavior.autoOpen === true) {
            autoOpenToggle.classList.add('active');
        } else {
            autoOpenToggle.classList.remove('active');
        }
    }
    
    // autoFocus
    const autoFocusToggle = document.getElementById('autoFocusToggle');
    if (autoFocusToggle) {
        if (behavior.autoFocus === true) {
            autoFocusToggle.classList.add('active');
        } else if (behavior.autoFocus === false) {
            autoFocusToggle.classList.remove('active');
        }
    }
    
    // showWelcome
    const showWelcomeToggle = document.getElementById('showWelcomeToggle');
    if (showWelcomeToggle) {
        if (behavior.showWelcome === true) {
            showWelcomeToggle.classList.add('active');
        } else if (behavior.showWelcome === false) {
            showWelcomeToggle.classList.remove('active');
        }
    }
    
    // showQuickButtons
    const showQuickButtonsToggle = document.getElementById('showQuickButtonsToggle');
    if (showQuickButtonsToggle) {
        if (behavior.showQuickButtons === true) {
            showQuickButtonsToggle.classList.add('active');
        } else if (behavior.showQuickButtons === false) {
            showQuickButtonsToggle.classList.remove('active');
        }
    }
    
    // enableVoice
    const enableVoiceToggle = document.getElementById('enableVoiceToggle');
    if (enableVoiceToggle) {
        if (behavior.enableVoice === true) {
            enableVoiceToggle.classList.add('active');
        } else if (behavior.enableVoice === false) {
            enableVoiceToggle.classList.remove('active');
        }
    }
    
    // enableFileUpload
    const enableFileUploadToggle = document.getElementById('enableFileUploadToggle');
    if (enableFileUploadToggle) {
        if (behavior.enableFileUpload === true) {
            enableFileUploadToggle.classList.add('active');
        } else if (behavior.enableFileUpload === false) {
            enableFileUploadToggle.classList.remove('active');
        }
    }
    
    // saveHistory
    const saveHistoryToggle = document.getElementById('saveHistoryToggle');
    if (saveHistoryToggle) {
        if (behavior.saveHistory === true) {
            saveHistoryToggle.classList.add('active');
        } else if (behavior.saveHistory === false) {
            saveHistoryToggle.classList.remove('active');
        }
    }
    
    // quickButtonsCollapsed
    const quickButtonsCollapsedToggle = document.getElementById('quickButtonsCollapsedToggle');
    if (quickButtonsCollapsedToggle) {
        if (behavior.quickButtonsCollapsed === true) {
            quickButtonsCollapsedToggle.classList.add('active');
        } else if (behavior.quickButtonsCollapsed === false) {
            quickButtonsCollapsedToggle.classList.remove('active');
        }
    }
    
    // enablePasteImages
    const enablePasteImagesToggle = document.getElementById('enablePasteImagesToggle');
    if (enablePasteImagesToggle) {
        if (behavior.enablePasteImages === true) {
            enablePasteImagesToggle.classList.add('active');
        } else if (behavior.enablePasteImages === false) {
            enablePasteImagesToggle.classList.remove('active');
        }
    }
    
    // showInputArea
    const showInputAreaToggle = document.getElementById('showInputAreaToggle');
    if (showInputAreaToggle) {
        if (behavior.showInputArea === true) {
            showInputAreaToggle.classList.add('active');
        } else if (behavior.showInputArea === false) {
            showInputAreaToggle.classList.remove('active');
        }
    }
    
    // enablePopoutMode
    const enablePopoutModeToggle = document.getElementById('enablePopoutModeToggle');
    if (enablePopoutModeToggle) {
        if (behavior.enablePopoutMode === true) {
            enablePopoutModeToggle.classList.add('active');
        } else if (behavior.enablePopoutMode === false) {
            enablePopoutModeToggle.classList.remove('active');
        }
    }
    
    // ============================================
    // –ß–ò–°–õ–û–í–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø
    // ============================================
    
    // autoOpenDelay
    const autoOpenDelayInput = document.getElementById('autoOpenDelayInput');
    if (autoOpenDelayInput && behavior.autoOpenDelay) {
        autoOpenDelayInput.value = behavior.autoOpenDelay;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
    const autoOpenDelayGroup = document.getElementById('autoOpenDelayGroup');
    if (autoOpenDelayGroup) {
        if (behavior.autoOpen) {
            autoOpenDelayGroup.style.display = 'block';
        } else {
            autoOpenDelayGroup.style.display = 'none';
        }
    }
    
    // maxVoiceDuration
    const maxVoiceDurationInput = document.getElementById('maxVoiceDurationInput');
    if (maxVoiceDurationInput && config.technical?.maxVoiceDuration) {
        maxVoiceDurationInput.value = config.technical.maxVoiceDuration;
    }
    
    // maxFileSize
    const maxFileSizeInput = document.getElementById('maxFileSizeInput');
    if (maxFileSizeInput && config.technical?.maxFileSize) {
        maxFileSizeInput.value = config.technical.maxFileSize / (1024 * 1024); // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ MB
    }
    
    // historyLifetime
    const historyLifetimeInput = document.getElementById('historyLifetimeInput');
    if (historyLifetimeInput && behavior.historyLifetime) {
        historyLifetimeInput.value = behavior.historyLifetime;
    }
    
    // maxHistoryMessages
    const maxHistoryMessagesInput = document.getElementById('maxHistoryMessagesInput');
    if (maxHistoryMessagesInput && behavior.maxHistoryMessages) {
        maxHistoryMessagesInput.value = behavior.maxHistoryMessages;
    }
    
    // popoutWindowSize
    const popoutWindowWidthInput = document.getElementById('popoutWindowWidthInput');
    const popoutWindowHeightInput = document.getElementById('popoutWindowHeightInput');
    
    if (behavior.popoutWindowSize) {
        if (popoutWindowWidthInput && behavior.popoutWindowSize.width) {
            popoutWindowWidthInput.value = behavior.popoutWindowSize.width;
        }
        if (popoutWindowHeightInput && behavior.popoutWindowSize.height) {
            popoutWindowHeightInput.value = behavior.popoutWindowSize.height;
        }
    }
    
    // ============================================
    // –†–ê–ó–†–ï–®–Å–ù–ù–´–ï –¢–ò–ü–´ –§–ê–ô–õ–û–í
    // ============================================
    
    if (config.technical && config.technical.allowedFileTypes) {
        const allowedTypes = config.technical.allowedFileTypes;
        
        // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const allowImages = document.getElementById('allowImages');
        if (allowImages) {
            allowImages.checked = allowedTypes.some(type => type.startsWith('image/'));
        }
        
        // PDF
        const allowPDF = document.getElementById('allowPDF');
        if (allowPDF) {
            allowPDF.checked = allowedTypes.includes('application/pdf');
        }
        
        // –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
        const allowText = document.getElementById('allowText');
        if (allowText) {
            allowText.checked = allowedTypes.includes('text/plain') || allowedTypes.includes('text/csv');
        }
        
        // Office –¥–æ–∫—É–º–µ–Ω—Ç—ã
        const allowOffice = document.getElementById('allowOffice');
        if (allowOffice) {
            allowOffice.checked = allowedTypes.some(type => 
                type.includes('msword') || 
                type.includes('spreadsheet') || 
                type.includes('officedocument')
            );
        }


    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function loadTechnicalData(config) {
    const technical = config.technical || {};

    // ============================================
    // –û–°–ù–û–í–ù–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ü–ê–†–ê–ú–ï–¢–†–´
    // ============================================

    // –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
    const requestTimeoutInput = document.getElementById('requestTimeoutInput');
    if (requestTimeoutInput && technical.requestTimeout) {
        requestTimeoutInput.value = technical.requestTimeout;
    }

    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    const maxMessageLengthInput = document.getElementById('maxMessageLengthInput');
    if (maxMessageLengthInput && technical.maxMessageLength) {
        maxMessageLengthInput.value = technical.maxMessageLength;
    }
    
    // URL API –≤–µ–±—Ö—É–∫–∞
    const aiCoreUrlInput = document.getElementById('aiCoreUrlInput');
    if (aiCoreUrlInput && config.aiCoreUrl) {
        aiCoreUrlInput.value = config.aiCoreUrl;
    }
    
    // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
    const debugToggle = document.querySelector('#tab-technical .toggle-switch');
    if (debugToggle && technical.debug !== undefined) {
        if (technical.debug) {
            debugToggle.classList.add('active');
        } else {
            debugToggle.classList.remove('active');
        }
    }

    // ============================================
    // ENDPOINTS –ì–û–õ–û–°–û–í–´–•
    // ============================================

    if (technical.voiceSettings) {
        // Upload endpoint
        const voiceUploadEndpoint = document.getElementById('voiceUploadEndpoint');
        if (voiceUploadEndpoint && technical.voiceSettings.uploadEndpoint) {
            voiceUploadEndpoint.value = technical.voiceSettings.uploadEndpoint;
        }

        // Download endpoint
        const voiceDownloadEndpoint = document.getElementById('voiceDownloadEndpoint');
        if (voiceDownloadEndpoint && technical.voiceSettings.downloadEndpoint) {
            voiceDownloadEndpoint.value = technical.voiceSettings.downloadEndpoint;
        }

        // Format
        const voiceFormatSelect = document.getElementById('voiceFormatSelect');
        if (voiceFormatSelect && technical.voiceSettings.fileFormat) {
            voiceFormatSelect.value = technical.voiceSettings.fileFormat;
        }
    }

}

// ===============================================
// –ó–ê–ì–†–£–ó–ö–ê –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–• –ù–ê–°–¢–†–û–ï–ö
// ===============================================
function loadAdditionalConfigData(config) {
    
    // ============================================
    // useIndividualSettings
    // ============================================
    const useIndividualToggle = document.getElementById('useIndividualSettingsToggle');
    if (useIndividualToggle && config.useIndividualSettings !== undefined) {
        if (config.useIndividualSettings) {
            useIndividualToggle.classList.add('active');
        } else {
            useIndividualToggle.classList.remove('active');
        }
    }
    
    // ============================================
    // –ü–æ—Ä—è–¥–æ–∫ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ
    // ============================================
    const orderInput = document.getElementById('switcherOrderInput');
    if (orderInput && config.switcherSettings?.order) {
        orderInput.value = config.switcherSettings.order;
    }

    // ============================================
    // ‚úÖ –ù–û–í–û–ï: Labels –∏ Descriptions –¥–ª—è switcherSettings
    // ============================================
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';

    const switcherLabelInput = document.getElementById('switcherLabelInput');
    if (switcherLabelInput && config.switcherSettings?.labels) {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º label –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞
        switcherLabelInput.value = config.switcherSettings.labels[currentLang] || config.switcherSettings.labels['ru'] || '';
    }

    const switcherDescriptionInput = document.getElementById('switcherDescriptionInput');
    if (switcherDescriptionInput && config.switcherSettings?.descriptions) {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º description –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞
        switcherDescriptionInput.value = config.switcherSettings.descriptions[currentLang] || config.switcherSettings.descriptions['ru'] || '';
    }

    // ============================================
    // –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    // ============================================
    const defaultLangSelect = document.getElementById('configDefaultLanguage');
    if (defaultLangSelect && config.defaultLanguage) {
        defaultLangSelect.value = config.defaultLanguage;
    }
    
    // ============================================
    // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
    // ============================================

    if (config.supportedLanguages && Array.isArray(config.supportedLanguages)) {
        const languageOptions = document.querySelectorAll('#supportedLanguagesSelector .language-option');

        // –°–Ω–∞—á–∞–ª–∞ —Å–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö
        languageOptions.forEach(option => {
            option.classList.remove('selected');
            const checkbox = option.querySelector('input[type="checkbox"]');
            if (checkbox) checkbox.checked = false;
        });

        // –í—ã–¥–µ–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
        config.supportedLanguages.forEach(lang => {
            const option = document.querySelector(`#supportedLanguagesSelector .language-option[data-lang="${lang}"]`);
            if (option) {
                option.classList.add('selected');
                const checkbox = option.querySelector('input[type="checkbox"]');
                if (checkbox) checkbox.checked = true;
            } else {
            }
        });

    } else {

        // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –í–°–ï–• —è–∑—ã–∫–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ
        const languageOptions = document.querySelectorAll('#supportedLanguagesSelector .language-option');

        languageOptions.forEach(option => {
            option.classList.remove('selected');
            const checkbox = option.querySelector('input[type="checkbox"]');
            if (checkbox) checkbox.checked = false;
        });

    }

}

// ===============================================
// –§–£–ù–ö–¶–ò–ò –†–ê–ë–û–¢–´ –° –¶–í–ï–¢–ê–ú–ò
// ===============================================

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–ª–∏—Ç—Ä—ã —Ü–≤–µ—Ç–æ–≤
function pickColor(colorId) {
    // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å active —É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    document.querySelectorAll('.color-preview').forEach(el => el.classList.remove('active'));
    
    // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –∏ –æ—Ç–º–µ—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∏–∫–Ω—É—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç
    lastClickedColorPreview = document.getElementById(colorId + 'Preview');
    if (lastClickedColorPreview) {
        lastClickedColorPreview.classList.add('active');
    }
    
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ü–≤–µ—Ç
    const currentColor = document.getElementById(colorId + 'Input')?.value || '#667eea';

    // –°–æ–∑–¥–∞—ë–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–∞–ª–∏—Ç—Ä–æ–π —Ü–≤–µ—Ç–æ–≤
    const modal = createModal(t('content.select_color'), `
        <div class="color-picker-modal">
            <div class="form-group">
                <label class="form-label">${t('content.choose_color')}</label>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <div style="position: relative;">
                        <div class="color-preview-large" id="modalColorPreview" style="width: 60px; height: 60px; background: ${currentColor}; border-radius: 8px; cursor: pointer; border: 2px solid #e5e7eb;" onclick="document.getElementById('hiddenColorPicker').click()"></div>
                        <input type="color" id="hiddenColorPicker" value="${currentColor}" style="position: absolute; opacity: 0; width: 0; height: 0; pointer-events: none;">
                    </div>
                    <input type="text" id="colorPickerHex" value="${currentColor}" class="form-control" placeholder="#667eea" style="flex: 1;" maxlength="7">
                </div>
            </div>

            <div class="form-group mt-3">
                <label class="form-label">${t('content.quick_select')}</label>
                <div class="color-palette">
                    <div class="color-option" style="background: #667eea" onclick="selectQuickColor('#667eea')"></div>
                    <div class="color-option" style="background: #764ba2" onclick="selectQuickColor('#764ba2')"></div>
                    <div class="color-option" style="background: #ff5400" onclick="selectQuickColor('#ff5400')"></div>
                    <div class="color-option" style="background: #10b981" onclick="selectQuickColor('#10b981')"></div>
                    <div class="color-option" style="background: #3b82f6" onclick="selectQuickColor('#3b82f6')"></div>
                    <div class="color-option" style="background: #8b5cf6" onclick="selectQuickColor('#8b5cf6')"></div>
                    <div class="color-option" style="background: #ec4899" onclick="selectQuickColor('#ec4899')"></div>
                    <div class="color-option" style="background: #14b8a6" onclick="selectQuickColor('#14b8a6')"></div>
                </div>
            </div>
        </div>
    `, () => saveSelectedColor(colorId));
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Å–∫—Ä—ã—Ç–æ–π –ø–∞–ª–∏—Ç—Ä–æ–π –∏ –ø–æ–ª—è–º–∏
    const hiddenPicker = document.getElementById('hiddenColorPicker');
    const hexInput = document.getElementById('colorPickerHex');
    const preview = document.getElementById('modalColorPreview');
    
    if (hiddenPicker && hexInput && preview) {
        // –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ü–≤–µ—Ç–∞ –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã
        hiddenPicker.addEventListener('input', function() {
            const color = this.value.toUpperCase();
            hexInput.value = color;
            preview.style.background = color;
        });
        
        // –ü—Ä–∏ –≤–≤–æ–¥–µ HEX –∫–æ–¥–∞ –≤—Ä—É—á–Ω—É—é
        hexInput.addEventListener('input', function() {
            let value = this.value.trim();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º # –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if (value && !value.startsWith('#')) {
                value = '#' + value;
                this.value = value;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å HEX
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                hiddenPicker.value = value;
                preview.style.background = value;
            }
        });
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞
    window.currentColorPickerId = colorId;
}

// –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã –í –ú–û–î–ê–õ–¨–ù–û–ú –û–ö–ù–ï
function selectQuickColor(color) {
    const hiddenPicker = document.getElementById('hiddenColorPicker');
    const hexInput = document.getElementById('colorPickerHex');
    const preview = document.getElementById('modalColorPreview');

    if (hiddenPicker) hiddenPicker.value = color;
    if (hexInput) hexInput.value = color.toUpperCase();
    if (preview) preview.style.background = color;

}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
function saveSelectedColor(colorId) {
    const selectedColor = document.getElementById('colorPickerHex')?.value || '#667eea';
    
    const input = document.getElementById(colorId + 'Input');
    const preview = document.getElementById(colorId + 'Preview');
    const valueSpan = document.getElementById(colorId + 'Value');
    
    if (input) input.value = selectedColor;
    if (preview) preview.style.background = selectedColor;
    if (valueSpan) valueSpan.textContent = selectedColor;
    
    setDirty();
    closeModal();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞
function updateColorFromPicker(colorId) {
    const input = document.getElementById(colorId + 'Input');
    const preview = document.getElementById(colorId + 'Preview');
    const valueSpan = document.getElementById(colorId + 'Value');
    
    if (input && preview) {
        preview.style.background = input.value;
    }
    
    if (valueSpan) {
        valueSpan.textContent = input.value;
    }
    
    setDirty();
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ –±—ã—Å—Ç—Ä–æ–π –ø–∞–ª–∏—Ç—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
let lastClickedColorPreview = null; // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∏–∫–Ω—É—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç

function applyPaletteColor(color) {
    // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø—Ä–µ–≤—å—é —Ü–≤–µ—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const allPreviews = document.querySelectorAll('.color-preview');
    
    // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∏–∫–Ω—É—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç - –ø—Ä–∏–º–µ–Ω—è–µ–º –∫ –Ω–µ–º—É
    if (lastClickedColorPreview) {
        const colorId = lastClickedColorPreview.id.replace('Preview', '');
        const input = document.getElementById(colorId + 'Input');
        const valueSpan = document.getElementById(colorId + 'Value');
        
        lastClickedColorPreview.style.background = color;
        if (input) input.value = color;
        if (valueSpan) valueSpan.textContent = color.toUpperCase();

        setDirty();
    } else {
        // –ï—Å–ª–∏ –Ω–µ –±—ã–ª–æ –∫–ª–∏–∫–∞ - –ø—Ä–∏–º–µ–Ω—è–µ–º –∫ –ø–µ—Ä–≤–æ–º—É –¥–æ—Å—Ç—É–ø–Ω–æ–º—É
        if (allPreviews.length > 0) {
            const firstPreview = allPreviews[0];
            const colorId = firstPreview.id.replace('Preview', '');
            const input = document.getElementById(colorId + 'Input');
            const valueSpan = document.getElementById(colorId + 'Value');

            firstPreview.style.background = color;
            if (input) input.value = color;
            if (valueSpan) valueSpan.textContent = color.toUpperCase();

            setDirty();
        }
    }
}

// Widget Customization Functions
function initializeWidgetGrid() {
    const widgetTypes = [
        { id: 'neural', name: 'Neural Network Pulse', class: 'widget-preview-neural', color: '#667eea', icon: 'üí¨' },
        { id: 'blob', name: 'Morphing Blob', class: 'widget-preview-blob', color: '#f093fb', icon: 'üòä' },
        { id: 'ring', name: 'Minimal Ring', class: 'widget-preview-ring', color: '#667eea', icon: 'üí¨' },
        { id: 'robot', name: 'AI Robot Assistant', class: 'widget-preview-robot', color: '#6366f1', icon: 'ü§ñ' },
        { id: 'finance', name: 'Financial Advisor', class: 'widget-preview-finance', color: '#10b981', icon: 'üí∞' },
        { id: 'medical', name: 'Medical Support', class: 'widget-preview-medical', color: '#ef4444', icon: '‚öïÔ∏è' },
        { id: 'education', name: 'Education & Learning', class: 'widget-preview-education', color: '#f59e0b', icon: 'üìö' },
        { id: 'expert', name: 'Expert Consulting', class: 'widget-preview-expert', color: '#3b82f6', icon: 'üë®‚Äçüíº' },
        { id: 'support', name: '24/7 Online Support', class: 'widget-preview-support', color: '#8b5cf6', icon: 'üí¨' },
        { id: 'shopping', name: 'Shopping Assistant', class: 'widget-preview-shopping', color: '#ec4899', icon: 'üõçÔ∏è' },
        { id: 'tech', name: 'Tech Support', class: 'widget-preview-tech', color: '#6b7280', icon: 'üîß' },
        { id: 'travel', name: 'Travel Agent', class: 'widget-preview-travel', color: '#06b6d4', icon: '‚úàÔ∏è' },
        { id: 'legal', name: 'Legal Advisor', class: 'widget-preview-legal', color: '#713f12', icon: '‚öñÔ∏è' },
        { id: 'crypto', name: 'Crypto Trading Bot', class: 'widget-preview-crypto', color: '#f7931a', icon: '‚Çø' },
        { id: 'food', name: 'Food Delivery', class: 'widget-preview-food', color: '#ff6b6b', icon: 'üçï' },
        { id: 'fitness', name: 'Fitness Coach', class: 'widget-preview-fitness', color: '#ff6348', icon: 'üí™' },
        { id: 'realestate', name: 'Real Estate Agent', class: 'widget-preview-realestate', color: '#4ecdc4', icon: 'üè†' },
        { id: 'weather', name: 'Weather Assistant', class: 'widget-preview-weather', color: '#56ccf2', icon: 'üå§Ô∏è' },
        { id: 'car', name: 'Car Service Bot', class: 'widget-preview-car', color: '#30cfd0', icon: 'üöó' },
        { id: 'photo', name: 'Photography Studio', class: 'widget-preview-photo', color: '#ffecd2', icon: 'üì∏' }
    ];

    const grid = document.getElementById('widgetTypeGrid');
    if (!grid) return;

    grid.innerHTML = '';

    widgetTypes.forEach((widget, index) => {
        const card = document.createElement('div');
        card.className = 'widget-type-card';
        if (index === 0) card.classList.add('selected'); // Select first widget by default
        card.dataset.widgetId = widget.id;
        card.dataset.widgetName = widget.name;
        card.dataset.widgetColor = widget.color;
        card.dataset.widgetIcon = widget.icon;

        card.innerHTML = `
            <div class="widget-preview ${widget.class}"></div>
            <div class="widget-name">${widget.name}</div>
        `;

        card.addEventListener('click', function() {
            selectWidget(this);
        });

        grid.appendChild(card);
    });
}

function selectWidget(card) {
    // Remove selected class from all cards
    document.querySelectorAll('.widget-type-card').forEach(c => {
        c.classList.remove('selected');
    });

    // Add selected class to clicked card
    card.classList.add('selected');

    // Apply widget's original color and icon
    const widgetColor = card.dataset.widgetColor;
    const widgetIcon = card.dataset.widgetIcon;

    if (widgetColor) {
        const colorInput = document.getElementById('widgetPrimaryColor');
        if (colorInput) {
            colorInput.value = widgetColor;
        }
    }

    if (widgetIcon) {
        const iconInput = document.getElementById('widgetIcon');
        if (iconInput) {
            iconInput.value = widgetIcon;
        }
    }

    setDirty();
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∫–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function initializeBaseWidgetGrid() {
    const widgetTypes = [
        { id: 'neural', name: 'Neural Network Pulse', class: 'widget-preview-neural', color: '#667eea', icon: 'üí¨' },
        { id: 'blob', name: 'Morphing Blob', class: 'widget-preview-blob', color: '#f093fb', icon: 'üòä' },
        { id: 'ring', name: 'Minimal Ring', class: 'widget-preview-ring', color: '#667eea', icon: 'üí¨' },
        { id: 'robot', name: 'AI Robot Assistant', class: 'widget-preview-robot', color: '#6366f1', icon: 'ü§ñ' },
        { id: 'finance', name: 'Financial Advisor', class: 'widget-preview-finance', color: '#10b981', icon: 'üí∞' },
        { id: 'medical', name: 'Medical Support', class: 'widget-preview-medical', color: '#ef4444', icon: '‚öïÔ∏è' },
        { id: 'education', name: 'Education & Learning', class: 'widget-preview-education', color: '#f59e0b', icon: 'üìö' },
        { id: 'expert', name: 'Expert Consulting', class: 'widget-preview-expert', color: '#3b82f6', icon: 'üë®‚Äçüíº' },
        { id: 'support', name: '24/7 Online Support', class: 'widget-preview-support', color: '#8b5cf6', icon: 'üí¨' },
        { id: 'shopping', name: 'Shopping Assistant', class: 'widget-preview-shopping', color: '#ec4899', icon: 'üõçÔ∏è' },
        { id: 'tech', name: 'Tech Support', class: 'widget-preview-tech', color: '#6b7280', icon: 'üîß' },
        { id: 'travel', name: 'Travel Agent', class: 'widget-preview-travel', color: '#06b6d4', icon: '‚úàÔ∏è' },
        { id: 'legal', name: 'Legal Advisor', class: 'widget-preview-legal', color: '#713f12', icon: '‚öñÔ∏è' },
        { id: 'crypto', name: 'Crypto Trading Bot', class: 'widget-preview-crypto', color: '#f7931a', icon: '‚Çø' },
        { id: 'food', name: 'Food Delivery', class: 'widget-preview-food', color: '#ff6b6b', icon: 'üçï' },
        { id: 'fitness', name: 'Fitness Coach', class: 'widget-preview-fitness', color: '#ff6348', icon: 'üí™' },
        { id: 'realestate', name: 'Real Estate Agent', class: 'widget-preview-realestate', color: '#4ecdc4', icon: 'üè†' },
        { id: 'weather', name: 'Weather Assistant', class: 'widget-preview-weather', color: '#56ccf2', icon: 'üå§Ô∏è' },
        { id: 'car', name: 'Car Service Bot', class: 'widget-preview-car', color: '#30cfd0', icon: 'üöó' },
        { id: 'photo', name: 'Photography Studio', class: 'widget-preview-photo', color: '#ffecd2', icon: 'üì∏' }
    ];

    const grid = document.getElementById('baseWidgetTypeGrid');
    if (!grid) return;

    grid.innerHTML = '';

    widgetTypes.forEach((widget, index) => {
        const card = document.createElement('div');
        card.className = 'widget-type-card';
        if (index === 0) card.classList.add('selected'); // Select first widget by default
        card.dataset.widgetId = widget.id;
        card.dataset.widgetName = widget.name;
        card.dataset.widgetColor = widget.color;
        card.dataset.widgetIcon = widget.icon;

        card.innerHTML = `
            <div class="widget-preview ${widget.class}"></div>
            <div class="widget-name">${widget.name}</div>
        `;

        card.addEventListener('click', function() {
            selectBaseWidget(this);
        });

        grid.appendChild(card);
    });
}

function selectBaseWidget(card) {
    // Remove selected class from all cards
    document.querySelectorAll('#baseWidgetTypeGrid .widget-type-card').forEach(c => {
        c.classList.remove('selected');
    });

    // Add selected class to clicked card
    card.classList.add('selected');

    // Apply widget's original color and icon
    const widgetColor = card.dataset.widgetColor;
    const widgetIcon = card.dataset.widgetIcon;

    if (widgetColor) {
        const colorInput = document.getElementById('baseWidgetPrimaryColorInput');
        const colorPreview = document.getElementById('baseWidgetPrimaryColorPreview');
        const colorValue = document.getElementById('baseWidgetPrimaryColorValue');
        if (colorInput) colorInput.value = widgetColor;
        if (colorPreview) colorPreview.style.background = widgetColor;
        if (colorValue) colorValue.textContent = widgetColor;
    }

    if (widgetIcon) {
        const iconInput = document.getElementById('baseWidgetIcon');
        if (iconInput) {
            iconInput.value = widgetIcon;
        }
    }

    setDirty();
}

function updateWidgetSpeedValue(value) {
    const valueSpan = document.getElementById('widgetAnimationSpeedValue');
    if (valueSpan) {
        valueSpan.textContent = value + 's';
    }
}

function updateWidgetSizeValue(value) {
    const valueSpan = document.getElementById('widgetSizeValue');
    if (valueSpan) {
        valueSpan.textContent = value + 'px';
    }
}

// –ë–∞–∑–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function updateBaseWidgetSpeedValue(value) {
    const valueSpan = document.getElementById('baseWidgetAnimationSpeedValue');
    if (valueSpan) {
        valueSpan.textContent = value + 's';
    }
}

function updateBaseWidgetSizeValue(value) {
    const valueSpan = document.getElementById('baseWidgetSizeValue');
    if (valueSpan) {
        valueSpan.textContent = value + 'px';
    }
}

// –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ rgb –≤ hex —Ñ–æ—Ä–º–∞—Ç
function rgbToHex(rgb) {
    // –ü–∞—Ä—Å–∏–º rgb(r, g, b) –∏–ª–∏ rgba(r, g, b, a)
    const match = rgb.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]).toString(16).padStart(2, '0');
        const g = parseInt(match[2]).toString(16).padStart(2, '0');
        const b = parseInt(match[3]).toString(16).padStart(2, '0');
        return '#' + r + g + b;
    }
    return rgb; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
// –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
function showGradientEditor() {
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞: –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–í–Ω–µ—à–Ω–∏–π –≤–∏–¥"
    const headerPreview = document.getElementById('headerGradientPreview');
    const appearancePreview = document.getElementById('appearanceHeaderGradientPreview');
    const activePreview = appearancePreview || headerPreview;
    const currentGradient = activePreview?.style.background || '';

    // –ü–∞—Ä—Å–∏–º –≥—Ä–∞–¥–∏–µ–Ω—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    let color1 = '#667eea';
    let color2 = '#764ba2';
    let direction = '135deg';

    // –£–ª—É—á—à–µ–Ω–Ω—ã–π regex –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
    const gradientMatch = currentGradient.match(/linear-gradient\(([^,]+),\s*(.+?)\s+0%,\s*(.+?)\s+100%\)/);
    if (gradientMatch) {
        direction = gradientMatch[1].trim();
        let c1 = gradientMatch[2].trim();
        let c2 = gradientMatch[3].trim();

        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º rgb –≤ hex –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (c1.startsWith('rgb')) {
            c1 = rgbToHex(c1);
        }
        if (c2.startsWith('rgb')) {
            c2 = rgbToHex(c2);
        }

        color1 = c1;
        color2 = c2;
    }
    
    const modal = createModal(t('modal.gradient_editor_title'), `
        <div class="form-group">
            <label class="form-label">${t('modal.gradient_start_color')}</label>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div style="position: relative;">
                    <div class="color-preview-large" id="gradient1Preview" style="width: 60px; height: 60px; background: ${color1}; border-radius: 8px; cursor: pointer; border: 2px solid #e5e7eb;" onclick="document.getElementById('gradient1Picker').click()"></div>
                    <input type="color" id="gradient1Picker" value="${color1}" style="position: absolute; opacity: 0; width: 0; height: 0; pointer-events: none;">
                </div>
                <input type="text" id="gradient1Hex" value="${color1}" class="form-control" placeholder="#667eea" style="flex: 1;">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_end_color')}</label>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div style="position: relative;">
                    <div class="color-preview-large" id="gradient2Preview" style="width: 60px; height: 60px; background: ${color2}; border-radius: 8px; cursor: pointer; border: 2px solid #e5e7eb;" onclick="document.getElementById('gradient2Picker').click()"></div>
                    <input type="color" id="gradient2Picker" value="${color2}" style="position: absolute; opacity: 0; width: 0; height: 0; pointer-events: none;">
                </div>
                <input type="text" id="gradient2Hex" value="${color2}" class="form-control" placeholder="#764ba2" style="flex: 1;">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_direction')}</label>
            <select class="form-control" id="gradientDirection" onchange="updateGradientPreview()">
                <option value="135deg" ${direction === '135deg' ? 'selected' : ''}>${t('modal.gradient_direction_diagonal')}</option>
                <option value="90deg" ${direction === '90deg' ? 'selected' : ''}>${t('modal.gradient_direction_left_right')}</option>
                <option value="180deg" ${direction === '180deg' ? 'selected' : ''}>${t('modal.gradient_direction_top_bottom')}</option>
                <option value="0deg" ${direction === '0deg' ? 'selected' : ''}>${t('modal.gradient_direction_bottom_top')}</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_preview')}</label>
            <div id="gradientLivePreview" style="width: 100%; height: 60px; border-radius: 8px; background: linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)"></div>
        </div>
    `, saveGradient);
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ü–≤–µ—Ç–∞
    const picker1 = document.getElementById('gradient1Picker');
    const hex1 = document.getElementById('gradient1Hex');
    const preview1 = document.getElementById('gradient1Preview');
    
    if (picker1 && hex1 && preview1) {
        picker1.addEventListener('input', function() {
            const color = this.value.toUpperCase();
            hex1.value = color;
            preview1.style.background = color;
            updateGradientPreview();
        });
        
        hex1.addEventListener('input', function() {
            let value = this.value.trim();
            if (value && !value.startsWith('#')) {
                value = '#' + value;
                this.value = value;
            }
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                picker1.value = value;
                preview1.style.background = value;
                updateGradientPreview();
            }
        });
    }
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ü–≤–µ—Ç–∞
    const picker2 = document.getElementById('gradient2Picker');
    const hex2 = document.getElementById('gradient2Hex');
    const preview2 = document.getElementById('gradient2Preview');
    
    if (picker2 && hex2 && preview2) {
        picker2.addEventListener('input', function() {
            const color = this.value.toUpperCase();
            hex2.value = color;
            preview2.style.background = color;
            updateGradientPreview();
        });
        
        hex2.addEventListener('input', function() {
            let value = this.value.trim();
            if (value && !value.startsWith('#')) {
                value = '#' + value;
                this.value = value;
            }
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                picker2.value = value;
                preview2.style.background = value;
                updateGradientPreview();
            }
        });
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
function updateGradientPreview() {
    const color1 = document.getElementById('gradient1Hex')?.value || '#667eea';
    const color2 = document.getElementById('gradient2Hex')?.value || '#764ba2';
    const direction = document.getElementById('gradientDirection')?.value || '135deg';
    
    const gradient = `linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)`;
    
    const preview = document.getElementById('gradientLivePreview');
    if (preview) {
        preview.style.background = gradient;
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
function saveGradient() {
    const color1 = document.getElementById('gradient1Hex')?.value || '#667eea';
    const color2 = document.getElementById('gradient2Hex')?.value || '#764ba2';
    const direction = document.getElementById('gradientDirection')?.value || '135deg';
    
    const gradient = `linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)`;
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç –∫ –ø—Ä–µ–≤—å—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const headerPreview = document.getElementById('headerGradientPreview');
    if (headerPreview) {
        headerPreview.style.background = gradient;
    }
    
    // –ï—Å–ª–∏ –µ—Å—Ç—å –≤—Ç–æ—Ä–æ–π –ø—Ä–µ–≤—å—é –≤–æ –≤–∫–ª–∞–¥–∫–µ "–í–Ω–µ—à–Ω–∏–π –≤–∏–¥"
    const appearancePreview = document.getElementById('appearanceHeaderGradientPreview');
    if (appearancePreview) {
        appearancePreview.style.background = gradient;
    }
    
    setDirty();
    closeModal();
    
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–ª–∏—Ç—Ä—ã —Ü–≤–µ—Ç–æ–≤ (—Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
function openColorPicker(previewElement, inputId) {
    const input = document.getElementById(inputId + 'Input');
    if (input) {
        input.click();
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é —Ü–≤–µ—Ç–∞ (—Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
function updateColorPreview(input, previewId) {
    const preview = document.getElementById(previewId);
    if (preview) {
        preview.style.background = input.value;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä—è–¥–æ–º
    const colorId = previewId.replace('Preview', '');
    const valueSpan = document.getElementById(colorId + 'Value');
    if (valueSpan) {
        valueSpan.textContent = input.value;
    }
}

// ===============================================
// –§–£–ù–ö–¶–ò–ò –†–ê–ë–û–¢–´ –° –¶–í–ï–¢–ê–ú–ò
// ===============================================
function openColorPicker(previewElement, inputId) {
    const input = document.getElementById(inputId + 'Input');
    if (input) {
        input.click();
    }
}

function updateColorPreview(input, previewId) {
    const preview = document.getElementById(previewId);
    if (preview) {
        preview.style.background = input.value;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä—è–¥–æ–º
    const textSpan = input.nextElementSibling;
    if (textSpan && textSpan.tagName === 'SPAN') {
        textSpan.textContent = input.value;
    }
}

        function switchConfigTab(tab) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            function switchConfigTab(tab) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelectorAll('.tab').forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentTab = tab;
        }
        
        function switchTextLanguage(lang) {
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —è–∑—ã–∫–∞
    if (currentConfig) {
        saveCurrentLanguageData();
    }
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
    if (currentConfig) {
        loadConfigData(currentConfig);
    }
    
    setDirty();
}
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelectorAll('.tab').forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentTab = tab;
        }
        
        function switchTextLanguage(lang) {
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —è–∑—ã–∫–∞
    if (currentConfig) {
        saveCurrentLanguageData();
    }
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
    if (currentConfig) {
        loadConfigData(currentConfig);
    }
    
    setDirty();
}

function saveCurrentLanguageData() {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Ç–µ–∫—Å—Ç—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —è–∑—ã–∫–∞
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';

    // –°–æ–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞ (–Ω–µ –≤—ã–∑—ã–≤–∞–µ–º collectConfigData)
    const currentLangData = {
        headerTitle: document.getElementById('headerTitleInput')?.value || '',
        headerSubtitle: document.getElementById('headerSubtitleInput')?.value || '',
        welcomeMessage: document.getElementById('welcomeMessageEditor')?.innerHTML || '',
        quickButtons: []
    };

    // –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏
    document.querySelectorAll('#quickButtonsList .quick-button-item').forEach(item => {
        const inputs = item.querySelectorAll('input');
        if (inputs.length >= 2 && inputs[0].value) {
            currentLangData.quickButtons.push({
                text: inputs[0].value,
                message: inputs[1].value
            });
        }
    });

    // –í—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç–∏
    if (!window.tempConfigData) {
        window.tempConfigData = {};
    }
    if (!window.tempConfigData[currentConfig]) {
        window.tempConfigData[currentConfig] = {};
    }
    window.tempConfigData[currentConfig][currentLang] = currentLangData;

}

        function toggleSwitch(element) {
    element.classList.toggle('active');
    
    // ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏—è
    if (element.id === 'autoOpenToggle') {
        const delayGroup = document.getElementById('autoOpenDelayGroup');
        if (delayGroup) {
            if (element.classList.contains('active')) {
                delayGroup.style.display = 'block';
            } else {
                delayGroup.style.display = 'none';
            }
        }
    }
    
    // ‚úÖ –ù–û–í–û–ï: –î–ª—è –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    if (element.id === 'baseAutoOpenToggle') {
        const delayGroup = document.getElementById('baseAutoOpenDelayGroup');
        if (delayGroup) {
            if (element.classList.contains('active')) {
                delayGroup.style.display = 'block';
            } else {
                delayGroup.style.display = 'none';
            }
        }
    }
    
    setDirty();
}

        function saveConfiguration() {
    showSaveIndicator('saving');

    // –°–æ–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    const fieldsToUpdate = collectGlobalSettingsFields();


    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å —Ç–∏–ø–æ–º 'global-partial' –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'global-partial',
            fields: fieldsToUpdate
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showSaveIndicator('success', t('save.global_saved'));
            isDirty = false;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø–∞–º—è—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
            if (window.GlobalConfigSettings) {
                Object.assign(window.GlobalConfigSettings, fieldsToUpdate);
            }

            // ‚úÖ –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            if (typeof createBackup === 'function') {
                createBackup();
            }
        } else {
            showSaveIndicator('error', data.error || t('save.save_error'));
        }
    })
    .catch(error => {
        showSaveIndicator('error', t('save.server_error'));
    });
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ –¢–û–õ–¨–ö–û –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function collectGlobalSettingsFields() {
    const fields = {};

    // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    const switcherToggle = document.querySelector('#global-settings .toggle-wrapper:first-child .toggle-switch');
    if (switcherToggle) {
        fields.showConfigSwitcher = switcherToggle.classList.contains('active');
    }

    // API Key
    const apiKeyInput = document.getElementById('globalApiKey');
    if (apiKeyInput && apiKeyInput.value) {
        fields.apiKey = apiKeyInput.value;
    }

    // –î—Ä—É–≥–∏–µ –ø–æ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
    // –ù–∞–ø—Ä–∏–º–µ—Ä:
    // - –ø–æ–∑–∏—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
    // - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    // - –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–µ–º–∞
    // –∏ —Ç.–¥.

    return fields;
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–£–°–¢–ê–†–ï–õ–ê, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è collectGlobalSettingsFields)
function collectGlobalSettings() {
    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ë–µ—Ä–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–∞–º—è—Ç–∏
    const settings = window.GlobalConfigSettings ? {...window.GlobalConfigSettings} : {};

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

    // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    const switcherToggle = document.querySelector('#global-settings .toggle-wrapper:first-child .toggle-switch');
    if (switcherToggle) {
        settings.showConfigSwitcher = switcherToggle.classList.contains('active');
    }

    // –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å

    return settings;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GDPR SETTINGS FUNCTIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ (collapse/expand)
function toggleSubsection(header) {
    const subsection = header.parentElement;
    subsection.classList.toggle('collapsed');
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è Pre-Chat —Ñ–æ—Ä–º—ã
function updatePreChatField(fieldId, property, value) {

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    if (!window.GlobalConfigSettings) {
        window.GlobalConfigSettings = {};
    }
    if (!window.GlobalConfigSettings.gdpr) {
        window.GlobalConfigSettings.gdpr = {};
    }
    if (!window.GlobalConfigSettings.gdpr.preChatForm) {
        window.GlobalConfigSettings.gdpr.preChatForm = {};
    }
    if (!window.GlobalConfigSettings.gdpr.preChatForm.fields) {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –ø–æ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        window.GlobalConfigSettings.gdpr.preChatForm.fields = [
            { id: 'name', type: 'text', required: true, isPII: true, enabled: true },
            { id: 'email', type: 'email', required: true, isPII: true, enabled: true },
            { id: 'phone', type: 'tel', required: false, isPII: true, enabled: true },
            { id: 'company', type: 'text', required: false, isPII: false, enabled: false }
        ];
    }

    const fields = window.GlobalConfigSettings.gdpr.preChatForm.fields;
    let field = fields.find(f => f.id === fieldId);

    // –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
    if (!field) {
        field = { id: fieldId, type: fieldId === 'email' ? 'email' : (fieldId === 'phone' ? 'tel' : 'text'), required: false, isPII: fieldId !== 'company', enabled: false };
        fields.push(field);
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–≤–æ–π—Å—Ç–≤–æ
    if (property === 'enabled') {
        field.enabled = value;
    } else if (property === 'required') {
        field.required = value;
    } else if (property === 'pattern') {
        if (!field.validation) {
            field.validation = {};
        }
        field.validation.pattern = value || null;
    }

    // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    isDirty = true;
    showSaveIndicator('changed', t('save.unsaved_changes'));
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GDPR
function updateGDPRSetting(path, value) {

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º gdpr –æ–±—ä–µ–∫—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    if (!window.GlobalConfigSettings) {
        window.GlobalConfigSettings = {};
    }
    if (!window.GlobalConfigSettings.gdpr) {
        window.GlobalConfigSettings.gdpr = {};
    }

    // –†–∞–∑–±–∏–≤–∞–µ–º –ø—É—Ç—å –Ω–∞ —á–∞—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 'consentBanner.enabled')
    const parts = path.split('.');
    let current = window.GlobalConfigSettings.gdpr;

    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –ø—É—Ç–∏ –∏ —Å–æ–∑–¥–∞–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    for (let i = 0; i < parts.length - 1; i++) {
        if (!current[parts[i]]) {
            current[parts[i]] = {};
        }
        current = current[parts[i]];
    }

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    current[parts[parts.length - 1]] = value;

    // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    isDirty = true;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    let notificationMessage = t('save.unsaved_changes');

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    if (path === 'enabled') {
        notificationMessage = value ? t('gdpr.notification.enabled') : t('gdpr.notification.disabled');
    } else if (path === 'preChatForm.enabled') {
        notificationMessage = value ? t('gdpr.notification.prechat_enabled') : t('gdpr.notification.prechat_disabled');
    } else if (path.startsWith('webhooks.') && typeof value === 'string') {
        // –í–∞–ª–∏–¥–∞—Ü–∏—è URL –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
        if (value && !isValidUrl(value)) {
            showSaveIndicator('error', t('gdpr.notification.invalid_url'));
            return;
        }
        notificationMessage = t('gdpr.notification.webhook_updated');
    }

    showSaveIndicator('changed', notificationMessage);
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è URL
function isValidUrl(string) {
    if (!string) return true; // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞
    try {
        new URL(string);
        return true;
    } catch (_) {
        return false;
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –°–û–•–†–ê–ù–ï–ù–ò–ï GDPR –ù–ê–°–¢–†–û–ï–ö
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function saveGDPRSettings() {

    // –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ GlobalConfigSettings
    const existingGlobalSettings = window.GlobalConfigSettings || {};
    const existingGdpr = existingGlobalSettings.gdpr || {};

    // –°–æ–±–∏—Ä–∞–µ–º GDPR –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
    const gdprSettings = {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        ...existingGdpr,

        // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        enabled: document.getElementById('gdprEnabled')?.checked || false,
        mode: document.getElementById('gdprMode')?.value || 'strict',
        privacyPolicyUrl: document.getElementById('gdprPrivacyUrl')?.value || '',
        privacyPolicyVersion: existingGdpr.privacyPolicyVersion || '1.0',
        termsOfServiceUrl: document.getElementById('gdprTermsUrl')?.value || '',
        cookiePolicyUrl: document.getElementById('gdprCookieUrl')?.value || '',

        // –ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è
        consentBanner: {
            ...(existingGdpr.consentBanner || {}),
            enabled: document.getElementById('gdprBannerEnabled')?.checked !== false,
            blockChat: document.getElementById('gdprBannerBlock')?.checked !== false,
            position: document.getElementById('gdprBannerPosition')?.value || 'bottom',
            expireDays: parseInt(document.getElementById('gdprExpireDays')?.value) || 365,
            showDeclineButton: document.getElementById('gdprShowDecline')?.checked !== false,
            showPrivacyLink: document.getElementById('gdprShowPrivacyLink')?.checked !== false,
            showCookieLink: document.getElementById('gdprShowCookieLink')?.checked || false,
            showTermsLink: document.getElementById('gdprShowTermsLink')?.checked || false,
            showMonitoringInConsent: document.getElementById('gdprShowMonitoringInConsent')?.checked !== false
        },

        // –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
        chatHistory: {
            ...(existingGdpr.chatHistory || {}),
            encryptLocal: document.getElementById('gdprEncryptLocal')?.checked || false
        },

        // Pre-Chat —Ñ–æ—Ä–º–∞
        preChatForm: {
            ...(existingGdpr.preChatForm || {}),
            enabled: document.getElementById('gdprPreChatEnabled')?.checked || false,
            showAfterConsent: document.getElementById('gdprPreChatAfterConsent')?.checked !== false,
            displayMode: document.getElementById('gdprPreChatDisplayMode')?.value || 'modal',
            gdprCheckbox: {
                ...(existingGdpr.preChatForm?.gdprCheckbox || {}),
                enabled: document.getElementById('gdprPreChatGdprCheckbox')?.checked !== false
            }
        },

        // AI Disclosure
        aiDisclosure: {
            ...(existingGdpr.aiDisclosure || {}),
            enabled: document.getElementById('gdprAIEnabled')?.checked !== false,
            showInWelcome: document.getElementById('gdprAIShowInWelcome')?.checked !== false,
            showInConsent: document.getElementById('gdprAIShowInConsent')?.checked !== false
        },

        // Privacy Controls
        privacyControls: {
            ...(existingGdpr.privacyControls || {}),
            enabled: document.getElementById('gdprPrivacyEnabled')?.checked !== false,
            options: {
                ...(existingGdpr.privacyControls?.options || {}),
                viewData: document.getElementById('gdprOptViewData')?.checked !== false,
                editData: document.getElementById('gdprOptEditData')?.checked !== false,
                exportData: document.getElementById('gdprOptExportData')?.checked !== false,
                deleteHistory: document.getElementById('gdprOptDeleteHistory')?.checked !== false,
                revokeConsent: document.getElementById('gdprOptRevokeConsent')?.checked !== false,
                deleteAllData: document.getElementById('gdprOptDeleteAll')?.checked !== false
            }
        },

        // Webhooks
        webhooks: {
            ...(existingGdpr.webhooks || {}),
            consent: document.getElementById('gdprWebhookConsent')?.value || '',
            preChatForm: document.getElementById('gdprWebhookPreChat')?.value || '',
            dataAccess: document.getElementById('gdprWebhookDataAccess')?.value || '',
            dataExport: document.getElementById('gdprWebhookDataExport')?.value || '',
            dataDelete: document.getElementById('gdprWebhookDataDelete')?.value || '',
            consentRevoke: document.getElementById('gdprWebhookConsentRevoke')?.value || ''
        },

        // Advanced - Geolocation
        advanced: {
            ...(existingGdpr.advanced || {}),
            geoLocation: {
                ...(existingGdpr.advanced?.geoLocation || {}),
                enabled: document.getElementById('gdprGeoEnabled')?.checked === true,
                detectionMode: document.getElementById('gdprDetectionMode')?.value || 'manual',
                strictForEU: document.getElementById('gdprStrictForEU')?.checked !== false
            }
        }
    };


    // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const updatedGlobalSettings = {
        ...existingGlobalSettings,
        gdpr: gdprSettings
    };

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    showSaveIndicator('saving', t('gdpr.saving'));

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'global',
            globalSettings: updatedGlobalSettings
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showSaveIndicator('success', t('gdpr.saved'));
            isDirty = false;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø–∞–º—è—Ç–∏
            window.GlobalConfigSettings = updatedGlobalSettings;

        } else {
            showSaveIndicator('error', data.error || t('gdpr.save_error'));
        }
    })
    .catch(error => {
        showSaveIndicator('error', t('save.server_error'));
    });
}

// –ó–∞–≥—Ä—É–∑–∫–∞ GDPR –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ñ–æ—Ä–º—É
function loadGDPRSettings() {
    const gdpr = window.GlobalConfigSettings?.gdpr || {};

    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    setCheckboxValue('gdprEnabled', gdpr.enabled);
    setSelectValue('gdprMode', gdpr.mode || 'strict');
    setInputValue('gdprPrivacyUrl', gdpr.privacyPolicyUrl);
    setInputValue('gdprTermsUrl', gdpr.termsOfServiceUrl);
    setInputValue('gdprCookieUrl', gdpr.cookiePolicyUrl);

    // –ë–∞–Ω–Ω–µ—Ä —Å–æ–≥–ª–∞—Å–∏—è
    setCheckboxValue('gdprBannerEnabled', gdpr.consentBanner?.enabled !== false);
    setCheckboxValue('gdprBannerBlock', gdpr.consentBanner?.blockChat !== false);
    setSelectValue('gdprBannerPosition', gdpr.consentBanner?.position || 'bottom');
    setInputValue('gdprExpireDays', gdpr.consentBanner?.expireDays || 365);
    setCheckboxValue('gdprShowDecline', gdpr.consentBanner?.showDeclineButton !== false);
    setCheckboxValue('gdprShowPrivacyLink', gdpr.consentBanner?.showPrivacyLink !== false);
    setCheckboxValue('gdprShowCookieLink', gdpr.consentBanner?.showCookieLink || false);
    setCheckboxValue('gdprShowTermsLink', gdpr.consentBanner?.showTermsLink || false);
    setCheckboxValue('gdprShowMonitoringInConsent', gdpr.consentBanner?.showMonitoringInConsent !== false);

    // –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
    setCheckboxValue('gdprEncryptLocal', gdpr.chatHistory?.encryptLocal || false);

    // Pre-Chat —Ñ–æ—Ä–º–∞
    setCheckboxValue('gdprPreChatEnabled', gdpr.preChatForm?.enabled);
    setCheckboxValue('gdprPreChatAfterConsent', gdpr.preChatForm?.showAfterConsent !== false);
    setCheckboxValue('gdprPreChatGdprCheckbox', gdpr.preChatForm?.gdprCheckbox?.enabled !== false);
    setSelectValue('gdprPreChatDisplayMode', gdpr.preChatForm?.displayMode || 'modal');

    // Pre-Chat –ø–æ–ª—è
    const fields = gdpr.preChatForm?.fields || [];
    const fieldDefaults = { name: true, email: true, phone: true, company: false };
    const requiredDefaults = { name: true, email: true, phone: false, company: false };

    ['name', 'email', 'phone', 'company'].forEach(fieldId => {
        const field = fields.find(f => f.id === fieldId);
        const isEnabled = field ? (field.enabled !== false) : fieldDefaults[fieldId];
        const isRequired = field ? field.required : requiredDefaults[fieldId];
        const pattern = field?.validation?.pattern || '';

        setCheckboxValue(`gdprField${capitalize(fieldId)}Enabled`, isEnabled);
        setCheckboxValue(`gdprField${capitalize(fieldId)}Required`, isRequired);
        setInputValue(`gdprField${capitalize(fieldId)}Pattern`, pattern);
    });

    // AI Disclosure
    setCheckboxValue('gdprAIEnabled', gdpr.aiDisclosure?.enabled !== false);
    setCheckboxValue('gdprAIShowInWelcome', gdpr.aiDisclosure?.showInWelcome !== false);
    setCheckboxValue('gdprAIShowInConsent', gdpr.aiDisclosure?.showInConsent !== false);

    // Privacy Controls
    setCheckboxValue('gdprPrivacyEnabled', gdpr.privacyControls?.enabled !== false);
    setCheckboxValue('gdprOptViewData', gdpr.privacyControls?.options?.viewData !== false);
    setCheckboxValue('gdprOptEditData', gdpr.privacyControls?.options?.editData !== false);
    setCheckboxValue('gdprOptExportData', gdpr.privacyControls?.options?.exportData !== false);
    setCheckboxValue('gdprOptDeleteHistory', gdpr.privacyControls?.options?.deleteHistory !== false);
    setCheckboxValue('gdprOptRevokeConsent', gdpr.privacyControls?.options?.revokeConsent !== false);
    setCheckboxValue('gdprOptDeleteAll', gdpr.privacyControls?.options?.deleteAllData !== false);

    // Webhooks
    setInputValue('gdprWebhookConsent', gdpr.webhooks?.consent);
    setInputValue('gdprWebhookPreChat', gdpr.webhooks?.preChatForm);
    setInputValue('gdprWebhookDataAccess', gdpr.webhooks?.dataAccess);
    setInputValue('gdprWebhookDataExport', gdpr.webhooks?.dataExport);
    setInputValue('gdprWebhookDataDelete', gdpr.webhooks?.dataDelete);
    setInputValue('gdprWebhookConsentRevoke', gdpr.webhooks?.consentRevoke);

    // Geolocation settings
    setCheckboxValue('gdprGeoEnabled', gdpr.advanced?.geoLocation?.enabled === true);
    setSelectValue('gdprDetectionMode', gdpr.advanced?.geoLocation?.detectionMode || 'manual');
    setCheckboxValue('gdprStrictForEU', gdpr.advanced?.geoLocation?.strictForEU !== false);

}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π
function capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
}

function setCheckboxValue(id, value) {
    const el = document.getElementById(id);
    if (el) el.checked = !!value;
}

function setSelectValue(id, value) {
    const el = document.getElementById(id);
    if (el && value) el.value = value;
}

function setInputValue(id, value) {
    const el = document.getElementById(id);
    if (el && value !== undefined && value !== null) el.value = value;
}

        function saveConfig() {
    try {
        
        const configData = collectConfigData();

        showSaveIndicator('saving', t('save.saving'));

        fetch('save-webchat-config.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                type: 'config',
                configId: currentConfig,
                configData: configData
            })
        })
        .then(response => response.json())
        .then(data => {

            if (data.success) {
                showSaveIndicator('success', t('save.config_saved'));
                isDirty = false;

                // ‚úÖ –ù–û–í–û–ï: –û—á–∏—â–∞–µ–º –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                if (window.pendingChanges && currentConfig) {
                    delete window.pendingChanges[currentConfig];
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø–∞–º—è—Ç–∏
                if (window[currentConfig]) {
                    Object.assign(window[currentConfig], configData);
                }
                if (window.ChatConfigs) {
                    const shortName = currentConfig.replace('Config', '');
                    window.ChatConfigs[shortName] = configData;
                }

                // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º order –≤ GlobalConfigSettings.availableConfigs
                if (window.GlobalConfigSettings && window.GlobalConfigSettings.availableConfigs && configData.switcherSettings?.order) {
                    if (!window.GlobalConfigSettings.availableConfigs[currentConfig]) {
                        window.GlobalConfigSettings.availableConfigs[currentConfig] = { enabled: true };
                    }
                    window.GlobalConfigSettings.availableConfigs[currentConfig].order = configData.switcherSettings.order;

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    fetch('save-webchat-config.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            type: 'global',
                            globalSettings: window.GlobalConfigSettings
                        })
                    }).then(res => res.json()).then(result => {
                        if (result.success) {
                        }
                    });
                }


                // ‚úÖ –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                if (typeof createBackup === 'function') {
                    createBackup();
                }

                // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–π –∏–∫–æ–Ω–∫–∏
                setTimeout(() => {
                    if (typeof updateSidebarConfigs === 'function') {
                        updateSidebarConfigs();
                    }
                }, 100);

                // ‚úÖ –ù–û–í–û–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                setTimeout(() => {
                    if (typeof updatePreview === 'function') {
                        updatePreview();
                    }
                }, 500);
            } else {
                showSaveIndicator('error', data.error || t('save.save_error'));
            }
        })
        .catch(error => {
            showSaveIndicator('error', t('save.server_error'));
        });

    } catch (error) {
        showSaveIndicator('error', t('save.critical_error'));
    }
}

function saveBaseSettings() {

    const baseSettings = collectBaseSettings();

    showSaveIndicator('saving', t('save.saving_base'));

    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'base',
            baseConfig: baseSettings
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showSaveIndicator('success', t('save.base_saved'));
            isDirty = false;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø–∞–º—è—Ç–∏
            if (window.baseConfig) {
                Object.assign(window.baseConfig, baseSettings);
            }
        } else {
            showSaveIndicator('error', data.error || t('save.save_error'));
        }
    })
    .catch(error => {
        showSaveIndicator('error', t('save.server_error'));
    });
}

// –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function collectConfigData() {
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è labels/descriptions
    const existingConfig = window[currentConfig] || {};
    const existingLabels = existingConfig.switcherSettings?.labels || {};
    const existingDescriptions = existingConfig.switcherSettings?.descriptions || {};

    const data = {
        configId: currentConfig,
        internalConfigName: currentConfig,
        // ‚úÖ –ù–û–í–û–ï: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    _debug: (() => {
        return true;
    })(),
        useIndividualSettings: document.getElementById('useIndividualSettingsToggle')?.classList.contains('active') || false,

        switcherSettings: {
            enabled: true,
            labels: {...existingLabels},
            descriptions: {...existingDescriptions},
            order: parseInt(document.getElementById('switcherOrderInput')?.value) || 1
        },

        supportedLanguages: [],
        defaultLanguage: document.getElementById('configDefaultLanguage')?.value || 'ru',
        language: currentLang,
        aiCoreUrl: document.getElementById('aiCoreUrlInput')?.value || 'https://n8n.cryptomator.pro/webhook/webchat-api',
        
        botInfo: {
            // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∞–≤–∞—Ç–∞—Ä –±–æ—Ç–∞ —Å –∏–∫–æ–Ω–∫–æ–π –≤–∏–¥–∂–µ—Ç–∞
            avatar: document.getElementById('widgetIcon')?.value || existingConfig.botInfo?.avatar || 'üí¨',
            name: document.getElementById('headerTitleInput')?.value || '',
            description: document.getElementById('headerSubtitleInput')?.value || ''
        },
        
        theme: {
            mode: document.getElementById('themeModeSelect')?.value || 'auto',
            preferredScheme: document.getElementById('themePreferredSchemeSelect')?.value || 'light'
        },
        
        contacts: {
            enabled: document.getElementById('contactsEnabledToggle')?.classList.contains('active') || false,
            titles: {},
            items: []
        },

        texts: {},
        appearance: {},
        behavior: {},
        technical: {}
        // ‚úÖ monitoring –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è - –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å—Å—è –∏–∑ baseConfig —á–µ—Ä–µ–∑ mergeConfigs
    };
    
    // –°–æ–±–∏—Ä–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
    document.querySelectorAll('#supportedLanguagesSelector .language-option.selected').forEach(opt => {
        const lang = opt.dataset.lang;
        if (lang) data.supportedLanguages.push(lang);
    });

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º labels –∏ descriptions –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
    const switcherLabel = document.getElementById('switcherLabelInput')?.value;
    const switcherDescription = document.getElementById('switcherDescriptionInput')?.value;
    const widgetIcon = document.getElementById('widgetIcon')?.value || 'üí¨';

    // ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–º–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ –≤ label –Ω–∞ —Ç–µ–∫—É—â—É—é –∏–∫–æ–Ω–∫—É –≤–∏–¥–∂–µ—Ç–∞
    const updateIconInLabel = (label) => {
        if (!label) return widgetIcon + ' ';

        // –£–¥–∞–ª—è–µ–º –≤—Å–µ —ç–º–æ–¥–∑–∏ –∏–∑ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
        let cleanLabel = label.trim();

        // –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â—É—é –∏–∫–æ–Ω–∫—É widgetIcon –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å
        while (cleanLabel.startsWith(widgetIcon)) {
            cleanLabel = cleanLabel.slice(widgetIcon.length).trim();
        }

        // –£–¥–∞–ª—è–µ–º –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π regex)
        // –ü–æ–≤—Ç–æ—Ä—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –µ—Å—Ç—å —ç–º–æ–¥–∑–∏
        let prevLength = -1;
        while (cleanLabel.length !== prevLength) {
            prevLength = cleanLabel.length;
            cleanLabel = cleanLabel.replace(/^[\u{1F000}-\u{1FFFF}\u{2000}-\u{3300}\u{FE00}-\u{FFFF}\s]+/u, '').trim();
        }

        // –ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ label –ø—É—Å—Ç–æ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫—É
        if (!cleanLabel) return widgetIcon + ' ';

        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –∏–∫–æ–Ω–∫—É –≤–∏–¥–∂–µ—Ç–∞
        return `${widgetIcon} ${cleanLabel}`;
    };

    // –ó–∞–ø–æ–ª–Ω—è–µ–º labels –∏ descriptions –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
    data.supportedLanguages.forEach(lang => {
        // –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è
        if (lang === currentLang && switcherLabel) {
            data.switcherSettings.labels[lang] = updateIconInLabel(switcherLabel);
        }
        // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö labels
        else if (existingLabels[lang]) {
            data.switcherSettings.labels[lang] = updateIconInLabel(existingLabels[lang]);
        }
        // –ï—Å–ª–∏ –Ω–µ—Ç label –¥–ª—è —è–∑—ã–∫–∞ - —Å–æ–∑–¥–∞–µ–º —Å –∏–∫–æ–Ω–∫–æ–π
        else {
            data.switcherSettings.labels[lang] = widgetIcon + ' ';
        }

        // Descriptions –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        if (lang === currentLang && switcherDescription) {
            data.switcherSettings.descriptions[lang] = switcherDescription;
        } else if (existingDescriptions[lang]) {
            data.switcherSettings.descriptions[lang] = existingDescriptions[lang];
        }
    });


    // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    const contactsTitle = document.getElementById('contactsTitle')?.value;
    if (contactsTitle) data.contacts.titles[currentLang] = contactsTitle;
    
    // –¢–µ–∫—Å—Ç—ã
    data.texts[currentLang] = {
        headerTitle: document.getElementById('headerTitleInput')?.value || '',
        headerSubtitle: document.getElementById('headerSubtitleInput')?.value || '',
        welcomeMessage: document.getElementById('welcomeMessageEditor')?.innerHTML || '',
        quickButtons: []
    };
    
    // –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏
    document.querySelectorAll('#quickButtonsList .quick-button-item').forEach(item => {
        const inputs = item.querySelectorAll('input');
        if (inputs.length >= 2 && inputs[0].value) {
            data.texts[currentLang].quickButtons.push({
                text: inputs[0].value,
                message: inputs[1].value
            });
        }
    });
    
    // –ö–æ–Ω—Ç–∞–∫—Ç—ã
    document.querySelectorAll('.contacts-editor .contact-item').forEach(item => {
        const typeSelect = item.querySelector('select');
        const inputs = item.querySelectorAll('input');
        const icon = item.querySelector('.contact-icon-picker')?.textContent || 'üìß';
        
        if (typeSelect && inputs.length >= 2 && inputs[0].value) {
            const contact = {
                type: typeSelect.value,
                url: inputs[0].value,
                icon: icon,
                labels: {}
            };
            contact.labels[currentLang] = inputs[1].value;
            data.contacts.items.push(contact);
        }
    });
    
    // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥
    data.appearance = {
        position: document.getElementById('appearancePositionSelect')?.value || 'bottom-right',
        dimensions: {
            width: parseInt(document.getElementById('appearanceWidthInput')?.value) || 400,
            height: parseInt(document.getElementById('appearanceHeightInput')?.value) || 560
        },
        margins: {
            top: parseInt(document.getElementById('appearanceMarginTop')?.value) || 20,
            right: parseInt(document.getElementById('appearanceMarginRight')?.value) || 60,
            bottom: parseInt(document.getElementById('appearanceMarginBottom')?.value) || 10,
            left: parseInt(document.getElementById('appearanceMarginLeft')?.value) || 20
        },
        compactMinimizedSize: {
            width: parseInt(document.getElementById('appearanceCompactWidth')?.value) || 200,
            height: parseInt(document.getElementById('appearanceCompactHeight')?.value) || 65
        },
        compactMinimizedPosition: {
            position: document.getElementById('widgetPosition')?.value || 'bottom-right',
            margins: {
                top: parseInt(document.getElementById('widgetMarginTop')?.value) || 20,
                right: parseInt(document.getElementById('widgetMarginRight')?.value) || 60,
                bottom: parseInt(document.getElementById('widgetMarginBottom')?.value) || 10,
                left: parseInt(document.getElementById('widgetMarginLeft')?.value) || 20
            }
        },
        fonts: {
            desktop: {
                family: document.getElementById('appearanceFontFamilySelect')?.value || '-apple-system, sans-serif',
                messageSize: document.getElementById('desktopFontMessageSize')?.value || '14px',
                headerSize: document.getElementById('desktopFontHeaderSize')?.value || '18px',
                quickButtonSize: document.getElementById('desktopFontQuickButtonSize')?.value || '13px'
            },
            mobile: {
                family: document.getElementById('appearanceFontFamilySelect')?.value || '-apple-system, sans-serif',
                messageSize: document.getElementById('mobileFontMessageSize')?.value || '16px',
                headerSize: document.getElementById('mobileFontHeaderSize')?.value || '16px',
                quickButtonSize: document.getElementById('mobileFontQuickButtonSize')?.value || '14px'
            }
        },
        colors: {
            header: {
                background: document.getElementById('appearanceHeaderGradientPreview')?.style.background || 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                textColor: document.getElementById('appearanceHeaderTextColorInput')?.value || '#ffffff'
            },
            buttons: {
                background: document.getElementById('appearanceButtonColorInput')?.value || '#667eea',
                hoverBackground: document.getElementById('appearanceButtonHoverColorInput')?.value || '#5a67d8',
                textColor: '#ffffff'
            },
            userMessage: {
                background: document.getElementById('appearanceUserMessageColorInput')?.value || '#ff5400',
                textColor: document.getElementById('appearanceUserMessageTextColorInput')?.value || '#ffffff'
            }
        },
        widget: {
            type: document.querySelector('.widget-type-card.selected')?.dataset.widgetName || 'Neural Network Pulse',
            animationSpeed: parseFloat(document.getElementById('widgetAnimationSpeed')?.value) || 2,
            primaryColor: document.getElementById('widgetPrimaryColorInput')?.value || '#667eea',
            icon: document.getElementById('widgetIcon')?.value || 'üí¨',
            size: parseInt(document.getElementById('widgetSize')?.value) || 70
        }
    };
    
    // –ü–æ–≤–µ–¥–µ–Ω–∏–µ
    data.behavior = {
        autoOpen: document.getElementById('autoOpenToggle')?.classList.contains('active') || false,
        autoOpenDelay: parseInt(document.getElementById('autoOpenDelayInput')?.value) || 10000,
        autoFocus: document.getElementById('autoFocusToggle')?.classList.contains('active') || false,
        showWelcome: document.getElementById('showWelcomeToggle')?.classList.contains('active') || false,
        showQuickButtons: document.getElementById('showQuickButtonsToggle')?.classList.contains('active') || false,
        enableVoice: document.getElementById('enableVoiceToggle')?.classList.contains('active') || false,
        enableFileUpload: document.getElementById('enableFileUploadToggle')?.classList.contains('active') || false,
        saveHistory: document.getElementById('saveHistoryToggle')?.classList.contains('active') || false,
        historyLifetime: parseInt(document.getElementById('historyLifetimeInput')?.value) || 72,
        maxHistoryMessages: parseInt(document.getElementById('maxHistoryMessagesInput')?.value) || 50,
        quickButtonsCollapsed: document.getElementById('quickButtonsCollapsedToggle')?.classList.contains('active') || false,
        enablePasteImages: document.getElementById('enablePasteImagesToggle')?.classList.contains('active') || false,
        showInputArea: document.getElementById('showInputAreaToggle')?.classList.contains('active') || false,
        enablePopoutMode: document.getElementById('enablePopoutModeToggle')?.classList.contains('active') || false,
        popoutWindowSize: {
            width: parseInt(document.getElementById('popoutWindowWidthInput')?.value) || 500,
            height: parseInt(document.getElementById('popoutWindowHeightInput')?.value) || 770
        }
    };
    
    // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    data.technical = {
        requestTimeout: parseInt(document.getElementById('requestTimeoutInput')?.value) || 300000,
        maxMessageLength: parseInt(document.getElementById('maxMessageLengthInput')?.value) || 1000,
        debug: document.querySelector('#tab-technical .toggle-switch')?.classList.contains('active') || false,
        maxVoiceDuration: parseInt(document.getElementById('maxVoiceDurationInput')?.value) || 600,
        maxFileSize: (parseFloat(document.getElementById('maxFileSizeInput')?.value) || 10) * 1024 * 1024,
        allowedFileTypes: [],
        voiceSettings: {
            enableServerStorage: true,
            uploadEndpoint: document.getElementById('voiceUploadEndpoint')?.value || '/upload-voice.php',
            downloadEndpoint: document.getElementById('voiceDownloadEndpoint')?.value || '/voices/',
            fileFormat: document.getElementById('voiceFormatSelect')?.value || 'ogg',
            filePrefix: 'voice_message_',
            maxVoiceSize: 5 * 1024 * 1024,
            enableLocalFallback: true
        }
    };
    
    // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤
    const types = [];
    if (document.getElementById('allowImages')?.checked) {
        types.push('image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/bmp');
    }
    if (document.getElementById('allowPDF')?.checked) {
        types.push('application/pdf');
    }
    if (document.getElementById('allowText')?.checked) {
        types.push('text/plain', 'text/csv');
    }
    if (document.getElementById('allowOffice')?.checked) {
        types.push('application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document');
    }
    data.technical.allowedFileTypes = types;
    
     // ‚úÖ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        configId: data.configId,
        hasTexts: !!data.texts,
        textLanguages: data.texts ? Object.keys(data.texts) : [],
        hasQuickButtons: !!(data.texts?.ru?.quickButtons),
        quickButtonsCount: data.texts?.ru?.quickButtons?.length || 0,
        hasContacts: !!data.contacts,
        contactsCount: data.contacts?.items?.length || 0,
        hasBehavior: !!data.behavior,
        hasAppearance: !!data.appearance,
        hasTechnical: !!data.technical
    });
    
    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–æ–±–∏—Ä–∞–µ–º —Ç–µ–∫—Å—Ç—ã –¥–ª—è –í–°–ï–• —è–∑—ã–∫–æ–≤, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–≥–æ
    // 1. –°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    if (!window.tempConfigData) window.tempConfigData = {};
    if (!window.tempConfigData[currentConfig]) window.tempConfigData[currentConfig] = {};
    window.tempConfigData[currentConfig][currentLang] = data.texts[currentLang];

    // 2. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —è–∑—ã–∫–∏ –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    if (window.tempConfigData[currentConfig]) {
        Object.keys(window.tempConfigData[currentConfig]).forEach(lang => {
            if (!data.texts[lang]) {
                data.texts[lang] = window.tempConfigData[currentConfig][lang];
            }
        });
    }

    // 3. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —è–∑—ã–∫–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    const originalConfig = window[currentConfig];
    if (originalConfig && originalConfig.texts) {
        Object.keys(originalConfig.texts).forEach(lang => {
            if (!data.texts[lang]) {
                data.texts[lang] = originalConfig.texts[lang];
            }
        });
    }

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ - —Å–æ–±–∏—Ä–∞–µ–º titles –∏ labels –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    const currentContactTitle = document.getElementById('contactsTitle')?.value;
    if (!window.tempContactData) window.tempContactData = {};
    if (!window.tempContactData[currentConfig]) window.tempContactData[currentConfig] = { titles: {}, items: [] };
    if (currentContactTitle) {
        window.tempContactData[currentConfig].titles[currentLang] = currentContactTitle;
    }

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º titles –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
    if (window.tempContactData[currentConfig]?.titles) {
        data.contacts.titles = { ...window.tempContactData[currentConfig].titles };
    }
    if (originalConfig?.contacts?.titles) {
        Object.keys(originalConfig.contacts.titles).forEach(lang => {
            if (!data.contacts.titles[lang]) {
                data.contacts.titles[lang] = originalConfig.contacts.titles[lang];
            }
        });
    }

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º labels –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
    if (originalConfig?.contacts?.items && Array.isArray(originalConfig.contacts.items)) {
        originalConfig.contacts.items.forEach((originalContact, index) => {
            if (data.contacts.items[index]) {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º labels –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                if (originalContact.labels) {
                    Object.keys(originalContact.labels).forEach(lang => {
                        if (!data.contacts.items[index].labels[lang]) {
                            data.contacts.items[index].labels[lang] = originalContact.labels[lang];
                        }
                    });
                }
            }
        });
    }

    // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ _debug
    delete data._debug;
    return data;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function updateConfiguration(configId, data) {
    // –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    let config = window[configId] || window.ChatConfigs?.[configId.replace('Config', '')];
    
    if (config) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
        Object.assign(config, data);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö
        window[configId] = config;
        if (window.ChatConfigs) {
            window.ChatConfigs[configId.replace('Config', '')] = config;
        }
    }
}

        // –ü–æ–∫–∞–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
function showSaveIndicator(type, message) {
    const indicator = document.getElementById('saveIndicator');
    if (!indicator) {
        return;
    }

    indicator.className = `save-indicator ${type} show`;

    if (type === 'saving') {
        indicator.innerHTML = `<span class="spinner"></span><span>${message || '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...'}</span>`;
    } else if (type === 'success') {
        indicator.innerHTML = `<span>‚úÖ</span><span>${message || '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!'}</span>`;
    } else if (type === 'error') {
        indicator.innerHTML = `<span>‚ùå</span><span>${message || '–û—à–∏–±–∫–∞!'}</span>`;
    } else if (type === 'changed') {
        indicator.innerHTML = `<span>‚ö†Ô∏è</span><span>${message || '–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è'}</span>`;
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫—Ä–æ–º–µ 'saving' –∏ 'changed'
    if (type !== 'saving' && type !== 'changed') {
        setTimeout(() => {
            indicator.classList.remove('show');
        }, 3000);
    }

    // –î–ª—è 'changed' —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    if (type === 'changed') {
        setTimeout(() => {
            indicator.classList.remove('show');
        }, 5000);
    }
}

        function addQuickButton() {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    const container1 = document.getElementById('quickButtonsList');
    const container2 = document.getElementById('quickButtonsListMain');
    
    const newButton = createQuickButtonElement('', '');
    
    if (container1) {
        // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã" –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
        const emptyMessage = container1.querySelector('p');
        if (emptyMessage) emptyMessage.remove();
        
        container1.appendChild(newButton.cloneNode(true));
    }
    
    if (container2) {
        // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã" –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
        const emptyMessage = container2.querySelector('p');
        if (emptyMessage) emptyMessage.remove();
        
        container2.appendChild(newButton);
    }
    
    setDirty();
}

       function addContact() {
    const container = document.querySelector('.contacts-editor');
    if (!container) {
        return;
    }
    
    // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã" –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
    const emptyMessage = container.querySelector('p');
    if (emptyMessage) emptyMessage.remove();
    
    const currentLang = document.querySelector('#textLanguageSelect')?.value || 'ru';
    const newContact = createContactElement({
        type: 'email',
        url: '',
        icon: 'üìß',
        labels: { [currentLang]: '' }
    });
    
    container.appendChild(newContact);
    setDirty();
}

        function backToList() {
            navigateToPage('configurations-list');
        }

        function createNewConfig() {
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –µ—Å–ª–∏ –µ—Å—Ç—å
    const oldModal = document.getElementById('createConfigModal');
    if (oldModal) {
        oldModal.remove();
    }
    
    // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    const modalHtml = `
        <div class="modal-overlay" id="createConfigModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>${t('modal.create_config_title')}</h3>
                    <button class="modal-close" type="button">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">${t('modal.config_id_label')}</label>
                        <input type="text" id="newConfigId" class="form-control" placeholder="${t('modal.config_id_placeholder')}" autocomplete="off">
                        <div class="form-hint">${t('modal.config_id_hint')}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('modal.config_name_label')}</label>
                        <input type="text" id="newConfigName" class="form-control" placeholder="${t('modal.config_name_placeholder')}" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('modal.config_icon_label')}</label>
                        <input type="text" id="newConfigIcon" class="form-control" value="üí¨" maxlength="4" autocomplete="off">
                        <div class="form-hint">${t('modal.config_icon_hint')}</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('modal.config_description_label')}</label>
                        <input type="text" id="newConfigDescription" class="form-control" placeholder="${t('placeholder.config_description')}" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('modal.config_order_label')}</label>
                        <input type="number" id="newConfigOrder" class="form-control" value="999" min="1" autocomplete="off">
                        <div class="form-hint">${t('modal.config_order_hint')}</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-cancel-btn" type="button">${t('btn.cancel')}</button>
                    <button class="btn btn-primary modal-save-btn" type="button">${t('btn.save')}</button>
                </div>
            </div>
        </div>
    `;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ body
    document.body.insertAdjacentHTML('beforeend', modalHtml);
    
    // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ü–û–°–õ–ï –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ DOM
    setTimeout(() => {
        const modal = document.getElementById('createConfigModal');
        const closeBtn = modal?.querySelector('.modal-close');
        const cancelBtn = modal?.querySelector('.modal-cancel-btn');
        const saveBtn = modal?.querySelector('.modal-save-btn');
        
            modal: !!modal,
            closeBtn: !!closeBtn,
            cancelBtn: !!cancelBtn,
            saveBtn: !!saveBtn
        });
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è
const closeModalWindow = function() {
    const modalToRemove = document.getElementById('createConfigModal');
    if (modalToRemove) {
        modalToRemove.remove();
    }
};
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
        if (closeBtn) {
            closeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                closeModalWindow();
            });
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ "–û—Ç–º–µ–Ω–∞"
        if (cancelBtn) {
            cancelBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                closeModalWindow();
            });
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ overlay (—Ñ–æ–Ω)
        if (modal) {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModalWindow();
                }
            });
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        if (saveBtn) {
            saveBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                saveNewConfig();
            });
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
        const escHandler = function(e) {
            if (e.key === 'Escape') {
                closeModalWindow();
                document.removeEventListener('keydown', escHandler);
            }
        };
        document.addEventListener('keydown', escHandler);
        
        // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ
        const firstInput = document.getElementById('newConfigId');
        if (firstInput) {
            firstInput.focus();
        }
        
    }, 50);
    
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function closeModal() {
    
    const modal = document.getElementById('createConfigModal');
    if (modal) {
        modal.remove();
    } else {
        
        // –ü—Ä–æ–±—É–µ–º —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        document.querySelectorAll('.modal-overlay').forEach(m => {
            m.remove();
        });
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function saveNewConfig() {
    
    const configId = document.getElementById('newConfigId')?.value.trim() || '';
    const configName = document.getElementById('newConfigName')?.value.trim() || '';
    const configIcon = document.getElementById('newConfigIcon')?.value.trim() || 'üí¨';
    const configDescription = document.getElementById('newConfigDescription')?.value.trim() || '';
    const configOrder = parseInt(document.getElementById('newConfigOrder')?.value) || 999;
    
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!configId) {
        alert(t('alert.enter_config_id'));
        document.getElementById('newConfigId')?.focus();
        return;
    }

    if (!configName) {
        alert(t('alert.enter_config_name'));
        document.getElementById('newConfigName')?.focus();
        return;
    }

    if (!/^[a-zA-Z0-9_]+$/.test(configId)) {
        alert(t('alert.id_invalid'));
        document.getElementById('newConfigId')?.focus();
        return;
    }

    const fullConfigId = configId.endsWith('Config') ? configId : configId + 'Config';
    if (window.ChatConfigs?.[configId] || window[fullConfigId]) {
        alert(t('alert.id_exists'));
        document.getElementById('newConfigId')?.focus();
        return;
    }
    
    
    try {
        // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        const newConfig = createConfigurationObject(configId, configName, configIcon, configDescription, configOrder);


        // ‚úÖ –ù–û–í–û–ï: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        showSaveIndicator('saving', t('save.saving_config'));

        fetch('save-webchat-config.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                type: 'create',
                configId: fullConfigId,
                configData: newConfig
            })
        })
        .then(response => response.json())
        .then(data => {

            if (data.success) {

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                const modal = document.getElementById('createConfigModal');
                if (modal) {
                    modal.remove();
                } else {
                    document.querySelectorAll('.modal-overlay').forEach(m => m.remove());
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showSaveIndicator('success', t('save.config_created').replace('{name}', configName));

                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
                setTimeout(() => {
                    loadConfigurationsList();
                    updateSidebarConfigs();
                }, 300);

            } else {
                showSaveIndicator('error', data.error || t('save.server_save_error'));

                // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
                delete window[fullConfigId];
                if (window.ChatConfigs) {
                    delete window.ChatConfigs[configId];
                }
                if (window.GlobalConfigSettings?.availableConfigs) {
                    delete window.GlobalConfigSettings.availableConfigs[fullConfigId];
                }
            }
        })
        .catch(error => {
            showSaveIndicator('error', t('save.server_error'));

            // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
            delete window[fullConfigId];
            if (window.ChatConfigs) {
                delete window.ChatConfigs[configId];
            }
            if (window.GlobalConfigSettings?.availableConfigs) {
                delete window.GlobalConfigSettings.availableConfigs[fullConfigId];
            }
        });

    } catch (error) {
        alert(t('alert.creation_error').replace('{error}', error.message));
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function createModal(title, content, onSave) {
    const modal = document.createElement('div');
    modal.className = 'modal active';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">${title}</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                ${content}
            </div>
            <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal()">${t('btn.cancel')}</button>
                <button class="btn btn-primary" id="modalSaveBtn">${t('btn.save')}</button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    if (onSave) {
        document.getElementById('modalSaveBtn').onclick = onSave;
    }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function closeModal() {
    const modal = document.querySelector('.modal.active');
    if (modal) {
        modal.remove();
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function createConfigurationObject(configId, name, icon, description, order) {
    
    const fullConfigId = configId.endsWith('Config') ? configId : configId + 'Config';
    
    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑–æ–≤–æ–π
    const newConfig = {
        configId: fullConfigId,
        internalConfigName: fullConfigId,
        useIndividualSettings: false,
        
        switcherSettings: {
            enabled: true,
            labels: {
                ru: `${icon} ${name}`,
                en: `${icon} ${name}`,
                ua: `${icon} ${name}`,
                fr: `${icon} ${name}`
            },
            descriptions: {
                ru: description,
                en: description,
                ua: description,
                fr: description
            },
            order: order
        },
        
        supportedLanguages: ['ru', 'en', 'ua', 'fr'],
        defaultLanguage: 'ru',
        language: 'ru',
        
        aiCoreUrl: 'https://n8n.cryptomator.pro/webhook/webchat-api',
        
        botInfo: {
            name: name,
            description: description,
            avatar: icon
        },
        
        theme: {
            mode: 'dark',
            preferredScheme: 'dark'
        },
        
        contacts: {
            enabled: false,
            titles: {
                ru: '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
                en: 'Contacts',
                ua: '–ö–æ–Ω—Ç–∞–∫—Ç–∏',
                fr: 'Contacts'
            },
            items: []
        },
        
        texts: {
            ru: {
                headerTitle: name,
                headerSubtitle: description,
                welcomeMessage: `<strong>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</strong><br><br>–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?`,
                quickButtons: []
            },
            en: {
                headerTitle: name,
                headerSubtitle: description,
                welcomeMessage: `<strong>Welcome!</strong><br><br>How can I help you?`,
                quickButtons: []
            },
            ua: {
                headerTitle: name,
                headerSubtitle: description,
                welcomeMessage: `<strong>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</strong><br><br>–ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?`,
                quickButtons: []
            },
            fr: {
                headerTitle: name,
                headerSubtitle: description,
                welcomeMessage: `<strong>Bienvenue!</strong><br><br>Comment puis-je vous aider?`,
                quickButtons: []
            }
        },
        
        behavior: {
            autoOpen: false,
            autoOpenDelay: 10000,
            autoFocus: true,
            showWelcome: true,
            showQuickButtons: true,
            enableVoice: true,
            saveHistory: true,
            historyLifetime: 72,
            maxHistoryMessages: 50,
            quickButtonsCollapsed: true,
            enableFileUpload: true,
            enablePasteImages: true,
            showInputArea: true,
            enablePopoutMode: true,
            popoutWindowSize: {
                width: 500,
                height: 770
            }
        },
        
        appearance: {
            position: 'bottom-right',
            dimensions: {
                width: 400,
                height: 560
            },
            margins: {
                top: 20,
                right: 60,
                bottom: 10,
                left: 20
            },
            compactMinimizedSize: {
                width: 200,
                height: 65
            },
            compactMinimizedPosition: {
                position: 'bottom-right',
                margins: {
                    top: 20,
                    right: 60,
                    bottom: 10,
                    left: 20
                }
            },
            fonts: {
                desktop: {
                    family: 'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
                    messageSize: '14px',
                    headerSize: '16px',
                    quickButtonSize: '13px'
                },
                mobile: {
                    family: 'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
                    messageSize: '16px',
                    headerSize: '16px',
                    quickButtonSize: '14px'
                }
            },
            colors: {
                header: {
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    textColor: '#ffffff'
                },
                buttons: {
                    background: '#667eea',
                    hoverBackground: '#5a67d8',
                    textColor: '#ffffff'
                },
                userMessage: {
                    background: '#ff5400',
                    textColor: '#ffffff'
                }
            }
        },
        
        technical: {
            requestTimeout: 300000,
            maxMessageLength: 1000,
            debug: false,
            maxVoiceDuration: 600,
            maxFileSize: 10 * 1024 * 1024,
            allowedFileTypes: [
                'image/jpeg', 'image/png', 'image/gif', 'image/webp',
                'application/pdf', 'text/plain', 'text/csv',
                'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
            ],
            voiceSettings: {
                enableServerStorage: true,
                uploadEndpoint: '/upload-voice.php',
                downloadEndpoint: '/voices/',
                fileFormat: 'ogg',
                filePrefix: 'voice_message_',
                maxVoiceSize: 5 * 1024 * 1024,
                enableLocalFallback: true
            }
        }
        // ‚úÖ monitoring –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è - –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å—Å—è –∏–∑ baseConfig —á–µ—Ä–µ–∑ mergeConfigs
    };
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
    window[fullConfigId] = newConfig;
    
    if (window.ChatConfigs) {
        const shortName = configId.replace('Config', '');
        window.ChatConfigs[shortName] = newConfig;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ GlobalConfigSettings
    if (!window.GlobalConfigSettings.availableConfigs) {
        window.GlobalConfigSettings.availableConfigs = {};
    }
    
    if (!window.GlobalConfigSettings.availableConfigs[fullConfigId]) {
        window.GlobalConfigSettings.availableConfigs[fullConfigId] = {
            enabled: true,
            order: order
        };
    }
    
    setDirty();
    
    // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
    updateSidebarConfigs();
    
    return newConfig;
}
       function toggleConfigStatus(configId) {
    
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
    const currentStatus = window.GlobalConfigSettings.availableConfigs[configId]?.enabled;
    const newStatus = !currentStatus;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
    if (!window.GlobalConfigSettings.availableConfigs[configId]) {
        window.GlobalConfigSettings.availableConfigs[configId] = {
            enabled: true,
            order: 999
        };
    }
    
    window.GlobalConfigSettings.availableConfigs[configId].enabled = newStatus;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
    const card = document.querySelector(`.config-card[data-config="${configId}"]`);
    if (card) {
        const statusDot = card.querySelector('.config-card-status');
        if (statusDot) {
            if (newStatus) {
                statusDot.classList.remove('disabled');
            } else {
                statusDot.classList.add('disabled');
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        const toggleButton = card.querySelector('.btn-secondary');
        if (toggleButton) {
            toggleButton.innerHTML = `üîÑ ${newStatus ? '–í—ã–∫–ª' : '–í–∫–ª'}`;
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é)
    updateSidebarConfigs();

    // ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    showSaveIndicator('saving', t('save.saving_status'));

    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'global-partial',
            fields: {
                availableConfigs: window.GlobalConfigSettings.availableConfigs
            }
        })
    })
    .then(response => response.json())
    .then(data => {

        if (data.success) {
            showSaveIndicator('success', newStatus ? t('save.config_enabled') : t('save.config_disabled'));
            isDirty = false;
        } else {
            showSaveIndicator('error', data.error || t('save.status_error'));

            // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
            window.GlobalConfigSettings.availableConfigs[configId].enabled = currentStatus;

            // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            if (card) {
                const statusDot = card.querySelector('.config-card-status');
                if (statusDot) {
                    if (currentStatus) {
                        statusDot.classList.remove('disabled');
                    } else {
                        statusDot.classList.add('disabled');
                    }
                }
                const toggleButton = card.querySelector('.btn-secondary');
                if (toggleButton) {
                    toggleButton.innerHTML = `üîÑ ${currentStatus ? t('btn.off') : t('btn.on')}`;
                }
            }
            updateSidebarConfigs();
        }
    })
    .catch(error => {
        showSaveIndicator('error', t('save.server_error'));

        // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
        window.GlobalConfigSettings.availableConfigs[configId].enabled = currentStatus;

        // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
        if (card) {
            const statusDot = card.querySelector('.config-card-status');
            if (statusDot) {
                if (currentStatus) {
                    statusDot.classList.remove('disabled');
                } else {
                    statusDot.classList.add('disabled');
                }
            }
            const toggleButton = card.querySelector('.btn-secondary');
            if (toggleButton) {
                toggleButton.innerHTML = `üîÑ ${currentStatus ? t('btn.on') : t('btn.off')}`;
            }
        }
        updateSidebarConfigs();
    });
}

// ===============================================
// –£–î–ê–õ–ï–ù–ò–ï –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
// ===============================================
function deleteConfig(configId) {
    if (!confirm(t('confirm.delete_config').replace('{id}', configId))) {
        return;
    }


    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–ø–∏—é –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
    const backup = {
        config: window[configId],
        chatConfig: window.ChatConfigs?.[configId.replace('Config', '')],
        globalSetting: window.GlobalConfigSettings?.availableConfigs?.[configId]
    };

    // –£–¥–∞–ª—è–µ–º –∏–∑ window
    delete window[configId];

    // –£–¥–∞–ª—è–µ–º –∏–∑ ChatConfigs
    if (window.ChatConfigs) {
        const shortName = configId.replace('Config', '');
        delete window.ChatConfigs[shortName];
    }

    // –£–¥–∞–ª—è–µ–º –∏–∑ GlobalConfigSettings
    if (window.GlobalConfigSettings?.availableConfigs) {
        delete window.GlobalConfigSettings.availableConfigs[configId];
    }

    // ‚úÖ –ù–û–í–û–ï: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    showSaveIndicator('saving', t('save.deleting_config'));

    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'delete',
            configId: configId
        })
    })
    .then(response => response.json())
    .then(data => {

        if (data.success) {
            showSaveIndicator('success', t('save.config_deleted'));

            // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
            updateSidebarConfigs();

            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
            setTimeout(() => {
                loadConfigurationsList();
            }, 500);
        } else {
            showSaveIndicator('error', data.error || t('save.delete_error'));

            // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
            if (backup.config) window[configId] = backup.config;
            if (backup.chatConfig && window.ChatConfigs) {
                window.ChatConfigs[configId.replace('Config', '')] = backup.chatConfig;
            }
            if (backup.globalSetting && window.GlobalConfigSettings?.availableConfigs) {
                window.GlobalConfigSettings.availableConfigs[configId] = backup.globalSetting;
            }
        }
    })
    .catch(error => {
        showSaveIndicator('error', t('save.server_error'));

        // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
        if (backup.config) window[configId] = backup.config;
        if (backup.chatConfig && window.ChatConfigs) {
            window.ChatConfigs[configId.replace('Config', '')] = backup.chatConfig;
        }
        if (backup.globalSetting && window.GlobalConfigSettings?.availableConfigs) {
            window.GlobalConfigSettings.availableConfigs[configId] = backup.globalSetting;
        }
    });
}

        function exportConfig() {

    showSaveIndicator('saving', t('save.preparing_export'));

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º PHP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
    const link = document.createElement('a');
    link.href = 'download-full-config.php';
    link.style.display = 'none';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    showSaveIndicator('success', t('save.config_downloaded'));
}

// ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ webchat-config.js —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ —Ñ–æ—Ä–º—ã
function exportCurrentConfig() {
    showSaveIndicator('saving', t('save.preparing_export_current'));

    try {
        // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–µ–∫—É—â–µ–π —Ñ–æ—Ä–º—ã
        const currentConfigData = collectConfigData();

        if (!currentConfigData || !currentConfig) {
            showSaveIndicator('error', t('save.select_config_first'));
            return;
        }

        // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        const exportData = {};

        // –ü–æ–ª—É—á–∞–µ–º GlobalConfigSettings
        if (window.GlobalConfigSettings) {
            const globalSettings = JSON.parse(JSON.stringify(window.GlobalConfigSettings));
            // –û–±–Ω–æ–≤–ª—è–µ–º availableConfigs —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            if (!globalSettings.availableConfigs) {
                globalSettings.availableConfigs = {};
            }
            globalSettings.availableConfigs[currentConfig] = {
                enabled: true,
                order: currentConfigData.switcherSettings?.order || 1,
                labels: currentConfigData.switcherSettings?.labels || {},
                descriptions: currentConfigData.switcherSettings?.descriptions || {}
            };
            exportData.GlobalConfigSettings = globalSettings;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        exportData.configName = currentConfig;
        exportData.configData = currentConfigData;
        exportData[currentConfig] = currentConfigData;

        // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ø–∞–º—è—Ç–∏ (–∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π)
        const configNames = ['baseConfig', 'financeConfig', 'ecommerceConfig', 'techConfig', 'educationConfig'];
        for (const configName of configNames) {
            if (configName !== currentConfig && window[configName] && window[configName].configId) {
                exportData[configName] = window[configName];
            }
        }


        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ PHP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        fetch('export-full-config.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(exportData)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ' + response.status);
            }
            return response.blob();
        })
        .then(blob => {
            // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;

            // –§–æ—Ä–º–∏—Ä—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
            const date = new Date().toISOString().slice(0, 10);
            const time = new Date().toTimeString().slice(0, 8).replace(/:/g, '-');
            link.download = `webchat-config-${date}_${time}.js`;

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);

            showSaveIndicator('success', t('save.config_exported'));
        })
        .catch(error => {
            showSaveIndicator('error', t('save.export_error').replace('{error}', error.message));
        });

    } catch (error) {
        showSaveIndicator('error', t('save.export_settings_error'));
    }
}

        function importConfig() {

            // –°–æ–∑–¥–∞–µ–º input –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.js,.json';

            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;

                if (!confirm(t('confirm.import_file'))) {
                    return;
                }

                showSaveIndicator('saving', t('save.importing_config'));

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ FormData
                const formData = new FormData();
                formData.append('config', file);

                fetch('import-webchat-config.php', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showSaveIndicator('success', t('save.config_imported'));

                        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                        setTimeout(() => {
                            window.location.reload();
                        }, 1000);
                    } else {
                        showSaveIndicator('error', data.error || '–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞');
                    }
                })
                .catch(error => {
                    showSaveIndicator('error', t('save.server_error'));
                });
            };

            input.click();
        }

        function copyConfigToClipboard() {

            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
            const configs = { GlobalConfigSettings: window.GlobalConfigSettings };
            for (let key in window) {
                if (key.endsWith('Config') && typeof window[key] === 'object' && window[key] !== null && window[key].configId) {
                    configs[key] = window[key];
                }
            }

            // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            let jsContent = '// webchat-config.js - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è\n\n';
            jsContent += 'const GlobalConfigSettings = ' + JSON.stringify(configs.GlobalConfigSettings, null, 2) + ';\n\n';
            Object.keys(configs).forEach(key => {
                if (key !== 'GlobalConfigSettings') {
                    jsContent += `const ${key} = ${JSON.stringify(configs[key], null, 2)};\n\n`;
                }
            });

            // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            navigator.clipboard.writeText(jsContent).then(() => {
                showSaveIndicator('success', t('export.copied'));
            }).catch(err => {
                showSaveIndicator('error', t('export.copy_error'));
            });
        }

        // ========================
        // –°–ò–°–¢–ï–ú–ê –†–ï–ó–ï–†–í–ù–´–• –ö–û–ü–ò–ô (–°–ï–†–í–ï–†–ù–ê–Ø)
        // ========================

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
        function createBackup() {
            showSaveIndicator('saving', t('save.creating_backup'));

            fetch('create-webchat-backup.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showSaveIndicator('success', t('save.backup_created'));

                    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Å—Ä–∞–∑—É –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
                    loadBackupsList();
                } else {
                    showSaveIndicator('error', data.error || t('save.backup_create_error'));
                }
            })
            .catch(error => {
                showSaveIndicator('error', t('save.server_error'));
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞
        function loadBackupsList() {

            // –î–æ–±–∞–≤–ª—è–µ–º timestamp –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
            const timestamp = new Date().getTime();
            fetch('list-webchat-backups.php?_=' + timestamp)
            .then(response => response.json())
            .then(backups => {

                const container = document.getElementById('backupsList');
                if (!container) {
                    return;
                }

                if (backups.length === 0) {
                    container.innerHTML = `<p class="text-muted" style="padding: 20px; text-align: center;">${t('backup.no_backups')}</p>`;
                    return;
                }

                container.innerHTML = backups.map(backup => {
                    return `
                        <div class="list-item">
                            <div class="list-item-content">
                                <span>üìÖ</span>
                                <span>${t('backup.from')} ${backup.date}</span>
                                <span class="text-sm text-muted">${backup.sizeFormatted}</span>
                            </div>
                            <div class="list-item-controls">
                                <button class="icon-btn" title="${t('backup.restore')}" onclick="restoreBackup('${backup.name}')">üîÑ</button>
                                <button class="icon-btn" title="${t('backup.download')}" onclick="downloadBackup('${backup.name}')">üì•</button>
                                <button class="icon-btn danger" title="${t('backup.delete')}" onclick="deleteBackup('${backup.name}')">üóëÔ∏è</button>
                            </div>
                        </div>
                    `;
                }).join('');
            })
            .catch(error => {
                const container = document.getElementById('backupsList');
                if (container) {
                    container.innerHTML = `<p class="text-muted" style="padding: 20px; text-align: center; color: var(--danger);">${t('backup.load_error')}</p>`;
                }
            });
        }

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
        function restoreBackup(backupName) {
            if (!confirm(t('confirm.restore_backup'))) {
                return;
            }

            showSaveIndicator('saving', t('save.restoring'));

            fetch('restore-webchat-backup.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ backup: backupName })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showSaveIndicator('success', t('save.config_restored_reloading'));

                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        location.reload();
                    }, 1500);
                } else {
                    showSaveIndicator('error', data.error || t('save.restore_error'));
                }
            })
            .catch(error => {
                showSaveIndicator('error', t('save.server_error'));
            });
        }

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
        function downloadBackup(backupName) {

            // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const downloadUrl = 'download-webchat-backup.php?backup=' + encodeURIComponent(backupName);

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = backupName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showSaveIndicator('success', t('save.backup_downloading'));
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
        function deleteBackup(backupName) {
            if (!confirm(t('confirm.delete_backup').replace('{name}', backupName))) {
                return;
            }

            showSaveIndicator('saving', t('save.deleting'));

            fetch('delete-webchat-backup.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ backup: backupName })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showSaveIndicator('success', t('save.backup_deleted'));

                    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Å—Ä–∞–∑—É –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
                    loadBackupsList();
                } else {
                    showSaveIndicator('error', data.error || t('save.backup_delete_error'));
                }
            })
            .catch(error => {
                showSaveIndicator('error', t('save.server_error'));
            });
        }

        function setPreviewDevice(device) {
            const preview = document.querySelector('.preview-device');
            preview.className = `preview-device ${device}`;
        }

        function togglePreviewTheme() {
        }

        function showPreview() {
        }

        // ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û: –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —á–∞—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        function updatePreview() {

            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã (–Ω–µ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
            const avatar = document.getElementById('widgetIcon')?.value || 'üí¨';
            const headerTitle = document.getElementById('headerTitleInput')?.value || '–ß–∞—Ç-–±–æ—Ç';
            const headerSubtitle = document.getElementById('headerSubtitleInput')?.value || '';
            const welcomeMessage = document.getElementById('welcomeMessageEditor')?.innerHTML || '';

            // –¶–≤–µ—Ç–∞
            const headerBackground = document.getElementById('appearanceHeaderGradientPreview')?.style.background || 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            const headerTextColor = document.getElementById('appearanceHeaderTextColorInput')?.value || '#ffffff';
            const buttonColor = document.getElementById('appearanceButtonColorInput')?.value || '#667eea';
            const userMessageColor = document.getElementById('appearanceUserMessageColorInput')?.value || '#ff5400';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
            const previewHeader = document.querySelector('.chat-preview-header h4');
            if (previewHeader) {
                previewHeader.textContent = `${avatar} ${headerTitle}`;
            }

            const previewSubtitle = document.querySelector('.chat-preview-header small');
            if (previewSubtitle) {
                previewSubtitle.textContent = headerSubtitle;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç —à–∞–ø–∫–∏
            const previewHeaderDiv = document.querySelector('.chat-preview-header');
            if (previewHeaderDiv) {
                previewHeaderDiv.style.background = headerBackground;
                previewHeaderDiv.style.color = headerTextColor;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const messagesDiv = document.querySelector('.chat-preview-messages');
            if (messagesDiv && welcomeMessage) {
                const welcomeDiv = messagesDiv.querySelector('div:first-child');
                if (welcomeDiv) {
                    welcomeDiv.innerHTML = welcomeMessage;
                }
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤ —Ñ–æ—Ä–º–µ
            const quickButtonsList = document.getElementById('quickButtonsList');
            if (quickButtonsList && messagesDiv) {
                const buttonsContainer = messagesDiv.querySelector('div:nth-child(2)');
                if (buttonsContainer) {
                    buttonsContainer.innerHTML = '';
                    document.querySelectorAll('#quickButtonsList .quick-button-item').forEach(item => {
                        const inputs = item.querySelectorAll('input');
                        if (inputs.length >= 1 && inputs[0].value) {
                            const button = document.createElement('button');
                            button.style.cssText = 'padding: 8px 16px; border: 1px solid #ddd; border-radius: 20px; background: white;';
                            button.textContent = inputs[0].value;
                            buttonsContainer.appendChild(button);
                        }
                    });
                }
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç–∞ –∫–Ω–æ–ø–æ–∫ –≤ –æ–±–ª–∞—Å—Ç–∏ –≤–≤–æ–¥–∞
            const inputButtons = document.querySelectorAll('.chat-preview-input button');
            inputButtons.forEach(btn => {
                btn.style.background = buttonColor;
            });

        }

        function formatText(command) {
            document.execCommand(command, false, null);
            setDirty();
        }

        function insertLink() {
            const url = prompt('–í–≤–µ–¥–∏—Ç–µ URL:');
            if (url) {
                document.execCommand('createLink', false, url);
                setDirty();
            }
        }

        // New editor functions
        function changeFontSize(size) {
            if (size) {
                document.execCommand('fontSize', false, size);
                setDirty();
            }
        }

        function changeTextColor(color) {
            document.execCommand('foreColor', false, color);
            setDirty();
        }

        function changeBackgroundColor(color) {
            document.execCommand('backColor', false, color);
            setDirty();
        }

        function removeTextColor() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            const selection = window.getSelection();
            if (!selection.rangeCount) return;

            // –ü—Ä–∏–º–µ–Ω—è–µ–º removeFormat –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.execCommand('removeFormat', false, null);

            // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä
            const editor = document.getElementById('welcomeMessageEditor');

            // –ù–∞—Ö–æ–¥–∏–º –∏ —É–¥–∞–ª—è–µ–º –≤—Å–µ —Ç–µ–≥–∏ font –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
            const fontTags = editor.querySelectorAll('font');
            fontTags.forEach(font => {
                const parent = font.parentNode;
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã font —Ç–µ–≥–∞ –Ω–∞ –µ–≥–æ –º–µ—Å—Ç–æ
                while (font.firstChild) {
                    parent.insertBefore(font.firstChild, font);
                }
                // –£–¥–∞–ª—è–µ–º –ø—É—Å—Ç–æ–π font —Ç–µ–≥
                parent.removeChild(font);
            });

            setDirty();
        }

        // Editor Tab Switching
        function switchEditorTab(mode) {
            const visualEditor = document.getElementById('welcomeMessageEditor');
            const htmlEditor = document.getElementById('welcomeMessageHTMLEditor');
            const tabs = document.querySelectorAll('.editor-tab');
            const toolbar = document.querySelector('.text-editor-toolbar');
            const htmlToolbar = document.querySelector('.text-editor-html-toolbar');

            if (mode === 'visual') {
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
                htmlEditor.style.display = 'none';
                visualEditor.style.display = 'block';
                toolbar.style.display = 'flex';
                if (htmlToolbar) htmlToolbar.style.display = 'none';

                // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è HTML -> –≤–∏–∑—É–∞–ª—å–Ω—ã–π
                visualEditor.innerHTML = htmlEditor.value;

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
                tabs[0].classList.add('active');
                tabs[1].classList.remove('active');
            } else if (mode === 'html') {
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä
                visualEditor.style.display = 'none';
                htmlEditor.style.display = 'block';
                toolbar.style.display = 'none';
                if (htmlToolbar) htmlToolbar.style.display = 'flex';

                // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã–π -> HTML
                htmlEditor.value = visualEditor.innerHTML;

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
            }

            setDirty();
        }

        // Emoji Picker Functions
        const emojiData = {
            '–°–º–∞–π–ª—ã –∏ —ç–º–æ—Ü–∏–∏': ['üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'ü§£', 'üòÇ', 'üôÇ', 'üôÉ', 'üòâ', 'üòä', 'üòá', 'ü•∞', 'üòç', 'ü§©', 'üòò', 'üòó', 'üòö', 'üòô', 'üòã', 'üòõ', 'üòú', 'ü§™', 'üòù', 'ü§ë', 'ü§ó', 'ü§≠', 'ü§´', 'ü§î', 'ü§ê', 'ü§®', 'üòê', 'üòë', 'üò∂', 'üòè', 'üòí', 'üôÑ', 'üò¨', 'ü§•', 'üòå', 'üòî', 'üò™', 'ü§§', 'üò¥', 'üò∑', 'ü§í', 'ü§ï', 'ü§¢', 'ü§Æ', 'ü§ß', 'ü•µ', 'ü•∂', 'üòµ', 'ü§Ø', 'ü§†', 'ü•≥', 'üòé', 'ü§ì', 'üßê'],
            '–ñ–µ—Å—Ç—ã –∏ –ª—é–¥–∏': ['üëã', 'ü§ö', 'üñê', '‚úã', 'üññ', 'üëå', 'ü§è', '‚úå', 'ü§û', 'ü§ü', 'ü§ò', 'ü§ô', 'üëà', 'üëâ', 'üëÜ', 'üñï', 'üëá', '‚òù', 'üëç', 'üëé', '‚úä', 'üëä', 'ü§õ', 'ü§ú', 'üëè', 'üôå', 'üëê', 'ü§≤', 'ü§ù', 'üôè', 'üí™', 'ü¶æ', 'ü¶ø', 'ü¶µ', 'ü¶∂', 'üëÇ', 'ü¶ª', 'üëÉ', 'üß†', 'ü¶∑', 'ü¶¥', 'üëÄ', 'üëÅ', 'üëÖ', 'üëÑ', 'üíã', 'ü©∏'],
            '–ñ–∏–≤–æ—Ç–Ω—ã–µ': ['üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üêØ', 'ü¶Å', 'üêÆ', 'üê∑', 'üêΩ', 'üê∏', 'üêµ', 'üôà', 'üôâ', 'üôä', 'üêí', 'üêî', 'üêß', 'üê¶', 'üê§', 'üê£', 'üê•', 'ü¶Ü', 'ü¶Ö', 'ü¶â', 'ü¶á', 'üê∫', 'üêó', 'üê¥', 'ü¶Ñ', 'üêù', 'üêõ', 'ü¶ã', 'üêå', 'üêû', 'üêú', 'ü¶ü', 'ü¶ó', 'üï∑', 'ü¶Ç', 'üê¢', 'üêç', 'ü¶é', 'ü¶ñ', 'ü¶ï', 'üêô', 'ü¶ë', 'ü¶ê', 'ü¶û', 'ü¶Ä', 'üê°', 'üê†', 'üêü', 'üê¨', 'üê≥', 'üêã', 'ü¶à', 'üêä', 'üêÖ', 'üêÜ', 'ü¶ì', 'ü¶ç', 'ü¶ß', 'üêò', 'ü¶õ', 'ü¶è', 'üê™', 'üê´', 'ü¶í', 'ü¶ò', 'üêÉ', 'üêÇ', 'üêÑ', 'üêé', 'üêñ', 'üêè', 'üêë', 'ü¶ô', 'üêê', 'ü¶å', 'üêï', 'üê©', 'ü¶Æ', 'üêï‚Äçü¶∫', 'üêà', 'üêì', 'ü¶É', 'ü¶ö', 'ü¶ú', 'ü¶¢', 'ü¶©', 'üïä', 'üêá', 'ü¶ù', 'ü¶®', 'ü¶°', 'ü¶¶', 'ü¶•', 'üêÅ', 'üêÄ', 'üêø', 'ü¶î'],
            '–ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏': ['üçè', 'üçé', 'üçê', 'üçä', 'üçã', 'üçå', 'üçâ', 'üçá', 'üçì', 'üçà', 'üçí', 'üçë', 'ü•≠', 'üçç', 'ü••', 'ü•ù', 'üçÖ', 'üçÜ', 'ü•ë', 'ü•¶', 'ü•¨', 'ü•í', 'üå∂', 'üåΩ', 'ü•ï', 'üßÑ', 'üßÖ', 'ü•î', 'üç†', 'ü•ê', 'ü•Ø', 'üçû', 'ü•ñ', 'ü•®', 'üßÄ', 'ü•ö', 'üç≥', 'üßà', 'ü•û', 'üßá', 'ü•ì', 'ü•©', 'üçó', 'üçñ', 'ü¶¥', 'üå≠', 'üçî', 'üçü', 'üçï', 'ü•™', 'ü•ô', 'üßÜ', 'üåÆ', 'üåØ', 'ü•ó', 'ü•ò', 'ü•´', 'üçù', 'üçú', 'üç≤', 'üçõ', 'üç£', 'üç±', 'ü•ü', 'ü¶™', 'üç§', 'üçô', 'üçö', 'üçò', 'üç•', 'ü•†', 'ü•Æ', 'üç¢', 'üç°', 'üçß', 'üç®', 'üç¶', 'ü•ß', 'üßÅ', 'üç∞', 'üéÇ', 'üçÆ', 'üç≠', 'üç¨', 'üç´', 'üçø', 'üç©', 'üç™', 'üå∞', 'ü•ú', 'üçØ', 'ü•õ', 'üçº', '‚òï', 'üçµ', 'üßÉ', 'ü•§', 'üç∂', 'üç∫', 'üçª', 'ü•Ç', 'üç∑', 'ü•É', 'üç∏', 'üçπ', 'üßâ', 'üçæ', 'üßä'],
            '–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —Å–ø–æ—Ä—Ç': ['‚öΩ', 'üèÄ', 'üèà', '‚öæ', 'ü•é', 'üéæ', 'üèê', 'üèâ', 'ü•è', 'üé±', 'ü™Ä', 'üèì', 'üè∏', 'üèí', 'üèë', 'ü•ç', 'üèè', 'ü•Ö', '‚õ≥', 'ü™Å', 'üèπ', 'üé£', 'ü§ø', 'ü•ä', 'ü•ã', 'üéΩ', 'üõπ', 'üõ∑', '‚õ∏', 'ü•å', 'üéø', '‚õ∑', 'üèÇ', 'ü™Ç', 'üèãÔ∏è', 'ü§º', 'ü§∏', 'ü§∫', '‚õπÔ∏è', 'ü§æ', 'üèåÔ∏è', 'üèá', 'üßò', 'üèä', 'ü§Ω', 'üö£', 'üßó', 'üöµ', 'üö¥', 'üèÜ', 'ü•á', 'ü•à', 'ü•â', 'üèÖ', 'üéñ', 'üéó'],
            '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è': ['üöó', 'üöï', 'üöô', 'üöå', 'üöé', 'üèé', 'üöì', 'üöë', 'üöí', 'üöê', 'üöö', 'üöõ', 'üöú', 'ü¶Ø', 'ü¶Ω', 'ü¶º', 'üõ¥', 'üö≤', 'üõµ', 'üèç', 'üõ∫', 'üö®', 'üöî', 'üöç', 'üöò', 'üöñ', 'üö°', 'üö†', 'üöü', 'üöÉ', 'üöã', 'üöû', 'üöù', 'üöÑ', 'üöÖ', 'üöà', 'üöÇ', 'üöÜ', 'üöá', 'üöä', 'üöâ', '‚úà', 'üõ´', 'üõ¨', 'üõ©', 'üí∫', 'üõ∞', 'üöÄ', 'üõ∏', 'üöÅ', 'üõ∂', '‚õµ', 'üö§', 'üõ•', 'üõ≥', '‚õ¥', 'üö¢', '‚öì', '‚õΩ', 'üöß', 'üö¶', 'üö•', 'üöè', 'üó∫', 'üóø', 'üóΩ', 'üóº', 'üè∞', 'üèØ', 'üèü', 'üé°', 'üé¢', 'üé†', '‚õ≤', '‚õ±', 'üèñ', 'üèù', 'üèú', 'üåã', '‚õ∞', 'üèî', 'üóª', 'üèï', '‚õ∫', 'üè†', 'üè°', 'üèò', 'üèö', 'üèó', 'üè≠', 'üè¢', 'üè¨', 'üè£', 'üè§', 'üè•', 'üè¶', 'üè®', 'üè™', 'üè´', 'üè©', 'üíí', 'üèõ', '‚õ™', 'üïå', 'üïç', 'üõï'],
            '–ü—Ä–µ–¥–º–µ—Ç—ã': ['‚åö', 'üì±', 'üì≤', 'üíª', '‚å®', 'üñ•', 'üñ®', 'üñ±', 'üñ≤', 'üïπ', 'üóú', 'üíΩ', 'üíæ', 'üíø', 'üìÄ', 'üìº', 'üì∑', 'üì∏', 'üìπ', 'üé•', 'üìΩ', 'üéû', 'üìû', '‚òé', 'üìü', 'üì†', 'üì∫', 'üìª', 'üéô', 'üéö', 'üéõ', 'üß≠', '‚è±', '‚è≤', '‚è∞', 'üï∞', '‚åõ', '‚è≥', 'üì°', 'üîã', 'üîå', 'üí°', 'üî¶', 'üïØ', 'ü™î', 'üßØ', 'üõ¢', 'üí∏', 'üíµ', 'üí¥', 'üí∂', 'üí∑', 'üí∞', 'üí≥', 'üßæ', 'üíé', '‚öñ', 'üß∞', 'üîß', 'üî®', '‚öí', 'üõ†', '‚õè', 'üî©', '‚öô', 'üß±', '‚õì', 'üß≤', 'üî´', 'üí£', 'üß®', 'ü™ì', 'üî™', 'üó°', '‚öî', 'üõ°', 'üö¨', '‚ö∞', '‚ö±', 'üè∫', 'üîÆ', 'üìø', 'üßø', 'üíà', '‚öó', 'üî≠', 'üî¨', 'üï≥', 'ü©π', 'ü©∫', 'üíä', 'üíâ', 'ü©∏', 'üß¨', 'ü¶†', 'üß´', 'üß™', 'üå°', 'üßπ', 'üß∫', 'üßª', 'üöΩ', 'üö∞', 'üöø', 'üõÅ', 'üõÄ', 'üßº', 'üßΩ', 'üß¥', 'üõé', 'üîë', 'üóù', 'üö™', 'ü™ë', 'üõã', 'üõè', 'üõå', 'üß∏', 'üñº', 'üõç', 'üõí', 'üéÅ', 'üéà', 'üéè', 'üéÄ', 'üéä', 'üéâ', 'üéé', 'üèÆ', 'üéê', 'üßß', '‚úâ', 'üì©', 'üì®', 'üìß', 'üíå', 'üì•', 'üì§', 'üì¶', 'üè∑', 'üì™', 'üì´', 'üì¨', 'üì≠', 'üìÆ', 'üìØ', 'üìú', 'üìÉ', 'üìÑ', 'üìë', 'üßæ', 'üìä', 'üìà', 'üìâ', 'üóí', 'üóì', 'üìÜ', 'üìÖ', 'üóë', 'üìá', 'üóÉ', 'üó≥', 'üóÑ', 'üìã', 'üìÅ', 'üìÇ', 'üóÇ', 'üóû', 'üì∞', 'üìì', 'üìî', 'üìí', 'üìï', 'üìó', 'üìò', 'üìô', 'üìö', 'üìñ', 'üîñ', 'üß∑', 'üîó', 'üìé', 'üñá', 'üìê', 'üìè', 'üßÆ', 'üìå', 'üìç', '‚úÇ', 'üñä', 'üñã', '‚úí', 'üñå', 'üñç', 'üìù', '‚úè', 'üîç', 'üîé', 'üîè', 'üîê', 'üîí', 'üîì'],
            '–°–∏–º–≤–æ–ª—ã': ['‚ù§', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'üñ§', 'ü§ç', 'ü§é', 'üíî', '‚ù£', 'üíï', 'üíû', 'üíì', 'üíó', 'üíñ', 'üíò', 'üíù', 'üíü', '‚òÆ', '‚úù', '‚ò™', 'üïâ', '‚ò∏', '‚ú°', 'üîØ', 'üïé', '‚òØ', '‚ò¶', 'üõê', '‚õé', '‚ôà', '‚ôâ', '‚ôä', '‚ôã', '‚ôå', '‚ôç', '‚ôé', '‚ôè', '‚ôê', '‚ôë', '‚ôí', '‚ôì', 'üÜî', '‚öõ', 'üâë', '‚ò¢', '‚ò£', 'üì¥', 'üì≥', 'üà∂', 'üàö', 'üà∏', 'üà∫', 'üà∑', '‚ú¥', 'üÜö', 'üíÆ', 'üâê', '„äô', '„äó', 'üà¥', 'üàµ', 'üàπ', 'üà≤', 'üÖ∞', 'üÖ±', 'üÜé', 'üÜë', 'üÖæ', 'üÜò', '‚ùå', '‚≠ï', 'üõë', '‚õî', 'üìõ', 'üö´', 'üíØ', 'üí¢', '‚ô®', 'üö∑', 'üöØ', 'üö≥', 'üö±', 'üîû', 'üìµ', 'üö≠', '‚ùó', '‚ùï', '‚ùì', '‚ùî', '‚Äº', '‚Åâ', 'üîÖ', 'üîÜ', '„ÄΩ', '‚ö†', 'üö∏', 'üî±', '‚öú', 'üî∞', '‚ôª', '‚úÖ', 'üàØ', 'üíπ', '‚ùá', '‚ú≥', '‚ùé', 'üåê', 'üí†', '‚ìÇ', 'üåÄ', 'üí§', 'üèß', 'üöæ', '‚ôø', 'üÖø', 'üà≥', 'üàÇ', 'üõÇ', 'üõÉ', 'üõÑ', 'üõÖ', 'üöπ', 'üö∫', 'üöº', 'üöª', 'üöÆ', 'üé¶', 'üì∂', 'üàÅ', 'üî£', '‚Ñπ', 'üî§', 'üî°', 'üî†', 'üÜñ', 'üÜó', 'üÜô', 'üÜí', 'üÜï', 'üÜì', '0Ô∏è‚É£', '1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£', '5Ô∏è‚É£', '6Ô∏è‚É£', '7Ô∏è‚É£', '8Ô∏è‚É£', '9Ô∏è‚É£', 'üîü', 'üî¢', '#Ô∏è‚É£', '*Ô∏è‚É£', '‚èè', '‚ñ∂', '‚è∏', '‚èØ', '‚èπ', '‚è∫', '‚è≠', '‚èÆ', '‚è©', '‚è™', '‚è´', '‚è¨', '‚óÄ', 'üîº', 'üîΩ', '‚û°', '‚¨Ö', '‚¨Ü', '‚¨á', '‚Üó', '‚Üò', '‚Üô', '‚Üñ', '‚Üï', '‚Üî', '‚Ü™', '‚Ü©', '‚§¥', '‚§µ', 'üîÄ', 'üîÅ', 'üîÇ', 'üîÑ', 'üîÉ', 'üéµ', 'üé∂', '‚ûï', '‚ûñ', '‚ûó', '‚úñ', '‚ôæ', 'üí≤', 'üí±', '‚Ñ¢', '¬©', '¬Æ', '„Ä∞', '‚û∞', '‚ûø', 'üîö', 'üîô', 'üîõ', 'üîù', 'üîú', '‚úî', '‚òë', 'üîò', 'üî¥', 'üü†', 'üü°', 'üü¢', 'üîµ', 'üü£', '‚ö´', '‚ö™', 'üü§', 'üî∫', 'üîª', 'üî∏', 'üîπ', 'üî∂', 'üî∑', 'üî≥', 'üî≤', '‚ñ™', '‚ñ´', '‚óæ', '‚óΩ', '‚óº', '‚óª', 'üü•', 'üüß', 'üü®', 'üü©', 'üü¶', 'üü™', '‚¨õ', '‚¨ú', 'üü´', 'üîà', 'üîá', 'üîâ', 'üîä', 'üîî', 'üîï', 'üì£', 'üì¢', 'üëÅ‚Äçüó®', 'üí¨', 'üí≠', 'üóØ', '‚ô†', '‚ô£', '‚ô•', '‚ô¶', 'üÉè', 'üé¥', 'üÄÑ', 'üïê', 'üïë', 'üïí', 'üïì', 'üïî', 'üïï', 'üïñ', 'üïó', 'üïò', 'üïô', 'üïö', 'üïõ', 'üïú', 'üïù', 'üïû', 'üïü', 'üï†', 'üï°', 'üï¢', 'üï£', 'üï§', 'üï•', 'üï¶', 'üïß'],
            '–§–ª–∞–≥–∏': ['üè≥', 'üè¥', 'üè¥‚Äç‚ò†Ô∏è', 'üèÅ', 'üö©', 'üè≥Ô∏è‚Äçüåà', 'üá¶üá´', 'üá¶üáΩ', 'üá¶üá±', 'üá©üáø', 'üá¶üá∏', 'üá¶üá©', 'üá¶üá¥', 'üá¶üáÆ', 'üá¶üá∂', 'üá¶üá¨', 'üá¶üá∑', 'üá¶üá≤', 'üá¶üáº', 'üá¶üá∫', 'üá¶üáπ', 'üá¶üáø', 'üáßüá∏', 'üáßüá≠', 'üáßüá©', 'üáßüáß', 'üáßüáæ', 'üáßüá™', 'üáßüáø', 'üáßüáØ', 'üáßüá≤', 'üáßüáπ', 'üáßüá¥', 'üáßüá¶', 'üáßüáº', 'üáßüá∑', 'üáÆüá¥', 'üáªüá¨', 'üáßüá≥', 'üáßüá¨', 'üáßüá´', 'üáßüáÆ', 'üá∞üá≠', 'üá®üá≤', 'üá®üá¶', 'üáÆüá®', 'üá®üáª', 'üáßüá∂', 'üá∞üáæ', 'üá®üá´', 'üáπüá©', 'üá®üá±', 'üá®üá≥', 'üá®üáΩ', 'üá®üá®', 'üá®üá¥', 'üá∞üá≤', 'üá®üá¨', 'üá®üá©', 'üá®üá∞', 'üá®üá∑', 'üá®üáÆ', 'üá≠üá∑', 'üá®üá∫', 'üá®üáº', 'üá®üáæ', 'üá®üáø', 'üá©üá∞', 'üá©üáØ', 'üá©üá≤', 'üá©üá¥', 'üá™üá®', 'üá™üá¨', 'üá∏üáª', 'üá¨üá∂', 'üá™üá∑', 'üá™üá™', 'üá™üáπ', 'üá™üá∫', 'üá´üá∞', 'üá´üá¥', 'üá´üáØ', 'üá´üáÆ', 'üá´üá∑', 'üá¨üá´', 'üáµüá´', 'üáπüá´', 'üá¨üá¶', 'üá¨üá≤', 'üá¨üá™', 'üá©üá™', 'üá¨üá≠', 'üá¨üáÆ', 'üá¨üá∑', 'üá¨üá±', 'üá¨üá©', 'üá¨üáµ', 'üá¨üá∫', 'üá¨üáπ', 'üá¨üá¨', 'üá¨üá≥', 'üá¨üáº', 'üá¨üáæ', 'üá≠üáπ', 'üá≠üá≥', 'üá≠üá∞', 'üá≠üá∫', 'üáÆüá∏', 'üáÆüá≥', 'üáÆüá©', 'üáÆüá∑', 'üáÆüá∂', 'üáÆüá™', 'üáÆüá≤', 'üáÆüá±', 'üáÆüáπ', 'üáØüá≤', 'üáØüáµ', 'üéå', 'üáØüá™', 'üáØüá¥', 'üá∞üáø', 'üá∞üá™', 'üá∞üáÆ', 'üáΩüá∞', 'üá∞üáº', 'üá∞üá¨', 'üá±üá¶', 'üá±üáª', 'üá±üáß', 'üá±üá∏', 'üá±üá∑', 'üá±üáæ', 'üá±üáÆ', 'üá±üáπ', 'üá±üá∫', 'üá≤üá¥', 'üá≤üá∞', 'üá≤üá¨', 'üá≤üáº', 'üá≤üáæ', 'üá≤üáª', 'üá≤üá±', 'üá≤üáπ', 'üá≤üá≠', 'üá≤üá∂', 'üá≤üá∑', 'üá≤üá∫', 'üáæüáπ', 'üá≤üáΩ', 'üá´üá≤', 'üá≤üá©', 'üá≤üá®', 'üá≤üá≥', 'üá≤üá™', 'üá≤üá∏', 'üá≤üá¶', 'üá≤üáø', 'üá≤üá≤', 'üá≥üá¶', 'üá≥üá∑', 'üá≥üáµ', 'üá≥üá±', 'üá≥üá®', 'üá≥üáø', 'üá≥üáÆ', 'üá≥üá™', 'üá≥üá¨', 'üá≥üá∫', 'üá≥üá´', 'üá∞üáµ', 'üá≤üáµ', 'üá≥üá¥', 'üá¥üá≤', 'üáµüá∞', 'üáµüáº', 'üáµüá∏', 'üáµüá¶', 'üáµüá¨', 'üáµüáæ', 'üáµüá™', 'üáµüá≠', 'üáµüá≥', 'üáµüá±', 'üáµüáπ', 'üáµüá∑', 'üá∂üá¶', 'üá∑üá™', 'üá∑üá¥', 'üá∑üá∫', 'üá∑üáº', 'üáºüá∏', 'üá∏üá≤', 'üá∏üáπ', 'üá∏üá¶', 'üá∏üá≥', 'üá∑üá∏', 'üá∏üá®', 'üá∏üá±', 'üá∏üá¨', 'üá∏üáΩ', 'üá∏üá∞', 'üá∏üáÆ', 'üá¨üá∏', 'üá∏üáß', 'üá∏üá¥', 'üáøüá¶', 'üá∞üá∑', 'üá∏üá∏', 'üá™üá∏', 'üá±üá∞', 'üáßüá±', 'üá∏üá≠', 'üá∞üá≥', 'üá±üá®', 'üáµüá≤', 'üáªüá®', 'üá∏üá©', 'üá∏üá∑', 'üá∏üáø', 'üá∏üá™', 'üá®üá≠', 'üá∏üáæ', 'üáπüáº', 'üáπüáØ', 'üáπüáø', 'üáπüá≠', 'üáπüá±', 'üáπüá¨', 'üáπüá∞', 'üáπüá¥', 'üáπüáπ', 'üáπüá≥', 'üáπüá∑', 'üáπüá≤', 'üáπüá®', 'üáπüáª', 'üáªüáÆ', 'üá∫üá¨', 'üá∫üá¶', 'üá¶üá™', 'üá¨üáß', 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø', 'üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø', 'üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø', 'üá∫üá∏', 'üá∫üáæ', 'üá∫üáø', 'üáªüá∫', 'üáªüá¶', 'üáªüá™', 'üáªüá≥', 'üáºüá´', 'üá™üá≠', 'üáæüá™', 'üáøüá≤', 'üáøüáº']
        };

        let currentEmojiCategory = '–°–º–∞–π–ª—ã –∏ —ç–º–æ—Ü–∏–∏';
        let savedSelection = null; // –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —ç–º–æ–¥–∑–∏
        let savedEditor = null; // –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —ç–º–æ–¥–∑–∏

        function showEmojiPicker() {
            // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const focusedElement = document.activeElement;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç textarea (HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä)
            if (focusedElement && focusedElement.tagName === 'TEXTAREA') {
                savedEditor = focusedElement;
                // –î–ª—è textarea —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
                savedSelection = {
                    start: focusedElement.selectionStart,
                    end: focusedElement.selectionEnd
                };
            } else {
                // –î–ª—è contenteditable —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    savedSelection = selection.getRangeAt(0);

                    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤ —Ñ–æ–∫—É—Å–µ
                    if (focusedElement && focusedElement.contentEditable === 'true') {
                        savedEditor = focusedElement;
                    } else {
                        // Fallback: –ø–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑ selection
                        const range = savedSelection;
                        if (range && range.startContainer) {
                            let node = range.startContainer;
                            // –ò–¥—ë–º –≤–≤–µ—Ä—Ö –ø–æ DOM –¥–µ—Ä–µ–≤—É, –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥—ë–º contenteditable —ç–ª–µ–º–µ–Ω—Ç
                            while (node && node !== document) {
                                if (node.contentEditable === 'true') {
                                    savedEditor = node;
                                    break;
                                }
                                node = node.parentNode;
                            }
                        }
                    }
                }
            }

            const modal = document.getElementById('emojiPickerModal');
            if (!modal) return;

            // Initialize emoji picker if not already done
            const body = document.getElementById('emojiPickerBody');
            const categories = document.getElementById('emojiCategories');

            if (categories && categories.children.length === 0) {
                // Populate categories
                Object.keys(emojiData).forEach(category => {
                    const btn = document.createElement('button');
                    btn.className = 'emoji-category-btn' + (category === currentEmojiCategory ? ' active' : '');
                    btn.textContent = emojiData[category][0];
                    btn.title = category;
                    btn.onclick = () => showEmojiCategory(category);
                    categories.appendChild(btn);
                });
            }

            // Show emojis for current category
            renderCategoryEmojis(currentEmojiCategory);

            modal.classList.add('active');
        }

        function closeEmojiPicker() {
            const modal = document.getElementById('emojiPickerModal');
            if (modal) {
                modal.classList.remove('active');
            }

            // –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            savedSelection = null;
            savedEditor = null;
        }

        function showEmojiCategory(category) {
            currentEmojiCategory = category;

            // Update active category button
            const buttons = document.querySelectorAll('.emoji-category-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.title === category) {
                    btn.classList.add('active');
                }
            });

            // Render emojis for selected category only
            renderCategoryEmojis(category);
        }

        function renderCategoryEmojis(category) {
            const body = document.getElementById('emojiPickerBody');
            if (!body) return;

            body.innerHTML = '';

            if (!emojiData[category]) {
                return;
            }

            const section = document.createElement('div');
            section.className = 'emoji-category-section';

            const title = document.createElement('div');
            title.className = 'emoji-category-title';
            title.textContent = category;
            section.appendChild(title);

            const grid = document.createElement('div');
            grid.className = 'emoji-grid';

            emojiData[category].forEach(emoji => {
                const item = document.createElement('div');
                item.className = 'emoji-item';
                item.textContent = emoji;
                item.onclick = () => insertEmoji(emoji);
                grid.appendChild(item);
            });

            section.appendChild(grid);
            body.appendChild(section);
        }

        function renderAllEmojis() {
            const body = document.getElementById('emojiPickerBody');
            if (!body) return;

            body.innerHTML = '';

            Object.keys(emojiData).forEach(category => {
                const section = document.createElement('div');
                section.className = 'emoji-category-section';

                const title = document.createElement('div');
                title.className = 'emoji-category-title';
                title.textContent = category;
                section.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'emoji-grid';

                emojiData[category].forEach(emoji => {
                    const item = document.createElement('div');
                    item.className = 'emoji-item';
                    item.textContent = emoji;
                    item.onclick = () => insertEmoji(emoji);
                    grid.appendChild(item);
                });

                section.appendChild(grid);
                body.appendChild(section);
            });
        }

        function insertEmoji(emoji) {
            const editor = savedEditor;
            if (editor && savedSelection) {
                editor.focus();

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä textarea (HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä)
                if (editor.tagName === 'TEXTAREA') {
                    // –í—Å—Ç–∞–≤–∫–∞ –≤ textarea
                    const start = savedSelection.start;
                    const end = savedSelection.end;
                    const text = editor.value;

                    // –í—Å—Ç–∞–≤–ª—è–µ–º —ç–º–æ–¥–∑–∏ –≤ –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
                    editor.value = text.substring(0, start) + emoji + text.substring(end);

                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏
                    const newPos = start + emoji.length;
                    editor.setSelectionRange(newPos, newPos);

                    setDirty();
                } else {
                    // –í—Å—Ç–∞–≤–∫–∞ –≤ contenteditable —ç–ª–µ–º–µ–Ω—Ç (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)
                    const selection = window.getSelection();
                    selection.removeAllRanges();
                    selection.addRange(savedSelection);

                    // –í—Å—Ç–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏ –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
                    document.execCommand('insertText', false, emoji);
                    setDirty();
                }

                // –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                savedSelection = null;
                savedEditor = null;
            }
            closeEmojiPicker();
        }

        function filterEmojis(searchTerm) {
            const body = document.getElementById('emojiPickerBody');
            if (!body) return;

            if (!searchTerm.trim()) {
                // Return to current category when search is cleared
                renderCategoryEmojis(currentEmojiCategory);
                return;
            }

            body.innerHTML = '';
            let hasResults = false;

            // Search across all categories
            Object.keys(emojiData).forEach(category => {
                const matchingEmojis = emojiData[category];

                if (matchingEmojis.length > 0) {
                    hasResults = true;
                    const section = document.createElement('div');
                    section.className = 'emoji-category-section';

                    const title = document.createElement('div');
                    title.className = 'emoji-category-title';
                    title.textContent = category;
                    section.appendChild(title);

                    const grid = document.createElement('div');
                    grid.className = 'emoji-grid';

                    matchingEmojis.forEach(emoji => {
                        const item = document.createElement('div');
                        item.className = 'emoji-item';
                        item.textContent = emoji;
                        item.onclick = () => insertEmoji(emoji);
                        grid.appendChild(item);
                    });

                    section.appendChild(grid);
                    body.appendChild(section);
                }
            });

            if (!hasResults) {
                body.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">–≠–º–æ–¥–∑–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
            }
        }

        // Close emoji picker when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('emojiPickerModal');
            if (modal && e.target === modal) {
                closeEmojiPicker();
            }
        });

        function switchTextLanguage(lang) {

    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
    if (currentConfig) {
        loadConfigData(currentConfig);
    }

    setDirty();
}

        // Toggle config menu collapse/expand
        function toggleConfigMenu() {
            const menu = document.getElementById('dynamicConfigMenu');
            const arrow = document.getElementById('configMenuArrow');

            if (!menu || !arrow) return;

            menu.classList.toggle('expanded');
            arrow.classList.toggle('collapsed');

        }

        // Switch font platform for individual configs
        function switchFontPlatform(platform) {
            const desktopFonts = document.getElementById('fontSizesDesktop');
            const mobileFonts = document.getElementById('fontSizesMobile');

            if (platform === 'mobile') {
                if (desktopFonts) desktopFonts.classList.add('d-none');
                if (mobileFonts) mobileFonts.classList.remove('d-none');
            } else {
                if (desktopFonts) desktopFonts.classList.remove('d-none');
                if (mobileFonts) mobileFonts.classList.add('d-none');
            }
        }

       // ===============================================
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
// ===============================================
document.addEventListener('DOMContentLoaded', function() {

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ —É—Ö–æ–¥–µ
    window.addEventListener('beforeunload', function(e) {
        if (isDirty) {
            e.preventDefault();
            e.returnValue = '';
        }
    });

    // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–æ–≤
    initLanguageButtons();

    // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    if (typeof initializeBaseWidgetGrid === 'function') {
        initializeBaseWidgetGrid();
    }

    // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    if (typeof initializeWidgetGrid === 'function') {
        initializeWidgetGrid();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è drag & drop –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫
    if (typeof initializeDragAndDrop === 'function') {
        initializeDragAndDrop();
    }

    // ‚úÖ –í–ê–ñ–ù–û: –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª webchat-config.js, –ø–æ—Å–ª–µ —á–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    // –≤—ã–∑–æ–≤—É—Ç—Å—è loadConfigurationsList(), updateSidebarConfigs() –∏ —Ç.–¥.
    loadConfigurationFile();

    // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
    setTimeout(() => {
        loadBackupsList();
    }, 500);

});

// ===============================================
// –§–£–ù–ö–¶–ò–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò –ö–ù–û–ü–û–ö –Ø–ó–´–ö–û–í
// ===============================================
function initLanguageButtons() {
    // –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —è–∑—ã–∫–æ–≤
    const languageSelector = document.getElementById('supportedLanguagesSelector');
    
    if (!languageSelector) {
        return;
    }
    
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π - —Å–ª—É—à–∞–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
    languageSelector.addEventListener('click', function(e) {
        // –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à–∏–π .language-option
        const languageOption = e.target.closest('.language-option');
        
        if (!languageOption) {
            return; // –ö–ª–∏–∫ –±—ã–ª –Ω–µ –Ω–∞ –∫–Ω–æ–ø–∫–µ —è–∑—ã–∫–∞
        }
        
        e.preventDefault();
        e.stopPropagation();
        
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å selected
        languageOption.classList.toggle('selected');
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å —á–µ–∫–±–æ–∫—Å–æ–º
        const checkbox = languageOption.querySelector('input[type="checkbox"]');
        if (checkbox) {
            checkbox.checked = languageOption.classList.contains('selected');
        }
        
        // –û—Ç–º–µ—á–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        setDirty();
        
        const lang = languageOption.dataset.lang;
        const isSelected = languageOption.classList.contains('selected');
    });
    
    // –°—á–∏—Ç–∞–µ–º –∫–Ω–æ–ø–∫–∏
    const languageOptions = languageSelector.querySelectorAll('.language-option');
}

// ===============================================
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø DRAG & DROP
// ===============================================
function initializeDragAndDrop() {
    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è drag & drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
}

// ===============================================
// –ó–ê–ì–†–£–ó–ö–ê –°–ü–ò–°–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
// ===============================================
function loadConfigurationsList() {
    
    const configsContainer = document.querySelector('.config-cards');
    if (!configsContainer) {
        return;
    }
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    configsContainer.innerHTML = '';
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ ChatConfigs
    if (!window.ChatConfigs) {
        return;
    }
    
    
    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    const configNames = Object.keys(window.ChatConfigs).filter(key => 
        key !== 'apply' && 
        key !== 'manager' && 
        key !== 'getAvailable' && 
        key !== 'getSortedForUI' && 
        key !== 'shouldShowSwitcher' && 
        key !== 'getDefault' && 
        key !== 'theme' && 
        key !== 'globalSettings'
    );
    
    
    // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const configsArray = [];
    
    configNames.forEach(shortName => {
        const config = window.ChatConfigs[shortName];
        const configName = shortName + 'Config'; // finance -> financeConfig
        
        if (!config || !config.botInfo) {
            return;
        }
        
        const globalSetting = window.GlobalConfigSettings?.availableConfigs?.[configName];
        const isEnabled = globalSetting?.enabled !== false;
        const order = globalSetting?.order || config.switcherSettings?.order || 999;
        
        configsArray.push({
            configName,
            config,
            isEnabled,
            order
        });
    });
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ order
    configsArray.sort((a, b) => a.order - b.order);
    
    // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏
    configsArray.forEach(({configName, config, isEnabled, order}) => {
        const labels = config.switcherSettings?.labels || {};
        const descriptions = config.switcherSettings?.descriptions || {};
        const icon = config.botInfo?.avatar || 'üí¨';

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const currentLang = currentUILanguage || 'ru';
        const title = labels[currentLang] || labels.ru || configName;
        const description = descriptions[currentLang] || descriptions.ru || '';

        const cardHtml = `
            <div class="config-card" data-config="${configName}">
                <div class="config-card-status ${isEnabled ? '' : 'disabled'}"></div>
                <div class="config-card-icon">${icon}</div>
                <h4 class="config-card-title">${title}</h4>
                <p class="config-card-description">${description}</p>
                <div class="config-card-actions">
                    <button class="btn btn-primary btn-sm" onclick="editConfig('${configName}')">
                        ‚úèÔ∏è ${t('btn.edit')}
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="toggleConfigStatus('${configName}')">
                        üîÑ ${isEnabled ? t('btn.off') : t('btn.on')}
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="deleteConfig('${configName}')" title="${t('tooltip.delete_config')}">
                        üóëÔ∏è
                    </button>
                </div>
            </div>
        `;

        configsContainer.insertAdjacentHTML('beforeend', cardHtml);
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    const addCardHtml = `
        <div class="config-card" style="border: 2px dashed var(--border); background: var(--light); cursor: pointer;" onclick="createNewConfig()">
            <div class="config-card-icon" style="opacity: 0.5;">‚ûï</div>
            <h4 class="config-card-title" style="opacity: 0.7;">${t('configs.create_new')}</h4>
            <p class="config-card-description" style="opacity: 0.5;">${t('configs.add_custom')}</p>
        </div>
    `;
    
    configsContainer.insertAdjacentHTML('beforeend', addCardHtml);
    
}

// ===============================================
// –û–ë–ù–û–í–õ–ï–ù–ò–ï –ë–û–ö–û–í–û–ì–û –ú–ï–ù–Æ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
// ===============================================
function updateSidebarConfigs() {
    
    // –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–º–µ–Ω—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    const configSubmenu = document.getElementById('dynamicConfigMenu');
    
    if (!configSubmenu) {
        return;
    }
    
    
    // –û—á–∏—â–∞–µ–º –º–µ–Ω—é
    configSubmenu.innerHTML = '';
    
    // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if (!window.ChatConfigs) {
        return;
    }
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ –∫–ª—é—á–∏
    const serviceKeys = ['apply', 'manager', 'getAvailable', 'getSortedForUI', 'shouldShowSwitcher', 'getDefault', 'theme', 'globalSettings'];
    const configNames = Object.keys(window.ChatConfigs).filter(key => !serviceKeys.includes(key));
    
    
    // –°–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const configsArray = [];
    
    configNames.forEach(shortName => {
        const config = window.ChatConfigs[shortName];
        const configName = shortName.endsWith('Config') ? shortName : shortName + 'Config';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
        if (!config || !config.botInfo) {
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const globalSetting = window.GlobalConfigSettings?.availableConfigs?.[configName];
        const isEnabled = globalSetting?.enabled !== false;
        
        if (!isEnabled) {
            return;
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Ä—è–¥–æ–∫
        const order = globalSetting?.order || config.switcherSettings?.order || 999;
        
        configsArray.push({
            configName,
            config,
            order
        });
    });
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ order
    configsArray.sort((a, b) => a.order - b.order);
    
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ø–æ–¥–º–µ–Ω—é
    let addedCount = 0;
    
    configsArray.forEach(({configName, config}) => {
        const icon = config.botInfo?.avatar || 'üí¨';
        const name = config.botInfo?.name || configName.replace('Config', '');
        
        // –°–æ–∑–¥–∞—ë–º —ç–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é
        const navItem = document.createElement('div');
        navItem.className = 'nav-item';
        navItem.setAttribute('data-config', configName);
        
        navItem.innerHTML = `
            <span class="nav-item-icon">${icon}</span>
            <span class="nav-item-label">${name}</span>
        `;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
        navItem.addEventListener('click', function() {
            editConfig(configName);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø–æ–¥–º–µ–Ω—é
        configSubmenu.appendChild(navItem);
        
        addedCount++;
    });
    
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ–∫–æ–≤–æ–≥–æ –º–µ–Ω—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
function updateSidebarConfigs() {
    
    // –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–º–µ–Ω—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    const configSubmenu = document.querySelector('.config-submenu');
    
    if (!configSubmenu) {
        return;
    }
    
    
    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã (–±–µ–∑ data-static)
    const dynamicItems = configSubmenu.querySelectorAll('.nav-item:not([data-static])');
    dynamicItems.forEach(item => {
        item.remove();
    });
    
    
    // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if (!window.ChatConfigs) {
        return;
    }
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ –∫–ª—é—á–∏
    const serviceKeys = ['apply', 'manager', 'getAvailable', 'getSortedForUI', 'shouldShowSwitcher', 'getDefault', 'theme', 'globalSettings'];
    const configNames = Object.keys(window.ChatConfigs).filter(key => !serviceKeys.includes(key));
    
    
    // –°–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const configsArray = [];
    
    configNames.forEach(shortName => {
        const config = window.ChatConfigs[shortName];
        const configName = shortName.endsWith('Config') ? shortName : shortName + 'Config';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
        if (!config || !config.botInfo) {
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const globalSetting = window.GlobalConfigSettings?.availableConfigs?.[configName];
        const isEnabled = globalSetting?.enabled !== false;
        
        if (!isEnabled) {
            return;
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Ä—è–¥–æ–∫
        const order = globalSetting?.order || config.switcherSettings?.order || 999;
        
        configsArray.push({
            configName,
            config,
            order
        });
    });
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ order
    configsArray.sort((a, b) => a.order - b.order);
    
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ø–æ–¥–º–µ–Ω—é
    let addedCount = 0;
    
    configsArray.forEach(({configName, config}) => {
        const icon = config.botInfo?.avatar || 'üí¨';
        const name = config.botInfo?.name || configName.replace('Config', '');
        
        // –°–æ–∑–¥–∞—ë–º —ç–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é
        const navItem = document.createElement('div');
        navItem.className = 'nav-item';
        navItem.setAttribute('data-config', configName);
        
        navItem.innerHTML = `
            <span class="nav-item-icon">${icon}</span>
            <span class="nav-item-label">${name}</span>
        `;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
        navItem.addEventListener('click', function() {
            editConfig(configName);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø–æ–¥–º–µ–Ω—é
        configSubmenu.appendChild(navItem);
        
        addedCount++;
    });
    
}

// ===============================================
// –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ï–õ–ï–ö–¢–ê "–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ"
// ===============================================
function updateDefaultConfigSelector() {

    const selector = document.getElementById('defaultConfigSelector');

    if (!selector) {
        return;
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    const currentValue = selector.value || (window.GlobalConfigSettings?.configSwitcher?.defaultConfig);

    // –û—á–∏—â–∞–µ–º —Å–µ–ª–µ–∫—Ç
    selector.innerHTML = '';

    // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if (!window.ChatConfigs) {
        return;
    }

    // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ –∫–ª—é—á–∏
    const serviceKeys = ['apply', 'manager', 'getAvailable', 'getSortedForUI', 'shouldShowSwitcher', 'getDefault', 'theme', 'globalSettings'];
    const configNames = Object.keys(window.ChatConfigs).filter(key => !serviceKeys.includes(key));

    // –°–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const configsArray = [];

    configNames.forEach(shortName => {
        const config = window.ChatConfigs[shortName];
        const configName = shortName.endsWith('Config') ? shortName : shortName + 'Config';

        if (!config || !config.botInfo) {
            return;
        }

        const globalSetting = window.GlobalConfigSettings?.availableConfigs?.[configName];
        const order = globalSetting?.order || config.switcherSettings?.order || 999;

        configsArray.push({
            configName,
            config,
            order
        });
    });

    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ order
    configsArray.sort((a, b) => a.order - b.order);

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏–∏
    configsArray.forEach(({configName, config}) => {
        const icon = config.botInfo?.avatar || 'üí¨';
        const name = config.botInfo?.name || configName.replace('Config', '');

        const option = document.createElement('option');
        option.value = configName;
        option.textContent = `${icon} ${name}`;

        selector.appendChild(option);
    });

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    if (currentValue && selector.querySelector(`option[value="${currentValue}"]`)) {
        selector.value = currentValue;
    } else if (selector.options.length > 0) {
        selector.value = selector.options[0].value;
    }

}

// ===============================================
// –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ù–û–í–´–• –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
// ===============================================
function autoRegisterConfigs() {

    if (!window.ChatConfigs || !window.GlobalConfigSettings) {
        return;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º availableConfigs –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    if (!window.GlobalConfigSettings.availableConfigs) {
        window.GlobalConfigSettings.availableConfigs = {};
    }

    // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ –∫–ª—é—á–∏
    const serviceKeys = ['apply', 'manager', 'getAvailable', 'getSortedForUI', 'shouldShowSwitcher', 'getDefault', 'theme', 'globalSettings'];
    const configNames = Object.keys(window.ChatConfigs).filter(key => !serviceKeys.includes(key));

    let registered = 0;
    let maxOrder = 0;

    // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π order —Å—Ä–µ–¥–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    Object.values(window.GlobalConfigSettings.availableConfigs).forEach(setting => {
        if (setting && setting.order > maxOrder) {
            maxOrder = setting.order;
        }
    });

    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
    configNames.forEach(shortName => {
        const config = window.ChatConfigs[shortName];
        const configName = shortName.endsWith('Config') ? shortName : shortName + 'Config';

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        if (!window.GlobalConfigSettings.availableConfigs[configName]) {
            // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
            maxOrder++;
            window.GlobalConfigSettings.availableConfigs[configName] = {
                enabled: true,
                order: config.switcherSettings?.order || maxOrder
            };
            registered++;
        }
    });

    if (registered > 0) {
    } else {
    }
}

       // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
function loadConfigurationFile() {

    const script = document.createElement('script');
    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª—è–µ–º timestamp –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
    script.src = 'webchat-config.js?t=' + Date.now();

    script.onload = function() {
        
        // ‚úÖ –í–ê–ñ–ù–û: –î–∞—ë–º –≤—Ä–µ–º—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
        setTimeout(function() {
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
            
            if (typeof window.GlobalConfigSettings === 'undefined') {
                showSaveIndicator('error', t('save.loading_config_error'));
                return;
            }
            
            if (typeof window.ChatConfigs === 'undefined') {
                showSaveIndicator('error', t('save.chatconfigs_not_loaded'));
                return;
            }
            

            // ‚úÖ –ù–û–í–û–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
            autoRegisterConfigs();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            loadGlobalSettings();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
            loadConfigurationsList();

            // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
            updateSidebarConfigs();

            // ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            updateDefaultConfigSelector();

            // ‚úÖ –ù–û–í–û–ï: –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadBaseSettings();

            // ‚úÖ –ù–û–í–û–ï: –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ localStorage
            const lastEditedConfig = localStorage.getItem('lastEditedConfig');
            if (lastEditedConfig && window.ChatConfigs) {
                const shortName = lastEditedConfig.replace('Config', '');
                if (window.ChatConfigs[shortName] || window[lastEditedConfig]) {
                    currentConfig = lastEditedConfig;
                    editConfig(lastEditedConfig);
                }
            }

            // –ï—Å–ª–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - –∑–∞–≥—Ä—É–∂–∞–µ–º –µ—ë
            if (currentConfig && !lastEditedConfig) {
                loadConfigData(currentConfig);
            }
            
        }, 100); // –ó–∞–¥–µ—Ä–∂–∫–∞ 100–º—Å –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö exports
    };
    
    script.onerror = function() {
        showSaveIndicator('error', t('save.load_file_error'));
    };
    
    document.head.appendChild(script);
}

// ===============================================
// –§–£–ù–ö–¶–ò–Ø –û–¢–õ–ê–î–ö–ò
// ===============================================

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
function debugConfiguration() {
    
    if (window.ChatConfigs) {
        
        Object.keys(window.ChatConfigs).forEach(key => {
            if (typeof window.ChatConfigs[key] === 'object' && window.ChatConfigs[key]?.configId) {
                    configId: window.ChatConfigs[key].configId,
                    botInfo: window.ChatConfigs[key].botInfo,
                    hasTexts: !!window.ChatConfigs[key].texts,
                    hasContacts: !!window.ChatConfigs[key].contacts,
                    hasQuickButtons: !!window.ChatConfigs[key].texts?.ru?.quickButtons
                });
            }
        });
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ª–∞–¥–∫–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å
window.debugConfig = debugConfiguration;

// ===============================================
// –í–´–ó–û–í –ó–ê–ì–†–£–ó–ö–ò –ü–†–ò –°–¢–ê–†–¢–ï
// ===============================================

// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: loadConfigurationFile() —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ DOMContentLoaded
// (—Å–º. –≤—ã—à–µ), –∞ –Ω–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å DOM

// –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
// –§—É–Ω–∫—Ü–∏—è exportConfig() –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤—ã—à–µ (—Å—Ç—Ä–æ–∫–∞ ~6252)
// –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ export-webchat-config.php, —É–¥–∞–ª–µ–Ω–∞
// –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ø–∞–º—è—Ç–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
function loadGlobalSettings() {
    if (!window.GlobalConfigSettings) {
        return;
    }
    
    const settings = window.GlobalConfigSettings;
    
    // ============================================
    // –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
    // ============================================

    // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
    const switcherToggle = document.getElementById('showConfigSwitcherToggle');
    if (switcherToggle) {
        if (settings.showConfigSwitcher) {
            switcherToggle.classList.add('active');
        } else {
            switcherToggle.classList.remove('active');
        }
    }

    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const defaultConfigSelect = document.getElementById('defaultConfigSelector');
    if (defaultConfigSelect && settings.configSwitcher) {
        const defaultValue = settings.configSwitcher.defaultConfig;
        if (defaultValue && defaultConfigSelect.querySelector(`option[value="${defaultValue}"]`)) {
            defaultConfigSelect.value = defaultValue;
        }
    }

    // ============================================
    // API –ù–ê–°–¢–†–û–ô–ö–ò
    // ============================================

    // API Key
    const apiKeyInput = document.getElementById('globalApiKey');
    if (apiKeyInput && settings.apiKey) {
        apiKeyInput.value = settings.apiKey;
    }

    // ============================================
    // –ù–ê–°–¢–†–û–ô–ö–ò –¢–ï–ú–´
    // ============================================
    
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–µ–º–∞
    const themeSelect = document.querySelector('#global-settings .form-group select option[value="auto"]');
    if (themeSelect && settings.themeSettings) {
        themeSelect.parentElement.value = settings.themeSettings.globalTheme || 'auto';
    }
    
    // –†–∞–∑—Ä–µ—à–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã
    const allowThemesToggle = document.querySelectorAll('#global-settings .toggle-wrapper')[1]?.querySelector('.toggle-switch');
    if (allowThemesToggle && settings.themeSettings) {
        if (settings.themeSettings.allowPerConfigTheme) {
            allowThemesToggle.classList.add('active');
        } else {
            allowThemesToggle.classList.remove('active');
        }
    }
    
    // ============================================
    // –Ø–ó–´–ö–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
    // ============================================
    
    // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤
    const langSwitcherToggle = document.querySelectorAll('#global-settings .toggle-wrapper')[2]?.querySelector('.toggle-switch');
    if (langSwitcherToggle && settings.languageSettings) {
        if (settings.languageSettings.showLanguageSwitcher) {
            langSwitcherToggle.classList.add('active');
        } else {
            langSwitcherToggle.classList.remove('active');
        }
    }
    
    // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
    const autoLangToggle = document.querySelectorAll('#global-settings .toggle-wrapper')[3]?.querySelector('.toggle-switch');
    if (autoLangToggle && settings.languageSettings) {
        if (settings.languageSettings.autoDetectLanguage) {
            autoLangToggle.classList.add('active');
        } else {
            autoLangToggle.classList.remove('active');
        }
    }
    
    // –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const defaultLangSelect = document.querySelector('#global-settings select option[value="ru"]');
    if (defaultLangSelect && settings.languageSettings) {
        defaultLangSelect.parentElement.value = settings.languageSettings.fallbackLanguage || 'ru';
    }

    // ============================================
    // –ü–†–ò–û–†–ò–¢–ï–¢ –ù–ê–°–¢–†–û–ï–ö
    // ============================================

    // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const useIndividualToggle = document.getElementById('globalUseIndividualToggle');
    if (useIndividualToggle && settings.prioritySettings) {
        if (settings.prioritySettings.useIndividualSettings) {
            useIndividualToggle.classList.add('active');
        } else {
            useIndividualToggle.classList.remove('active');
        }
    }

    // –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
    const partialOverrideToggle = document.getElementById('globalPartialOverrideToggle');
    if (partialOverrideToggle && settings.prioritySettings) {
        if (settings.prioritySettings.allowPartialOverride) {
            partialOverrideToggle.classList.add('active');
        } else {
            partialOverrideToggle.classList.remove('active');
        }
    }

    // ============================================
    // –ê–ù–ò–ú–ê–¶–ò–Ø –û–¢–í–ï–¢–û–í –ò–ò
    // ============================================

    // –í–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
    const streamingEnabledToggle = document.getElementById('streamingAnimationEnabledToggle');
    if (streamingEnabledToggle && settings.streamingAnimation) {
        if (settings.streamingAnimation.enabled) {
            streamingEnabledToggle.classList.add('active');
        } else {
            streamingEnabledToggle.classList.remove('active');
        }
    }

    // –°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
    const streamingSpeedInput = document.getElementById('streamingAnimationSpeed');
    if (streamingSpeedInput && settings.streamingAnimation) {
        streamingSpeedInput.value = settings.streamingAnimation.speed || 70;
    }

    // –¢–∏–ø —Ä–∞–∑–±–∏–≤–∫–∏
    const streamingChunkTypeSelect = document.getElementById('streamingAnimationChunkType');
    if (streamingChunkTypeSelect && settings.streamingAnimation) {
        streamingChunkTypeSelect.value = settings.streamingAnimation.chunkType || 'word';
    }

}
// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –±—ç–∫–∞–ø–æ–≤
// –°—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ loadBackupsList() –∏ restoreFromBackup() —É–¥–∞–ª–µ–Ω—ã
// –ù–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—ã—à–µ (—Å—Ç—Ä–æ–∫–∏ ~6429 –∏ ~6475):
// - loadBackupsList() - –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ UI
// - restoreBackup() - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

// ===============================================
// –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò - –§–£–ù–ö–¶–ò–ò
// ===============================================

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function switchBaseTab(tab) {

    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('#base-settings .tab-content').forEach(content => {
        content.classList.remove('active');
    });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    const selectedContent = document.getElementById(`base-tab-${tab}`);
    if (selectedContent) {
        selectedContent.classList.add('active');
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('#base-settings .tab').forEach((tabBtn, index) => {
        tabBtn.classList.remove('active');
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é –≤–∫–ª–∞–¥–∫–∏
        if (tabBtn.onclick && tabBtn.onclick.toString().includes(`'${tab}'`)) {
            tabBtn.classList.add('active');
        }
    });
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è —à—Ä–∏—Ñ—Ç–æ–≤
function switchBaseFontPlatform(platform) {
    const desktopFonts = document.getElementById('baseFontSizesDesktop');
    const mobileFonts = document.getElementById('baseFontSizesMobile');
    
    if (platform === 'mobile') {
        desktopFonts.classList.add('d-none');
        mobileFonts.classList.remove('d-none');
    } else {
        desktopFonts.classList.remove('d-none');
        mobileFonts.classList.add('d-none');
    }
}

// –†–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function showBaseGradientEditor() {
    const currentGradient = document.getElementById('baseHeaderGradientPreview')?.style.background || '';

    let color1 = '#ff5400';
    let color2 = '#764ba2';
    let direction = '135deg';

    // –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
    const gradientMatch = currentGradient.match(/linear-gradient\(([^,]+),\s*(.+?)\s+0%,\s*(.+?)\s+100%\)/);
    if (gradientMatch) {
        direction = gradientMatch[1].trim();
        let c1 = gradientMatch[2].trim();
        let c2 = gradientMatch[3].trim();

        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º rgb –≤ hex –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (c1.startsWith('rgb')) {
            c1 = rgbToHex(c1);
        }
        if (c2.startsWith('rgb')) {
            c2 = rgbToHex(c2);
        }

        color1 = c1;
        color2 = c2;
    }
    
    const modal = createModal(t('modal.gradient_editor_base_title'), `
        <div class="form-group">
            <label class="form-label">${t('modal.gradient_start_color')}</label>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div style="position: relative;">
                    <div class="color-preview-large" id="baseGradient1Preview" style="width: 60px; height: 60px; background: ${color1}; border-radius: 8px; cursor: pointer; border: 2px solid #e5e7eb;" onclick="document.getElementById('baseGradient1Picker').click()"></div>
                    <input type="color" id="baseGradient1Picker" value="${color1}" style="position: absolute; opacity: 0; width: 0; height: 0; pointer-events: none;">
                </div>
                <input type="text" id="baseGradient1Hex" value="${color1}" class="form-control" placeholder="#ff5400" style="flex: 1;">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_end_color')}</label>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div style="position: relative;">
                    <div class="color-preview-large" id="baseGradient2Preview" style="width: 60px; height: 60px; background: ${color2}; border-radius: 8px; cursor: pointer; border: 2px solid #e5e7eb;" onclick="document.getElementById('baseGradient2Picker').click()"></div>
                    <input type="color" id="baseGradient2Picker" value="${color2}" style="position: absolute; opacity: 0; width: 0; height: 0; pointer-events: none;">
                </div>
                <input type="text" id="baseGradient2Hex" value="${color2}" class="form-control" placeholder="#764ba2" style="flex: 1;">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_direction')}</label>
            <select class="form-control" id="baseGradientDirection" onchange="updateBaseGradientPreview()">
                <option value="135deg" ${direction === '135deg' ? 'selected' : ''}>${t('modal.gradient_direction_diagonal')}</option>
                <option value="90deg" ${direction === '90deg' ? 'selected' : ''}>${t('modal.gradient_direction_left_right')}</option>
                <option value="180deg" ${direction === '180deg' ? 'selected' : ''}>${t('modal.gradient_direction_top_bottom')}</option>
                <option value="0deg" ${direction === '0deg' ? 'selected' : ''}>${t('modal.gradient_direction_bottom_top')}</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">${t('modal.gradient_preview')}</label>
            <div id="baseGradientLivePreview" style="width: 100%; height: 60px; border-radius: 8px; background: linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)"></div>
        </div>
    `, saveBaseGradient);
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ü–≤–µ—Ç–∞
    const picker1 = document.getElementById('baseGradient1Picker');
    const hex1 = document.getElementById('baseGradient1Hex');
    const preview1 = document.getElementById('baseGradient1Preview');
    
    if (picker1 && hex1 && preview1) {
        picker1.addEventListener('input', function() {
            const color = this.value.toUpperCase();
            hex1.value = color;
            preview1.style.background = color;
            updateBaseGradientPreview();
        });
        
        hex1.addEventListener('input', function() {
            let value = this.value.trim();
            if (value && !value.startsWith('#')) {
                value = '#' + value;
                this.value = value;
            }
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                picker1.value = value;
                preview1.style.background = value;
                updateBaseGradientPreview();
            }
        });
    }
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ü–≤–µ—Ç–∞
    const picker2 = document.getElementById('baseGradient2Picker');
    const hex2 = document.getElementById('baseGradient2Hex');
    const preview2 = document.getElementById('baseGradient2Preview');
    
    if (picker2 && hex2 && preview2) {
        picker2.addEventListener('input', function() {
            const color = this.value.toUpperCase();
            hex2.value = color;
            preview2.style.background = color;
            updateBaseGradientPreview();
        });
        
        hex2.addEventListener('input', function() {
            let value = this.value.trim();
            if (value && !value.startsWith('#')) {
                value = '#' + value;
                this.value = value;
            }
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                picker2.value = value;
                preview2.style.background = value;
                updateBaseGradientPreview();
            }
        });
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function updateBaseGradientPreview() {
    const color1 = document.getElementById('baseGradient1Hex')?.value || '#ff5400';
    const color2 = document.getElementById('baseGradient2Hex')?.value || '#764ba2';
    const direction = document.getElementById('baseGradientDirection')?.value || '135deg';
    
    const gradient = `linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)`;
    
    const preview = document.getElementById('baseGradientLivePreview');
    if (preview) {
        preview.style.background = gradient;
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function saveBaseGradient() {
    const color1 = document.getElementById('baseGradient1Hex')?.value || '#ff5400';
    const color2 = document.getElementById('baseGradient2Hex')?.value || '#764ba2';
    const direction = document.getElementById('baseGradientDirection')?.value || '135deg';
    
    const gradient = `linear-gradient(${direction}, ${color1} 0%, ${color2} 100%)`;
    
    const headerPreview = document.getElementById('baseHeaderGradientPreview');
    if (headerPreview) {
        headerPreview.style.background = gradient;
    }
    
    setDirty();
    closeModal();
    
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
function loadBaseSettings() {
    
    if (!window.baseConfig) {
        return;
    }
    
    const base = window.baseConfig;
    
    // ============================================
    // –ü–û–í–ï–î–ï–ù–ò–ï
    // ============================================
    if (base.behavior) {
        const behavior = base.behavior;
        
        // autoOpen
        const autoOpenToggle = document.getElementById('baseAutoOpenToggle');
        if (autoOpenToggle && behavior.autoOpen !== undefined) {
            if (behavior.autoOpen) {
                autoOpenToggle.classList.add('active');
                document.getElementById('baseAutoOpenDelayGroup').style.display = 'block';
            } else {
                autoOpenToggle.classList.remove('active');
                document.getElementById('baseAutoOpenDelayGroup').style.display = 'none';
            }
        }
        
        // autoOpenDelay
        const autoOpenDelayInput = document.getElementById('baseAutoOpenDelayInput');
        if (autoOpenDelayInput && behavior.autoOpenDelay) {
            autoOpenDelayInput.value = behavior.autoOpenDelay;
        }
        
        // autoFocus
        const autoFocusToggle = document.getElementById('baseAutoFocusToggle');
        if (autoFocusToggle && behavior.autoFocus !== undefined) {
            if (behavior.autoFocus) {
                autoFocusToggle.classList.add('active');
            } else {
                autoFocusToggle.classList.remove('active');
            }
        }
        
        // showWelcome
        const showWelcomeToggle = document.getElementById('baseShowWelcomeToggle');
        if (showWelcomeToggle && behavior.showWelcome !== undefined) {
            if (behavior.showWelcome) {
                showWelcomeToggle.classList.add('active');
            } else {
                showWelcomeToggle.classList.remove('active');
            }
        }
        
        // showQuickButtons
        const showQuickButtonsToggle = document.getElementById('baseShowQuickButtonsToggle');
        if (showQuickButtonsToggle && behavior.showQuickButtons !== undefined) {
            if (behavior.showQuickButtons) {
                showQuickButtonsToggle.classList.add('active');
            } else {
                showQuickButtonsToggle.classList.remove('active');
            }
        }
        
        // quickButtonsCollapsed
        const quickButtonsCollapsedToggle = document.getElementById('baseQuickButtonsCollapsedToggle');
        if (quickButtonsCollapsedToggle && behavior.quickButtonsCollapsed !== undefined) {
            if (behavior.quickButtonsCollapsed) {
                quickButtonsCollapsedToggle.classList.add('active');
            } else {
                quickButtonsCollapsedToggle.classList.remove('active');
            }
        }
        
        // enableVoice
        const enableVoiceToggle = document.getElementById('baseEnableVoiceToggle');
        if (enableVoiceToggle && behavior.enableVoice !== undefined) {
            if (behavior.enableVoice) {
                enableVoiceToggle.classList.add('active');
            } else {
                enableVoiceToggle.classList.remove('active');
            }
        }
        
        // enableFileUpload
        const enableFileUploadToggle = document.getElementById('baseEnableFileUploadToggle');
        if (enableFileUploadToggle && behavior.enableFileUpload !== undefined) {
            if (behavior.enableFileUpload) {
                enableFileUploadToggle.classList.add('active');
            } else {
                enableFileUploadToggle.classList.remove('active');
            }
        }
        
        // enablePasteImages
        const enablePasteImagesToggle = document.getElementById('baseEnablePasteImagesToggle');
        if (enablePasteImagesToggle && behavior.enablePasteImages !== undefined) {
            if (behavior.enablePasteImages) {
                enablePasteImagesToggle.classList.add('active');
            } else {
                enablePasteImagesToggle.classList.remove('active');
            }
        }
        
        // showInputArea
        const showInputAreaToggle = document.getElementById('baseShowInputAreaToggle');
        if (showInputAreaToggle && behavior.showInputArea !== undefined) {
            if (behavior.showInputArea) {
                showInputAreaToggle.classList.add('active');
            } else {
                showInputAreaToggle.classList.remove('active');
            }
        }
        
        // saveHistory
        const saveHistoryToggle = document.getElementById('baseSaveHistoryToggle');
        if (saveHistoryToggle && behavior.saveHistory !== undefined) {
            if (behavior.saveHistory) {
                saveHistoryToggle.classList.add('active');
            } else {
                saveHistoryToggle.classList.remove('active');
            }
        }
        
        // historyLifetime
        const historyLifetimeInput = document.getElementById('baseHistoryLifetimeInput');
        if (historyLifetimeInput && behavior.historyLifetime) {
            historyLifetimeInput.value = behavior.historyLifetime;
        }
        
        // maxHistoryMessages
        const maxHistoryMessagesInput = document.getElementById('baseMaxHistoryMessagesInput');
        if (maxHistoryMessagesInput && behavior.maxHistoryMessages) {
            maxHistoryMessagesInput.value = behavior.maxHistoryMessages;
        }
        
        // enablePopoutMode
        const enablePopoutModeToggle = document.getElementById('baseEnablePopoutModeToggle');
        if (enablePopoutModeToggle && behavior.enablePopoutMode !== undefined) {
            if (behavior.enablePopoutMode) {
                enablePopoutModeToggle.classList.add('active');
            } else {
                enablePopoutModeToggle.classList.remove('active');
            }
        }
        
        // popoutWindowSize
        if (behavior.popoutWindowSize) {
            const widthInput = document.getElementById('basePopoutWindowWidthInput');
            const heightInput = document.getElementById('basePopoutWindowHeightInput');
            
            if (widthInput && behavior.popoutWindowSize.width) {
                widthInput.value = behavior.popoutWindowSize.width;
            }
            if (heightInput && behavior.popoutWindowSize.height) {
                heightInput.value = behavior.popoutWindowSize.height;
            }
        }
    }
    
    // ============================================
    // –í–ù–ï–®–ù–ò–ô –í–ò–î
    // ============================================
    if (base.appearance) {
        const appearance = base.appearance;
        
        // position
        const positionSelect = document.getElementById('basePositionSelect');
        if (positionSelect && appearance.position) {
            positionSelect.value = appearance.position;
        }


        // dimensions
        if (appearance.dimensions) {
            const widthInput = document.getElementById('baseWidthInput');
            const heightInput = document.getElementById('baseHeightInput');
            
            if (widthInput && appearance.dimensions.width) {
                widthInput.value = appearance.dimensions.width;
            }
            if (heightInput && appearance.dimensions.height) {
                heightInput.value = appearance.dimensions.height;
            }
        }
        
        // margins
        if (appearance.margins) {
            const marginTop = document.getElementById('baseMarginTop');
            const marginRight = document.getElementById('baseMarginRight');
            const marginBottom = document.getElementById('baseMarginBottom');
            const marginLeft = document.getElementById('baseMarginLeft');
            
            if (marginTop && appearance.margins.top !== undefined) marginTop.value = appearance.margins.top;
            if (marginRight && appearance.margins.right !== undefined) marginRight.value = appearance.margins.right;
            if (marginBottom && appearance.margins.bottom !== undefined) marginBottom.value = appearance.margins.bottom;
            if (marginLeft && appearance.margins.left !== undefined) marginLeft.value = appearance.margins.left;
        }

        // colors
        if (appearance.colors) {
            // header
            if (appearance.colors.header) {
                const headerGradientPreview = document.getElementById('baseHeaderGradientPreview');
                if (headerGradientPreview && appearance.colors.header.background) {
                    headerGradientPreview.style.background = appearance.colors.header.background;
                }
                
                if (appearance.colors.header.textColor) {
                    const preview = document.getElementById('baseHeaderTextColorPreview');
                    const input = document.getElementById('baseHeaderTextColorInput');
                    const value = document.getElementById('baseHeaderTextColorValue');
                    
                    if (preview) preview.style.background = appearance.colors.header.textColor;
                    if (input) input.value = appearance.colors.header.textColor;
                    if (value) value.textContent = appearance.colors.header.textColor;
                }
            }
            
            // buttons
            if (appearance.colors.buttons) {
                if (appearance.colors.buttons.background) {
                    const preview = document.getElementById('baseButtonColorPreview');
                    const input = document.getElementById('baseButtonColorInput');
                    const value = document.getElementById('baseButtonColorValue');
                    
                    if (preview) preview.style.background = appearance.colors.buttons.background;
                    if (input) input.value = appearance.colors.buttons.background;
                    if (value) value.textContent = appearance.colors.buttons.background;
                }
                
                if (appearance.colors.buttons.hoverBackground) {
                    const preview = document.getElementById('baseButtonHoverColorPreview');
                    const input = document.getElementById('baseButtonHoverColorInput');
                    const value = document.getElementById('baseButtonHoverColorValue');
                    
                    if (preview) preview.style.background = appearance.colors.buttons.hoverBackground;
                    if (input) input.value = appearance.colors.buttons.hoverBackground;
                    if (value) value.textContent = appearance.colors.buttons.hoverBackground;
                }
            }
            
            // userMessage
            if (appearance.colors.userMessage) {
                if (appearance.colors.userMessage.background) {
                    const preview = document.getElementById('baseUserMessageColorPreview');
                    const input = document.getElementById('baseUserMessageColorInput');
                    const value = document.getElementById('baseUserMessageColorValue');
                    
                    if (preview) preview.style.background = appearance.colors.userMessage.background;
                    if (input) input.value = appearance.colors.userMessage.background;
                    if (value) value.textContent = appearance.colors.userMessage.background;
                }
                
                if (appearance.colors.userMessage.textColor) {
                    const preview = document.getElementById('baseUserMessageTextColorPreview');
                    const input = document.getElementById('baseUserMessageTextColorInput');
                    const value = document.getElementById('baseUserMessageTextColorValue');
                    
                    if (preview) preview.style.background = appearance.colors.userMessage.textColor;
                    if (input) input.value = appearance.colors.userMessage.textColor;
                    if (value) value.textContent = appearance.colors.userMessage.textColor;
                }
            }
        }
        
        // fonts
        const fontFamilySelect = document.getElementById('baseFontFamilySelect');
        if (appearance.fonts) {
            if (fontFamilySelect && appearance.fonts.desktop?.family) {
                fontFamilySelect.value = appearance.fonts.desktop.family;
            }
        } else {
            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Roboto –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ fonts –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
            if (fontFamilySelect) {
                fontFamilySelect.value = "'Roboto', sans-serif";
            }
        }

        if (appearance.fonts) {
            
            // desktop fonts
            if (appearance.fonts.desktop) {
                const messageSize = document.getElementById('baseDesktopFontMessageSize');
                const headerSize = document.getElementById('baseDesktopFontHeaderSize');
                const quickButtonSize = document.getElementById('baseDesktopFontQuickButtonSize');
                
                if (messageSize && appearance.fonts.desktop.messageSize) {
                    messageSize.value = appearance.fonts.desktop.messageSize;
                }
                if (headerSize && appearance.fonts.desktop.headerSize) {
                    headerSize.value = appearance.fonts.desktop.headerSize;
                }
                if (quickButtonSize && appearance.fonts.desktop.quickButtonSize) {
                    quickButtonSize.value = appearance.fonts.desktop.quickButtonSize;
                }
            }
            
            // mobile fonts
            if (appearance.fonts.mobile) {
                const messageSize = document.getElementById('baseMobileFontMessageSize');
                const headerSize = document.getElementById('baseMobileFontHeaderSize');
                const quickButtonSize = document.getElementById('baseMobileFontQuickButtonSize');
                
                if (messageSize && appearance.fonts.mobile.messageSize) {
                    messageSize.value = appearance.fonts.mobile.messageSize;
                }
                if (headerSize && appearance.fonts.mobile.headerSize) {
                    headerSize.value = appearance.fonts.mobile.headerSize;
                }
                if (quickButtonSize && appearance.fonts.mobile.quickButtonSize) {
                    quickButtonSize.value = appearance.fonts.mobile.quickButtonSize;
                }
            }
        }

        // theme
        if (appearance.theme) {
            const themeModeSelect = document.getElementById('baseThemeModeSelect');
            const themePreferredSchemeSelect = document.getElementById('baseThemePreferredSchemeSelect');

            if (themeModeSelect && appearance.theme.mode) {
                themeModeSelect.value = appearance.theme.mode;
            }
            if (themePreferredSchemeSelect && appearance.theme.preferredScheme) {
                themePreferredSchemeSelect.value = appearance.theme.preferredScheme;
            }
        }

        // widget
        if (appearance.widget) {
            // widgetType - select the correct card
            if (appearance.widget.type) {
                const allCards = document.querySelectorAll('#baseWidgetTypeGrid .widget-type-card');
                allCards.forEach(card => {
                    if (card.dataset.widgetName === appearance.widget.type) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                });
            }

            // animationSpeed
            const animationSpeedInput = document.getElementById('baseWidgetAnimationSpeed');
            const animationSpeedValue = document.getElementById('baseWidgetAnimationSpeedValue');
            if (animationSpeedInput && appearance.widget.animationSpeed) {
                animationSpeedInput.value = appearance.widget.animationSpeed;
                if (animationSpeedValue) {
                    animationSpeedValue.textContent = appearance.widget.animationSpeed + 's';
                }
            }

            // size
            const sizeInput = document.getElementById('baseWidgetSize');
            const sizeValue = document.getElementById('baseWidgetSizeValue');
            if (sizeInput && appearance.widget.size) {
                sizeInput.value = appearance.widget.size;
                if (sizeValue) {
                    sizeValue.textContent = appearance.widget.size + 'px';
                }
            }

            // primaryColor
            if (appearance.widget.primaryColor) {
                const preview = document.getElementById('baseWidgetPrimaryColorPreview');
                const input = document.getElementById('baseWidgetPrimaryColorInput');
                const value = document.getElementById('baseWidgetPrimaryColorValue');

                if (preview) preview.style.background = appearance.widget.primaryColor;
                if (input) input.value = appearance.widget.primaryColor;
                if (value) value.textContent = appearance.widget.primaryColor;
            }

            // icon
            const iconInput = document.getElementById('baseWidgetIcon');
            if (iconInput && appearance.widget.icon) {
                iconInput.value = appearance.widget.icon;
            }

            // position
            const positionSelect = document.getElementById('baseWidgetPosition');
            if (positionSelect && appearance.widget.position) {
                positionSelect.value = appearance.widget.position;
            }

            // margins
            if (appearance.widget.margins) {
                const marginTop = document.getElementById('baseWidgetMarginTop');
                const marginRight = document.getElementById('baseWidgetMarginRight');
                const marginBottom = document.getElementById('baseWidgetMarginBottom');
                const marginLeft = document.getElementById('baseWidgetMarginLeft');

                if (marginTop && appearance.widget.margins.top !== undefined) marginTop.value = appearance.widget.margins.top;
                if (marginRight && appearance.widget.margins.right !== undefined) marginRight.value = appearance.widget.margins.right;
                if (marginBottom && appearance.widget.margins.bottom !== undefined) marginBottom.value = appearance.widget.margins.bottom;
                if (marginLeft && appearance.widget.margins.left !== undefined) marginLeft.value = appearance.widget.margins.left;
            }
        }
    }

    // ============================================
    // –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï
    // ============================================
    if (base.technical) {
        const technical = base.technical;
        
        // requestTimeout
        const requestTimeoutInput = document.getElementById('baseRequestTimeoutInput');
        if (requestTimeoutInput && technical.requestTimeout) {
            requestTimeoutInput.value = technical.requestTimeout;
        }
        
        // maxMessageLength
        const maxMessageLengthInput = document.getElementById('baseMaxMessageLengthInput');
        if (maxMessageLengthInput && technical.maxMessageLength) {
            maxMessageLengthInput.value = technical.maxMessageLength;
        }
        
        // debug
        const debugToggle = document.getElementById('baseDebugToggle');
        if (debugToggle && technical.debug !== undefined) {
            if (technical.debug) {
                debugToggle.classList.add('active');
            } else {
                debugToggle.classList.remove('active');
            }
        }
        
        // maxVoiceDuration
        const maxVoiceDurationInput = document.getElementById('baseMaxVoiceDurationInput');
        if (maxVoiceDurationInput && technical.maxVoiceDuration) {
            maxVoiceDurationInput.value = technical.maxVoiceDuration;
        }
        
        // maxFileSize
        const maxFileSizeInput = document.getElementById('baseMaxFileSizeInput');
        if (maxFileSizeInput && technical.maxFileSize) {
            maxFileSizeInput.value = technical.maxFileSize / (1024 * 1024); // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ MB
        }
        
        // voiceSettings
        if (technical.voiceSettings) {
            const voiceSettings = technical.voiceSettings;
            
            // fileFormat
            const voiceFormatSelect = document.getElementById('baseVoiceFormatSelect');
            if (voiceFormatSelect && voiceSettings.fileFormat) {
                voiceFormatSelect.value = voiceSettings.fileFormat;
            }
            
            // enableServerStorage
            const enableServerStorageToggle = document.getElementById('baseEnableServerStorageToggle');
            if (enableServerStorageToggle && voiceSettings.enableServerStorage !== undefined) {
                if (voiceSettings.enableServerStorage) {
                    enableServerStorageToggle.classList.add('active');
                } else {
                    enableServerStorageToggle.classList.remove('active');
                }
            }
            
            // uploadEndpoint
            const uploadEndpointInput = document.getElementById('baseVoiceUploadEndpoint');
            if (uploadEndpointInput && voiceSettings.uploadEndpoint) {
                uploadEndpointInput.value = voiceSettings.uploadEndpoint;
            }
            
            // downloadEndpoint
            const downloadEndpointInput = document.getElementById('baseVoiceDownloadEndpoint');
            if (downloadEndpointInput && voiceSettings.downloadEndpoint) {
                downloadEndpointInput.value = voiceSettings.downloadEndpoint;
            }
            
            // filePrefix
            const filePrefixInput = document.getElementById('baseVoiceFilePrefix');
            if (filePrefixInput && voiceSettings.filePrefix) {
                filePrefixInput.value = voiceSettings.filePrefix;
            }
            
            // maxVoiceSize
            const maxVoiceSizeInput = document.getElementById('baseMaxVoiceSizeInput');
            if (maxVoiceSizeInput && voiceSettings.maxVoiceSize) {
                maxVoiceSizeInput.value = voiceSettings.maxVoiceSize / (1024 * 1024); // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ MB
            }
            
            // enableLocalFallback
            const enableLocalFallbackToggle = document.getElementById('baseEnableLocalFallbackToggle');
            if (enableLocalFallbackToggle && voiceSettings.enableLocalFallback !== undefined) {
                if (voiceSettings.enableLocalFallback) {
                    enableLocalFallbackToggle.classList.add('active');
                } else {
                    enableLocalFallbackToggle.classList.remove('active');
                }
            }
        }
        
        // allowedFileTypes
        if (technical.allowedFileTypes && Array.isArray(technical.allowedFileTypes)) {
            const allowImages = document.getElementById('baseAllowImages');
            const allowPDF = document.getElementById('baseAllowPDF');
            const allowText = document.getElementById('baseAllowText');
            const allowOffice = document.getElementById('baseAllowOffice');
            
            if (allowImages) {
                allowImages.checked = technical.allowedFileTypes.some(type => type.startsWith('image/'));
            }
            if (allowPDF) {
                allowPDF.checked = technical.allowedFileTypes.includes('application/pdf');
            }
            if (allowText) {
                allowText.checked = technical.allowedFileTypes.includes('text/plain') || technical.allowedFileTypes.includes('text/csv');
            }
            if (allowOffice) {
                allowOffice.checked = technical.allowedFileTypes.some(type => 
                    type.includes('msword') || type.includes('spreadsheet') || type.includes('officedocument')
                );
            }
        }
    }
    
    // ============================================
    // –ú–û–ù–ò–¢–û–†–ò–ù–ì
    // ============================================
    if (base.monitoring) {
        const monitoring = base.monitoring;
        
        // enabled
        const monitoringEnabledToggle = document.getElementById('baseMonitoringEnabledToggle');
        if (monitoringEnabledToggle && monitoring.enabled !== undefined) {
            if (monitoring.enabled) {
                monitoringEnabledToggle.classList.add('active');
            } else {
                monitoringEnabledToggle.classList.remove('active');
            }
        }
        
        // endpoint
        const monitoringUrlInput = document.getElementById('baseMonitoringUrlInput');
        if (monitoringUrlInput && monitoring.endpoint) {
            monitoringUrlInput.value = monitoring.endpoint;
        }
    }
    
}

// –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function collectBaseSettings() {
    
    const baseSettings = {
        behavior: {
            autoOpen: document.getElementById('baseAutoOpenToggle')?.classList.contains('active') || false,
            autoOpenDelay: parseInt(document.getElementById('baseAutoOpenDelayInput')?.value) || 10000,
            autoFocus: document.getElementById('baseAutoFocusToggle')?.classList.contains('active') || false,
            showWelcome: document.getElementById('baseShowWelcomeToggle')?.classList.contains('active') || false,
            showQuickButtons: document.getElementById('baseShowQuickButtonsToggle')?.classList.contains('active') || false,
            quickButtonsCollapsed: document.getElementById('baseQuickButtonsCollapsedToggle')?.classList.contains('active') || false,
            enableVoice: document.getElementById('baseEnableVoiceToggle')?.classList.contains('active') || false,
            enableFileUpload: document.getElementById('baseEnableFileUploadToggle')?.classList.contains('active') || false,
            enablePasteImages: document.getElementById('baseEnablePasteImagesToggle')?.classList.contains('active') || false,
            showInputArea: document.getElementById('baseShowInputAreaToggle')?.classList.contains('active') || false,
            saveHistory: document.getElementById('baseSaveHistoryToggle')?.classList.contains('active') || false,
            historyLifetime: parseInt(document.getElementById('baseHistoryLifetimeInput')?.value) || 72,
            maxHistoryMessages: parseInt(document.getElementById('baseMaxHistoryMessagesInput')?.value) || 50,
            enablePopoutMode: document.getElementById('baseEnablePopoutModeToggle')?.classList.contains('active') || false,
            popoutWindowSize: {
                width: parseInt(document.getElementById('basePopoutWindowWidthInput')?.value) || 500,
                height: parseInt(document.getElementById('basePopoutWindowHeightInput')?.value) || 770
            }
        },
        
        appearance: {
            position: document.getElementById('basePositionSelect')?.value || 'bottom-right',
            dimensions: {
                width: parseInt(document.getElementById('baseWidthInput')?.value) || 450,
                height: parseInt(document.getElementById('baseHeightInput')?.value) || 700
            },
            margins: {
                top: parseInt(document.getElementById('baseMarginTop')?.value) || 20,
                right: parseInt(document.getElementById('baseMarginRight')?.value) || 60,
                bottom: parseInt(document.getElementById('baseMarginBottom')?.value) || 10,
                left: parseInt(document.getElementById('baseMarginLeft')?.value) || 20
            },
            fonts: {
                desktop: {
                    family: document.getElementById('baseFontFamilySelect')?.value || "'Roboto', sans-serif",
                    messageSize: document.getElementById('baseDesktopFontMessageSize')?.value || '14px',
                    headerSize: document.getElementById('baseDesktopFontHeaderSize')?.value || '18px',
                    quickButtonSize: document.getElementById('baseDesktopFontQuickButtonSize')?.value || '13px'
                },
                mobile: {
                    family: document.getElementById('baseFontFamilySelect')?.value || "'Roboto', sans-serif",
                    messageSize: document.getElementById('baseMobileFontMessageSize')?.value || '16px',
                    headerSize: document.getElementById('baseMobileFontHeaderSize')?.value || '16px',
                    quickButtonSize: document.getElementById('baseMobileFontQuickButtonSize')?.value || '14px'
                }
            },
            colors: {
                header: {
                    background: document.getElementById('baseHeaderGradientPreview')?.style.background || 'linear-gradient(135deg, #ff5400 0%, #764ba2 100%)',
                    textColor: document.getElementById('baseHeaderTextColorInput')?.value || '#ffffff'
                },
                buttons: {
                    background: document.getElementById('baseButtonColorInput')?.value || '#ff5400',
                    hoverBackground: document.getElementById('baseButtonHoverColorInput')?.value || '#5a67d8',
                    textColor: '#ffffff'
                },
                userMessage: {
                    background: document.getElementById('baseUserMessageColorInput')?.value || '#ff5400',
                    textColor: document.getElementById('baseUserMessageTextColorInput')?.value || '#ffffff'
                }
            },
            theme: {
                mode: document.getElementById('baseThemeModeSelect')?.value || 'auto',
                preferredScheme: document.getElementById('baseThemePreferredSchemeSelect')?.value || 'auto'
            },
            widget: {
                type: (() => {
                    const selectedCard = document.querySelector('#baseWidgetTypeGrid .widget-type-card.selected');
                    return selectedCard ? selectedCard.dataset.widgetName : 'Neural Network Pulse';
                })(),
                animationSpeed: parseFloat(document.getElementById('baseWidgetAnimationSpeed')?.value) || 2,
                size: parseInt(document.getElementById('baseWidgetSize')?.value) || 70,
                primaryColor: document.getElementById('baseWidgetPrimaryColorInput')?.value || '#667eea',
                icon: document.getElementById('baseWidgetIcon')?.value || 'üí¨',
                position: document.getElementById('baseWidgetPosition')?.value || 'bottom-right',
                margins: {
                    top: parseInt(document.getElementById('baseWidgetMarginTop')?.value) || 20,
                    right: parseInt(document.getElementById('baseWidgetMarginRight')?.value) || 60,
                    bottom: parseInt(document.getElementById('baseWidgetMarginBottom')?.value) || 10,
                    left: parseInt(document.getElementById('baseWidgetMarginLeft')?.value) || 20
                }
            }
        },

        technical: {
            requestTimeout: parseInt(document.getElementById('baseRequestTimeoutInput')?.value) || 300000,
            maxMessageLength: parseInt(document.getElementById('baseMaxMessageLengthInput')?.value) || 1000,
            debug: document.getElementById('baseDebugToggle')?.classList.contains('active') || false,
            maxVoiceDuration: parseInt(document.getElementById('baseMaxVoiceDurationInput')?.value) || 600,
            maxFileSize: (parseFloat(document.getElementById('baseMaxFileSizeInput')?.value) || 10) * 1024 * 1024,
            allowedFileTypes: (() => {
                const types = [];
                
                const allowImages = document.getElementById('baseAllowImages');
                if (allowImages && allowImages.checked) {
                    types.push('image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/bmp');
                }
                
                const allowPDF = document.getElementById('baseAllowPDF');
                if (allowPDF && allowPDF.checked) {
                    types.push('application/pdf');
                }
                
                const allowText = document.getElementById('baseAllowText');
                if (allowText && allowText.checked) {
                    types.push('text/plain', 'text/csv');
                }
                
                const allowOffice = document.getElementById('baseAllowOffice');
                if (allowOffice && allowOffice.checked) {
                    types.push(
                        'application/msword',
                        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                        'application/vnd.ms-excel',
                        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
                    );
                }
                
                return types;
            })(),
            voiceSettings: {
                enableServerStorage: document.getElementById('baseEnableServerStorageToggle')?.classList.contains('active') || false,
                uploadEndpoint: document.getElementById('baseVoiceUploadEndpoint')?.value || '/upload-voice.php',
                downloadEndpoint: document.getElementById('baseVoiceDownloadEndpoint')?.value || '/voices/',
                fileFormat: document.getElementById('baseVoiceFormatSelect')?.value || 'ogg',
                filePrefix: document.getElementById('baseVoiceFilePrefix')?.value || 'voice_message_',
                maxVoiceSize: (parseFloat(document.getElementById('baseMaxVoiceSizeInput')?.value) || 5) * 1024 * 1024,
                enableLocalFallback: document.getElementById('baseEnableLocalFallbackToggle')?.classList.contains('active') || false
            }
        },
        
        monitoring: {
            enabled: document.getElementById('baseMonitoringEnabledToggle')?.classList.contains('active') || false,
            endpoint: document.getElementById('baseMonitoringUrlInput')?.value || 'https://n8n.cryptomator.pro/webhook/chat-monitoring'
        },

        branding: window.baseConfig?.branding ? {
            enabled: document.getElementById('brandingEnabledToggle')?.classList.contains('active') || false,
            logoType: document.getElementById('brandingLogoType')?.value || 'svg',
            logoSvg: document.getElementById('brandingLogoSvg')?.value || '',
            icon: document.getElementById('brandingIcon')?.value || 'ü§ñ',
            imageUrl: document.getElementById('brandingImageUrl')?.value || '',
            companyName: document.getElementById('brandingCompanyName')?.value || '',
            companyUrl: document.getElementById('brandingCompanyUrl')?.value || '',
            poweredByText: document.getElementById('brandingPoweredByText')?.value || '',
            size: {
                logoWidth: parseInt(document.getElementById('brandingLogoWidth')?.value) || 32,
                logoHeight: parseInt(document.getElementById('brandingLogoHeight')?.value) || 32,
                fontSize: parseInt(document.getElementById('brandingFontSize')?.value) || 12
            }
        } : undefined
    };

    return baseSettings;
}
// ===============================================
// –°–û–•–†–ê–ù–ï–ù–ò–ï –ì–õ–û–ë–ê–õ–¨–ù–´–• –ù–ê–°–¢–†–û–ï–ö
// ===============================================
function saveGlobalSettings() {

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É GlobalConfigSettings –∏–∑ –ø–∞–º—è—Ç–∏
    const existingGlobalSettings = window.GlobalConfigSettings || {};

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°—á–∏—Ç—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã –¥–ª—è –ø–æ–ª–µ–π —Å UI, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
    const globalSettings = {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
        ...existingGlobalSettings,

        // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
        showConfigSwitcher: document.getElementById('showConfigSwitcherToggle')?.classList.contains('active') !== false,

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –í–°–Æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É languageSettings –≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
        languageSettings: {
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤
            showLanguageSwitcher: document.querySelectorAll('#global-settings .toggle-wrapper')[2]?.querySelector('.toggle-switch')?.classList.contains('active') !== false,
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
            autoDetectLanguage: document.querySelectorAll('#global-settings .toggle-wrapper')[3]?.querySelector('.toggle-switch')?.classList.contains('active') !== false,
            // ‚úÖ –°–û–•–†–ê–ù–Ø–ï–ú: rememberUserChoice (–Ω–µ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–∞)
            rememberUserChoice: existingGlobalSettings.languageSettings?.rememberUserChoice !== undefined ? existingGlobalSettings.languageSettings.rememberUserChoice : true,
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            fallbackLanguage: document.querySelector('#global-settings select option[value="ru"]')?.parentElement?.value || 'ru',
            // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç iconSettings
            iconSettings: existingGlobalSettings.languageSettings?.iconSettings ?
                // –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é
                existingGlobalSettings.languageSettings.iconSettings
                :
                // –ò–Ω–∞—á–µ —Å–æ–∑–¥–∞–µ–º —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
                {
                    type: 'flags',
                    showTooltips: true,
                    customIcons: {
                        'ru': 'üá∑üá∫', 'en': 'üá∫üá∏', 'es': 'üá™üá∏', 'fr': 'üá´üá∑',
                        'de': 'üá©üá™', 'it': 'üáÆüáπ', 'pt': 'üáµüáπ', 'zh': 'üá®üá≥',
                        'ja': 'üáØüáµ', 'ko': 'üá∞üá∑', 'ua': 'üá∫üá¶'
                    },
                    languageNames: {
                        'ru': { ru: '–†—É—Å—Å–∫–∏–π', en: 'Russian', ua: '–†–æ—Å—ñ–π—Å—å–∫–∞', fr: 'Russe' },
                        'en': { ru: '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π', en: 'English', ua: '–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞', fr: 'Anglais' },
                        'es': { ru: '–ò—Å–ø–∞–Ω—Å–∫–∏–π', en: 'Spanish', ua: '–Ü—Å–ø–∞–Ω—Å—å–∫–∞', fr: 'Espagnol' },
                        'fr': { ru: '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π', en: 'French', ua: '–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞', fr: 'Fran√ßais' },
                        'de': { ru: '–ù–µ–º–µ—Ü–∫–∏–π', en: 'German', ua: '–ù—ñ–º–µ—Ü—å–∫–∞', fr: 'Allemand' },
                        'it': { ru: '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π', en: 'Italian', ua: '–Ü—Ç–∞–ª—ñ–π—Å—å–∫–∞', fr: 'Italien' },
                        'pt': { ru: '–ü–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π', en: 'Portuguese', ua: '–ü–æ—Ä—Ç—É–≥–∞–ª—å—Å—å–∫–∞', fr: 'Portugais' },
                        'zh': { ru: '–ö–∏—Ç–∞–π—Å–∫–∏–π', en: 'Chinese', ua: '–ö–∏—Ç–∞–π—Å—å–∫–∞', fr: 'Chinois' },
                        'ja': { ru: '–Ø–ø–æ–Ω—Å–∫–∏–π', en: 'Japanese', ua: '–Ø–ø–æ–Ω—Å—å–∫–∞', fr: 'Japonais' },
                        'ko': { ru: '–ö–æ—Ä–µ–π—Å–∫–∏–π', en: 'Korean', ua: '–ö–æ—Ä–µ–π—Å—å–∫–∞', fr: 'Cor√©en' },
                        'ua': { ru: '–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π', en: 'Ukrainian', ua: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞', fr: 'Ukrainien' }
                    }
                }
        },

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑ —Ñ–æ—Ä–º—ã
        prioritySettings: {
            useIndividualSettings: document.getElementById('globalUseIndividualToggle')?.classList.contains('active') || false,
            allowPartialOverride: document.getElementById('globalPartialOverrideToggle')?.classList.contains('active') || false
        },

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –í–°–ï –ø–æ–ª—è themeSettings –≤–∫–ª—é—á–∞—è userCanChange
        themeSettings: {
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–µ–º–∞
            globalTheme: document.querySelector('#global-settings .form-group select option[value="auto"]')?.parentElement?.value || 'auto',
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –†–∞–∑—Ä–µ—à–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã
            allowPerConfigTheme: document.querySelectorAll('#global-settings .toggle-wrapper')[1]?.querySelector('.toggle-switch')?.classList.contains('active') !== false,
            // ‚úÖ –°–û–•–†–ê–ù–Ø–ï–ú: userCanChange (–Ω–µ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–∞)
            userCanChange: existingGlobalSettings.themeSettings?.userCanChange !== undefined ? existingGlobalSettings.themeSettings.userCanChange : false
        },

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –í–°–ï –ø–æ–ª—è configSwitcher
        configSwitcher: {
            // –ü–æ–∑–∏—Ü–∏—è –≤—Å–µ–≥–¥–∞ header (–¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è)
            position: 'header',
            // ‚úÖ –°–û–•–†–ê–ù–Ø–ï–ú: title (–Ω–µ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–∞)
            title: existingGlobalSettings.configSwitcher?.title || '–°–º–µ–Ω–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞',
            // ‚úÖ –°–û–•–†–ê–ù–Ø–ï–ú: showLabels (–Ω–µ—Ç UI —ç–ª–µ–º–µ–Ω—Ç–∞)
            showLabels: existingGlobalSettings.configSwitcher?.showLabels !== undefined ? existingGlobalSettings.configSwitcher.showLabels : true,
            // ‚úÖ –ß–ò–¢–ê–ï–ú –ò–ó –§–û–†–ú–´: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            defaultConfig: document.getElementById('defaultConfigSelector')?.value || 'financeConfig'
        },

        // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º availableConfigs (—Å –ø–æ—Ä—è–¥–∫–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π)
        availableConfigs: existingGlobalSettings.availableConfigs || {},

        // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º streamingAnimation —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ —Ñ–æ—Ä–º—ã
        streamingAnimation: {
            enabled: document.getElementById('streamingAnimationEnabledToggle')?.classList.contains('active') !== false,
            speed: parseInt(document.getElementById('streamingAnimationSpeed')?.value) || 70,
            chunkType: document.getElementById('streamingAnimationChunkType')?.value || 'word'
        }
    };


    // ‚úÖ –û–¢–õ–ê–î–ö–ê: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π

    showSaveIndicator('saving', t('save.saving_global'));

    fetch('save-webchat-config.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            type: 'global',
            globalSettings: globalSettings
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showSaveIndicator('success', t('save.global_settings_saved'));
            isDirty = false;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø–∞–º—è—Ç–∏
            window.GlobalConfigSettings = globalSettings;
        } else {
            showSaveIndicator('error', data.error || t('save.save_error'));
        }
    })
    .catch(error => {
        showSaveIndicator('error', '–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
    });
}

// –ü—Ä–∏–≤—è–∑–∫–∞ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
document.addEventListener('DOMContentLoaded', function() {
    const globalSaveBtn = document.querySelector('#global-settings .btn-primary');
    if (globalSaveBtn) {
        globalSaveBtn.onclick = saveGlobalSettings;
    }
});
// ===============================================
// –û–¢–õ–ê–î–ö–ê: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
// ===============================================
const originalSaveConfig = window.saveConfig;
window.saveConfig = function() {
    
    const configData = collectConfigData();
    
    // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    if (originalSaveConfig) {
        originalSaveConfig.call(this);
    }
};

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
const originalFetch = window.fetch;
window.fetch = function(...args) {
    
    return originalFetch.apply(this, args).then(response => {
        return response;
    });
};
// ===============================================
// üîß –§–£–ù–ö–¶–ò–Ø –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
// ===============================================
window.restoreConfigFromBackup = function(backupFile) {
    if (!confirm(t('confirm.restore_from_backup').replace('{file}', backupFile))) {
        return;
    }
    
    fetch('restore-backup.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ backup: backupFile })
    })
    .then(r => r.json())
    .then(data => {
        if (data.success) {
            alert(t('alert.config_restored'));
            setTimeout(() => location.reload(), 1000);
        } else {
            alert(t('alert.restore_error').replace('{error}', data.error));
        }
    });
};

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
window.showBackups = function() {
    fetch('list-backups.php')
        .then(r => r.json())
        .then(backups => {
            if (backups.length === 0) {
                alert(t('alert.no_backups'));
                return;
            }
            
            const list = backups.map((b, i) => `${i + 1}. ${b.name} (${b.size})`).join('\n');
            const choice = prompt('–î–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã:\n\n' + list + '\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:');
            
            if (choice) {
                const index = parseInt(choice) - 1;
                if (backups[index]) {
                    restoreConfigFromBackup(backups[index].name);
                }
            }
        });
};

// ========================================
// –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –ë–†–ï–ù–î–ò–†–û–í–ê–ù–ò–ï–ú
// ========================================

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
function updateBrandingTypeFields() {
    const logoType = document.getElementById('brandingLogoType').value;
    
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –ø–æ–ª—è
    document.getElementById('brandingSvgField').style.display = 'none';
    document.getElementById('brandingIconField').style.display = 'none';
    document.getElementById('brandingImageField').style.display = 'none';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ
    if (logoType === 'svg') {
        document.getElementById('brandingSvgField').style.display = 'block';
    } else if (logoType === 'icon') {
        document.getElementById('brandingIconField').style.display = 'block';
    } else if (logoType === 'image') {
        document.getElementById('brandingImageField').style.display = 'block';
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è
function updateBrandingPreview() {
    const toggle = document.getElementById('brandingEnabledToggle');
    const enabled = toggle ? toggle.classList.contains('active') : false;
    const logoType = document.getElementById('brandingLogoType').value;
    const logoSvg = document.getElementById('brandingLogoSvg').value;
    const icon = document.getElementById('brandingIcon').value;
    const imageUrl = document.getElementById('brandingImageUrl').value;
    const companyName = document.getElementById('brandingCompanyName').value || 'Company';
    const companyUrl = document.getElementById('brandingCompanyUrl').value.trim();
    const poweredByText = document.getElementById('brandingPoweredByText').value.trim();
    const logoWidth = document.getElementById('brandingLogoWidth').value;
    const logoHeight = document.getElementById('brandingLogoHeight').value;
    const fontSize = document.getElementById('brandingFontSize').value;

    if (!enabled) {
        const disabledText = t('branding.disabled_preview');
        document.getElementById('brandingPreviewLight').innerHTML = `<p style="text-align: center; color: #9ca3af; padding: 20px;">${disabledText}</p>`;
        document.getElementById('brandingPreviewDark').innerHTML = `<p style="text-align: center; color: #6b7280; padding: 20px;">${disabledText}</p>`;
        return;
    }

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –ª–æ–≥–æ—Ç–∏–ø–∞
    let logoHTML = '';
    if (logoType === 'svg' && logoSvg) {
        logoHTML = `<div style="width: ${logoWidth}px; height: ${logoHeight}px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">${logoSvg}</div>`;
    } else if (logoType === 'icon' && icon) {
        logoHTML = `<div style="font-size: ${logoWidth * 0.8}px; line-height: 1; flex-shrink: 0;">${icon}</div>`;
    } else if (logoType === 'image' && imageUrl) {
        logoHTML = `<div style="width: ${logoWidth}px; height: ${logoHeight}px; flex-shrink: 0;"><img src="${imageUrl}" alt="${companyName}" style="width: 100%; height: 100%; object-fit: contain;"></div>`;
    }

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ (—Å —Å—Å—ã–ª–∫–æ–π –∏–ª–∏ –±–µ–∑)
    const companyNameStyle = 'font-weight: 600; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;';
    const companyNameStyleDark = 'font-weight: 600; background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;';

    let companyNameHTML = `<span style="${companyNameStyle}">${companyName}</span>`;
    let companyNameHTMLDark = `<span style="${companyNameStyleDark}">${companyName}</span>`;

    if (companyUrl) {
        // –ï—Å–ª–∏ –µ—Å—Ç—å URL, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ —Å—Å—ã–ª–∫—É, —Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç–∏–ª–∏ (text-decoration: none —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)
        companyNameHTML = `<a href="${companyUrl}" target="_blank" rel="noopener noreferrer" style="text-decoration: none;"><span style="${companyNameStyle}">${companyName}</span></a>`;
        companyNameHTMLDark = `<a href="${companyUrl}" target="_blank" rel="noopener noreferrer" style="text-decoration: none;"><span style="${companyNameStyleDark}">${companyName}</span></a>`;
    }

    // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è "Powered by" —Ç–µ–∫—Å—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    const poweredByHTML = poweredByText ? `<span style="font-weight: 400; color: rgba(0, 0, 0, 0.5);">${poweredByText}</span>` : '';
    const poweredByHTMLDark = poweredByText ? `<span style="font-weight: 400; color: rgba(255, 255, 255, 0.5);">${poweredByText}</span>` : '';

    // –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (–±–µ–∑ —Ñ–æ–Ω–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –¥–∏–∑–∞–π–Ω)
    const lightHTML = `
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px; padding: 8px 16px;">
            ${logoHTML}
            <div style="display: flex; align-items: baseline; gap: 4px; font-size: ${fontSize}px;">
                ${poweredByHTML}
                ${companyNameHTML}
            </div>
        </div>
    `;

    // –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–±–µ–∑ —Ñ–æ–Ω–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –¥–∏–∑–∞–π–Ω)
    const darkHTML = `
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px; padding: 8px 16px;">
            ${logoHTML}
            <div style="display: flex; align-items: baseline; gap: 4px; font-size: ${fontSize}px;">
                ${poweredByHTMLDark}
                ${companyNameHTMLDark}
            </div>
        </div>
    `;

    document.getElementById('brandingPreviewLight').innerHTML = lightHTML;
    document.getElementById('brandingPreviewDark').innerHTML = darkHTML;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è
function loadBrandingSettings() {
    if (!window.baseConfig || !window.baseConfig.branding) {
        return;
    }

    const branding = window.baseConfig.branding;

    // –û–±–Ω–æ–≤–ª—è–µ–º toggle-switch
    const toggle = document.getElementById('brandingEnabledToggle');
    if (toggle) {
        if (branding.enabled !== false) {
            toggle.classList.add('active');
        } else {
            toggle.classList.remove('active');
        }
    }

    document.getElementById('brandingLogoType').value = branding.logoType || 'svg';
    document.getElementById('brandingLogoSvg').value = branding.logoSvg || '';
    document.getElementById('brandingIcon').value = branding.icon || 'ü§ñ';
    document.getElementById('brandingImageUrl').value = branding.imageUrl || '';
    document.getElementById('brandingCompanyName').value = branding.companyName || 'NexusMindAI';
    document.getElementById('brandingCompanyUrl').value = branding.companyUrl || '';
    document.getElementById('brandingPoweredByText').value = branding.poweredByText || '';

    if (branding.size) {
        document.getElementById('brandingLogoWidth').value = branding.size.logoWidth || 32;
        document.getElementById('brandingLogoHeight').value = branding.size.logoHeight || 32;
        document.getElementById('brandingFontSize').value = branding.size.fontSize || 12;
    }

    updateBrandingTypeFields();
    updateBrandingPreview();

}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è
function saveBrandingSettings() {
    if (!window.baseConfig) {
        alert('‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        return;
    }

    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    if (!window.baseConfig.branding) {
        window.baseConfig.branding = {};
    }

    const branding = window.baseConfig.branding;

    // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ toggle-switch
    const toggle = document.getElementById('brandingEnabledToggle');
    branding.enabled = toggle ? toggle.classList.contains('active') : false;

    branding.logoType = document.getElementById('brandingLogoType').value;
    branding.logoSvg = document.getElementById('brandingLogoSvg').value;
    branding.icon = document.getElementById('brandingIcon').value;
    branding.imageUrl = document.getElementById('brandingImageUrl').value;
    branding.companyName = document.getElementById('brandingCompanyName').value;
    branding.companyUrl = document.getElementById('brandingCompanyUrl').value;
    branding.poweredByText = document.getElementById('brandingPoweredByText').value;

    if (!branding.size) {
        branding.size = {};
    }

    branding.size.logoWidth = parseInt(document.getElementById('brandingLogoWidth').value) || 32;
    branding.size.logoHeight = parseInt(document.getElementById('brandingLogoHeight').value) || 32;
    branding.size.fontSize = parseInt(document.getElementById('brandingFontSize').value) || 12;

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    saveBaseSettings();

}
